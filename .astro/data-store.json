[["Map",1,2,9,10],"meta::meta",["Map",3,4,5,6,7,8],"astro-version","5.16.6","content-config-digest","810955cae52c83dc","astro-config-digest","{\"root\":{},\"srcDir\":{},\"publicDir\":{},\"outDir\":{},\"cacheDir\":{},\"compressHTML\":true,\"base\":\"/\",\"trailingSlash\":\"ignore\",\"output\":\"static\",\"scopedStyleStrategy\":\"attribute\",\"build\":{\"format\":\"directory\",\"client\":{},\"server\":{},\"assets\":\"_astro\",\"serverEntry\":\"entry.mjs\",\"redirects\":true,\"inlineStylesheets\":\"auto\",\"concurrency\":1},\"server\":{\"open\":false,\"host\":false,\"port\":4321,\"streaming\":true,\"allowedHosts\":[]},\"redirects\":{\"/jem\":\"https://buttondown.email/agney\"},\"image\":{\"endpoint\":{\"route\":\"/_image\"},\"service\":{\"entrypoint\":\"astro/assets/services/sharp\",\"config\":{}},\"domains\":[],\"remotePatterns\":[],\"responsiveStyles\":false},\"devToolbar\":{\"enabled\":true},\"markdown\":{\"syntaxHighlight\":{\"type\":\"shiki\",\"excludeLangs\":[\"math\"]},\"shikiConfig\":{\"langs\":[],\"langAlias\":{},\"theme\":\"github-dark\",\"themes\":{\"light\":\"github-light\",\"dark\":\"tokyo-night\"},\"wrap\":false,\"transformers\":[]},\"remarkPlugins\":[],\"rehypePlugins\":[],\"remarkRehype\":{},\"gfm\":true,\"smartypants\":true},\"security\":{\"checkOrigin\":true,\"allowedDomains\":[]},\"env\":{\"schema\":{},\"validateSecrets\":false},\"experimental\":{\"clientPrerender\":false,\"contentIntellisense\":false,\"headingIdCompat\":false,\"preserveScriptOrder\":false,\"liveContentCollections\":false,\"csp\":false,\"staticImportMetaEnv\":false,\"chromeDevtoolsWorkspace\":false,\"failOnPrerenderConflict\":false,\"svgo\":false},\"legacy\":{\"collections\":false}}","blog",["Map",11,12,24,25,36,37,49,50,62,63,75,76,89,90,101,102,113,114,126,127,139,140,148,149,158,159,171,172,184,185,197,198,210,211,221,222,233,234,245,246,257,258,272,273,283,284,296,297,310,311,322,323,335,336,348,349,361,362,374,375,387,388,399,400,410,411,422,423,434,435,446,447,457,458,467,468,479,480,489,490,500,501,511,512,523,524,534,535,543,544,555,556,566,567,576,577,585,586,596,597,609,610,621,622,633,634,643,644,654,655,666,667,676,677,687,688,697,698],"10k-reflecting-so",{"id":11,"data":13,"body":21,"filePath":22,"digest":23,"deferredRender":20},{"title":14,"date":15,"tags":16,"published":20},"10k and Reflecting on StackOverflow","2020-04-18T22:12:03.284Z",[17,18,19],"stack overflow","writing good answers","web development",true,"About 5 years ago, as I started out on Stack Overflow, I was simply looking for a way to keep track of answers that I see. Then, one day it felt like I could use some validation. If I could get out there and answer few questions from others, I could somehow prove a better developer than them.\n\nIt took few days of sifting through hundreds of questions, I arrived at a JavaScript question I could answer. But then, each time someone else answered it better than me. It is very often through those experiences that I learned that things that sound obvious in my head are not exactly the ones that made sense for everyone.\n\n![Stackoverflow Reputation 10k](https://dev-to-uploads.s3.amazonaws.com/i/f6m139dvsfdereele7tb.png)\n\nToday, after over 350 answers and a reputation of 10,000 there is more of a sense of calm in my approach to answers. Here are a bunch of things that I learned along the way:\n\n1. Explain the answer\n   I'm sure we can all use consistent naming and functions to decorate our codebases. But the case is not the same for someone looking at your answer. If you are only providing a code snippet, them and everyone else looking at it are bound to be confused. Explain what you are doing differently from the OP and why.\n\n2. Link back to the docs\n   This ties in with the sound of _that's obvious_ in our heads. Very often, these things are not obvious at all. The documentation would provide upto date examples and explanation of all the options that the user can take in case of changing things up, instead of trying to over explain everything from the docs, quote the important part and link back to the page.\n\n3. Runnable Snippets\n   Whenever the question or the answer had a runnable snippet, a resolution was reached much faster than the one without it. Nobody likes to read code and it is some sort off validation to see the code actually working. As a web developer, I often relied on platforms like [codepen](https://codepen.io/), [codesandbox](https://codesandbox.io/) and [stackblitz](https://stackblitz.com/) for my live demos. While this approach surely works and is mostly easier, it starts to wear down on you with time. There are hundreds of snippets that are halfway done, some linked to answer, some not that I have lost track. In case you delete some of these for space, some of your older answers would be broken and cannot help others. Stackoverflow has an [in build snippets tool for web developers](https://meta.stackoverflow.com/questions/338537/how-do-i-create-a-react-stack-snippet-with-jsx-support/338538#338538) and while it is sometimes a pain to create, it's much easier to maintain.\n\n4. Not all worthy questions\n   Sometimes the questions are either duplicates or caused by simple typos. While you can go ahead and answer them, may be rack up a few reputation points, it is often unfair both to the person who asked the question and StackOverflow as a platform. There are flagging and closing options for questions, use them wisely. StackOverflow guide to [How to write a good answer](https://stackoverflow.com/help/how-to-answer) is a good starting point.\n\n5. Admit that you may be wrong\n   Your large reputation or years of experience does not make you all-knowing. There are chances that others might come upto you and make suggestions or sometimes tell you that you are wrong. Being patronising/condescending towards them does not serve your purpose. Evaluate their comment, if you are wrong admit it, learn from it and move on.\n\nToday, it is no longer that sense of validation that I seek from StackOverflow. Answering a question does not make me a better developer than they are. It is often the bravest thing to do to face a crowd and admit that you don't know the answer and the internet only makes it harder. Cheers to everyone who keeps learning ðŸ¥‚","src/content/blog/10k-reflecting-so.mdx","a1c95b0b64c76256","combining-promises",{"id":24,"data":26,"body":33,"filePath":34,"digest":35,"deferredRender":20},{"title":27,"date":28,"tags":29,"published":20},"Combining Promises","2020-06-13T22:12:03.284Z",[30,31,32],"promises","javascript","asychronous","## Prerequisites\n\n- [Promises - JS Concepts](/promises-js-concepts/)\n\n---\n\nIt is quite common during web development that we run across scenarios where we have to orchestrate different asynchronous operations together. This blog describes ways in which we can combine Promises, our default async operation strategy and their applications.\n\n## Terminology\n\n\u003Cp>\n\u003Cdetails>\n  \u003Csummary>Promise\u003C/summary>\n  An object representing the eventual completion (or failure) of an asynchronous operation, and its resulting value.\n\nYou can create a promise with:\n\n```javascript\nconst promise = new Promise((resolveCallback, rejectCallback) => {\n  // Operation\n});\n```\n\nYou can get result of a promise with:\n\n```javascript\npromise.then(\n  (resolvedResult) => {\n    // This function is called if promise is resolved.\n  },\n  (rejectionReason) => {\n    // This function is called if promise is rejected.\n  },\n);\n```\n\nA Promise is also a guarantee of an asychronous operation, any operation that is wrapped in a Promise will only be resolved or rejected only by the next clock tick.\n\n\u003C/details>\n\u003C/p>\n\nA promise can be of three different states:\n\n1. Pending - meaning that it's still in flight.\n2. Fulfilled - operation has completed successfully.\n3. Rejected - operation has failed.\n\nA promise that is either Fulfilled or Rejected is said to be _settled_.\n\n## Combinators\n\nAll of the combinators take an array of Promises as argument.\n\n### Promise.all\n\nThis is the most widely used among the combinators. Here is how we can use it:\n\n```javascript\nPromise.all([promiseA, promiseB]).then(\n  ([promiseAResponse, promiseBResponse]) => {\n    // Do something with it here\n  },\n);\n```\n\n`Promise.all` is fulfilled if **all** promises that are provided to it are fulfilled or if **one** of the promises is rejected.\n\n### Promise.race\n\n```javascript\nPromise.race([promiseA, promiseB]).then(\n  ([promiseAResponse, promiseBResponse]) => {\n    // Do something with it here\n  },\n);\n```\n\n`Promise.race` is fulfilled when **one** of the promises is settled (fulfilled or rejected).\n\n### Promise.allSettled\n\n```javascript\nPromise.allSettled([promiseA, promiseB]).then(\n  ([promiseAResponse, promiseBResponse]) => {\n    // Do something with it here\n  },\n);\n```\n\nReturns when all promises are settled (fulfilled or rejected).","src/content/blog/combining-promises.mdx","7929eb13ac329e03","call-stack",{"id":36,"data":38,"body":46,"filePath":47,"digest":48,"deferredRender":20},{"title":39,"date":40,"tags":41,"published":20},"Call Stack - JavaScript Concepts 1","2019-01-22T22:12:03.284Z",[42,43,44,45],"call stack","execution context","must learn javascript concepts","javascript single thread","This is part of a series where I try to explain through each of [33 JS Concepts](https://github.com/leonardomso/33-js-concepts).\n\nThis part corresponds to the JavaScript Call Stack.\n\nLet's get started without further ado.\n\n![MemoryModel](/blog/call-stack/memory-model.svg)\n\nThis is the memory model taken from [MDN here](https://developer.mozilla.org/bm/docs/Web/JavaScript/EventLoop). Also note that this is only a visual representation, javascript engines can optimise the representation for performance reasons.\n\nLet us look at purposes of each of these areas.\n\n### 1. Heap\n\nIf you took a Computer Science degree you might remember _Heap_, well barely. Heap is often taught with respect to _Heap Sort_ which is never used or heard about ever again.\n\nIf you thought that was bad, for the purposes of our article, we will not be talking about heap at all. The area denoted by heap in our article will be where JavaScript allocates memory for variables, functions et. all.\n\n### 2. Queue\n\nQueue is a First in First Out(FIFO) data structure, which means that it acts just a like real world queue.\n\nThe first person to stand in the queue is also the first person who will get served. The second person replaces the first in line.\n\nWe will revisit what it holds at a later point in time.\n\n### 3. Stack\n\n[Stack](https://www.geeksforgeeks.org/stack-data-structure/) is a Last in First Out data structure. Stack is something similar to a small bag structure.\n\n![Pringles Packet](/blog/call-stack/stack-example.jpg)\n\nYou can think of it like a Bottle for Pringles, the last chips put in there is also the first to come out. The second last then takes it's place and so on.\n\n### The Call Stack\n\nA call stack is a Pringles Bottle (Stack) that holds functions. When given a script, the JavaScript interpreter runs line by line executing the statement it sees. When the interpreter **executes** a line that defines a function (either the `function` keyword or `() => {}`), it enters the function name into its call stack.\n\nRemember that I said executes a function. If the interpreter just finds a function definition, it will just add it to the `Heap`. Someone has to call the function for it to be on the call stack.\n\nSo, that is adding onto a call stack, when does the interpreter remove something from the call stack? When the said function **returns**.\n\n### What is the use case for a stack?\n\nStack is great choice for this operation, as it helps maintain the execution context for each function. On a single threaded language like JavaScript, function calls becomes very easy to track with the Call Stack.\n\nThe call stack also stores additional data with variables and the exact line to return to for the interpreter (This is held in stack frame). This is how the interpreter knows where it left off last time.\n\n### Where can I find the current call stack?\n\nTo visualise the call stack, all you need is your devtools.\n\nUnder the _Source_ panel in devtools, you can find the call stack by setting a breakpoint anywhere.\n\nThe call stack is among the tabs on the right.\n\n\u003Cdiv align=\"center\">![DevTools call stack](/blog/call-stack/devtools.gif)\u003C/div>\n\nDid you know you can click on a call stack function to go to corresponding function?\n\n### Why do I have the feeling I have seen this someplace else?\n\nThe call stack also present in the stack trace when you get an error in the console. There the call stack tells you when you ran across the error.\n\nThis is what helps you when there is an error in a library inside `node_modules`, going down the stack trace you can figure out which function from your code caused it.\n\n### Does it have a limit?\n\nThe call stack has practical limits that are implemented differently on different JavaScript engines. To see the limit on a NodeJS running v8, you can run the following command in the terminal.\n\n```bash\n  node --v8-options | grep stack-size -A 1\n```\n\nIf you exceed the stack trace limit, you will run across a Stackoverflow error (not the website) with message _Maximum Stack size exceeded_ Now you know why your recursive function did not work.\n\nAlso, stack traces have limits. You can change these limits from your respective browsers. If you use Chrome, your stack trace limit might be set to 10. To see this limit, run following command in console.\n\n```bash\n  Error.stackTraceLimit\n```\n\n### What is TCO I keep hearing about?\n\nYou might have heard that JavaScript opted in to use Tail Call Opimisation by default from ES6.\n\nThis means that if the tail call (let's put it to last statement for now) of a function is to return result from another function, then we can skip the parent stack frame.\n\n```js\nfunction fact_h(n, acc) {\n  if (n === 0) return acc;\n  return fact_h(n - 1, acc * n);\n}\n```\n\nYou can see the last statement in this function is to return result of another function, so there is no use returning to this function anymore.\n\n> It does not actually skip a stackframe, I'm just oversimplifying here.\n\nBut most of JavaScript engines haven't implemented this yet, and there hasn't been much progress. See [V8 tracker](https://bugs.chromium.org/p/v8/issues/detail?id=4698)\n\nTo read more about Tail Call Optimisation, read [Axel Rauschmayer blog](http://2ality.com/2015/06/tail-call-optimization.html)\n\n### Does this change the way I write code?\n\nIt doesn't have to. Call Stack as we have talked about is a model for single threaded JavaScript to execute functions and manage context of execution. It does not have to change code that you write.\n\nBut together with the knowledge of event loop, this concept is a starter to altering the way you think about JavaScript code.\n\nThat's about it about call stack for now. Is there something I missed? Something wrong? Something good? Ping me on [Twitter](https://twitter.com/agneymenon)","src/content/blog/call-stack.mdx","b1288298b5fcd7d6","create-code-generating-cli",{"id":49,"data":51,"body":59,"filePath":60,"digest":61,"deferredRender":20},{"title":52,"date":53,"tags":54,"published":20},"Create a Code Generating CLI","2018-12-26T22:12:03.284Z",[55,56,57,58],"code generating cli","gluegun","creating a cli","tutorial","Today I would like to walk through the procedure to create a code generating CLI. This is not a step by step tutorial, although we will be looking at the concepts involved.\n\nWhat is a _Code generating CLI_, you ask? You might have surely used one in your career, some of the examples being [create-react-app](https://facebook.github.io/create-react-app/docs/getting-started), [express-generator](https://expressjs.com/en/starter/generator.html), [vue-cli](https://cli.vuejs.org/guide/) or the amazing [ng-cli](https://cli.angular.io/).\n\nAll of these have a CLI interface that create a fully fledged application with the options passed to it. Today, we look to achieve something similar (but smaller) using the [Gluegun](https://infinitered.github.io/gluegun/) CLI building toolkit.\n\nGluegun defines itself as a delightful toolkit for building Node-powered CLIs. If this is your first time, then you can read on features and why you might want to use it from their docs [here](https://infinitered.github.io/gluegun/#/?id=gluegun). It is used in production by awesome tools like [AWS Amplify](https://github.com/aws-amplify/amplify-cli) and [Ignite CLI](https://github.com/infinitered/ignite).\n\n## What we are going to build\n\n\u003Cblockquote class=\"twitter-tweet\" data-lang=\"en\">\n  \u003Cp lang=\"en\" dir=\"ltr\">\n    Updated my business card ðŸ˜Ž{\" \"}\n    \u003Ca href=\"https://t.co/psqZQ9pj4L\">pic.twitter.com/psqZQ9pj4L\u003C/a>\n  \u003C/p>\n  &mdash; Tierney Cyren (@bitandbang){\" \"}\n  \u003Ca href=\"https://twitter.com/bitandbang/status/1075473070368919552?ref_src=twsrc%5Etfw\">\n    December 19, 2018\n  \u003C/a>\n\u003C/blockquote>\n\n[Tierney Cyren](https://twitter.com/bitandbang) had tweeted this and things went out of control very soon with lots and lots of people creating their own cards. (Even I have my own, with `npx boywithsilverwings`) What we are trying to create today is a CLI to create your own `npx` card, because why the hell not!\n\nI have a ready made CLI [here](https://github.com/agneym/create-profile-card) that you can run with:\n\n```bash\n  npm init profile-card card-name\n```\n\n> Tip: npm allows you to skip the `create` part in your package name with `npm init`. For eg. `npm init react-app`\n\n## Recap on EJS\n\nBefore we start on Gluegun, we need to take a quick recap of `ejs` that we will be using for templating.\n\n```html\n\u003C!-- Substitutes h2 contents with user.name value -->\n\u003Ch2>\u003C%= user.name %>\u003C/h2>\n\n\u003C!-- Includes user/show.ejs file and supplies user to it -->\n\u003C%- include('user/show', {user: user}); %>\n\n\u003C!-- enters the unescaped value into the tag-->\n\u003C%- JSON.stringify(user) -%> `}\n```\n\nThere is a lot [more](https://ejs.co/#docs) to it than that, but that is what we will be using for this tutorial.\n\n`ejs` is not just used for templating HTML strings, it can be used in any environment, it being JSON, Javascript or CSS. This is what we will use to generate our code according to the template.\n\n## Getting started with Gluegun\n\nGluegun comes with a CLI (which _Surprise!_ uses the Gluegun package) that helps us bootstrap a project really fast.\n\n```bash\nnpx gluegun@next new create-card\ncd create-card\nnpm link\ncreate-card\n```\n\n### What's inside\n\n```bash\nâ”œâ”€â”€ node_modules\nâ”œâ”€â”€ src\nâ”œâ”€â”€ .gitignore\nâ”œâ”€â”€ bin\nâ”œâ”€â”€ docs\nâ”œâ”€â”€ __tests__\nâ”œâ”€â”€ yarn-lock.json\nâ”œâ”€â”€ package.json\nâ””â”€â”€ readme.md\n```\n\n`src` contains all the code that we are going to edit. `bin` contains the cli file that is the root of the application.\n\n> Tip: This currently adds `yarn.lock` and `package.lock.json` to `.gitignore` by default, you might want to remove them.\n\nLet's looks inside the `src` now.\n\n```bash\nâ”œâ”€â”€ commands\nâ”œâ”€â”€ extensions\nâ”œâ”€â”€ templates\nâ”œâ”€â”€ cli.js\n```\n\n### Commands\n\nThe `commands` folder contain the commands you want the cli app to run. In our example, we will only have a single command, that also corresponds to the name of the app.\n\n```js\n// src/commands/create-card.js\nmodule.exports = {\n  name: \"create-card\",\n  run: async (toolbox) => {\n    const { print } = toolbox;\n    print.info(\"Welcome to your CLI\");\n  },\n};\n```\n\nThe `run` function actually contains the code that will execute when you type in `create-card` in the console. Inside, you see that `print` is taken out of something called the toolbox. What all does this toolbox actually have? Well, a lot of things. We will look at some along the way. What `print` command does is to print whatever text you give it to the console. There are variety of formats for use, like `print.info`, `print.warning`, `print.error` etc. (just like `console`, you get the idea)\n\nBut you can see that writing all the code inside these `run` functions can get very tricky. This is where extensions helps with.\n\n## Extensions\n\nExtensions are how we can create reusable functions and attach them to the toolbox.\n\n```js\nmodule.exports = (toolbox) => {\n  // A function to install packages present in package.json\n  function installPackages(props) {\n    const {\n      system: { which, spawn },\n      print: { info },\n    } = toolbox;\n\n    info(\"Starting package installation\");\n    // get the path of npm installation, you can also run `which npm` in terminal to see the output\n    const npmPath = which(\"npm\");\n\n    /*\n      1. Spawn a shell process that will navigate to the folder\n      2. Run npm install\n      3. Run npm run format (which is also defined in package.json)\n    */\n    return spawn(\n      `cd ${props.name} && ${npmPath} install && ${npmPath} run --quiet format`,\n      {\n        shell: true,\n        stdio: \"inherit\",\n        stderr: \"inherit\",\n      },\n    );\n  }\n  // Put the function into the toolbox\n  toolbox.installPackages = installPackages;\n};\n```\n\nYou can now invoke an extension from inside a `command` like:\n\n```js\n// src/commands/create-card.js\nmodule.exports = {\n  name: 'create-card',\n  description: 'Create new profile card project',\n  // Create alias new, create, generate and n which will also work with this command\n  alias: ['new', 'create', 'generate', 'n'],\n  run: async toolbox => {\n    const {\n      parameters,\n      template: { generate },\n      print: { info },\n      installPackages,\n      fileSystem,\n      promptDetails,\n    }\n    // Get name of the folder to be created, accessible with parameters.first\n    const name = parameters.first;\n    /*\n      This is a custom extension that prompts for details from the user\n      https://github.com/agneym/create-profile-card/blob/master/src/extensions/prompt-details.js\n    */\n    const details = await promptDetails({ name });\n    const props = { name, config };\n  }\n}\n```\n\n> Not a fan of this technique, but may be it gets better with types.\n\n### Templates\n\nNow, fast forward to the topic. How do we create the files that the user interacts with. That is what the templates folder does. Inside this folder you will find the required files that have an extra extension, `.ejs` This is what helps us inject user provided content into these files.\n\nNow, all these files may not need content injection, for example `.gitignore`, but we include the extension so we can replace it by just iterating over all the files.\n\nHere is an example of a file that needs injection:\n\n```json\n{\n  \"name\": \"\u003C%= props.name %>\",\n  \"version\": \"0.0.1\",\n  \"description\": \"\u003C%= props.name %> Profile Card\",\n  \"bin\": {\n    \"\u003C%= props.name %>\": \"bin/card.js\"\n  },\n  \"scripts\": {\n    \"format\": \"prettier --write **/*.{js,json} && standard --fix\",\n    \"lint\": \"standard\"\n  },\n  \"license\": \"MIT\",\n  \"dependencies\": {\n    \"boxen\": \"^2.1.0\",\n    \"chalk\": \"^2.4.1\"\n  },\n  \"devDependencies\": {\n    \"standard\": \"^12.0.1\",\n    \"prettier\": \"^1.12.1\",\n    \"jest\": \"^23.6.0\"\n  }\n}\n```\n\nYou can see that this files requires us to fill in the name with `props.name` where `props` is supposed to be passed into this function. This is same as the name that the user has already entered with create command. How do we pass this in?\n\n```js\n// Continuing src/commands/create-card.js\nconst files = [\n  \"bin/card.js.ejs\",\n  \"package.json.ejs\",\n  \"README.md.ejs\",\n  \"config.json.ejs\",\n  \".gitignore.ejs\",\n];\n\nconst filesCopy = files.reduce((acc, file) => {\n  const template = `/${file}`;\n  // Where to copy this file to.\n  const target = `${props.name}/${file.replace(\".ejs\", \"\")}`;\n  /*\n    First argument is the template,\n    Second is the target, where to put the file\n    The third is the argument to be passed into the file\n    returns a promise\n  */\n  const gen = generate({ template, target, props });\n  return acc.concat([gen]);\n}, []);\n\n// Wait for all promises to resolve\nawait Promise.all(filesCopy);\n// Set permissions for cli to execute\nfilesystem.chmodSync(`${props.name}/bin/card.js`, \"755\");\n// Wait for installing packages, this is the custom extension written above\nawait installPackages(props);\n```\n\nOnce this is complete, you will have all the files copied to the directory of preference and ready.\n\n[`bin/card.js`](https://github.com/agneym/create-profile-card/blob/master/src/templates/bin/card.js.ejs) contains the javascript that will be suppled to the user. It uses boxen to draw a box and chalk to output text in colors for the console. It reads user details from `config.json` and creates console output.\n\nYou can find the complete application [here](https://github.com/agneym/create-profile-card) for reference.\n\nFeel free to ping me at [@agneymenon](https://twitter.com/agneymenon) if you get stuck.","src/content/blog/create-code-generating-cli.mdx","ab57f322fac6473f","detecting-if-an-element-is-in-viewport-javascript",{"id":62,"data":64,"body":72,"filePath":73,"digest":74,"deferredRender":20},{"title":65,"date":66,"tags":67,"published":20},"Detecting if an element is in the viewport - Javascript","2018-05-30T22:12:03.284Z",[31,68,69,70,71],"detecting div","viewport relative","on scroll","intersection observer","This method uses the [Intersection Observer](https://w3c.github.io/IntersectionObserver/) which is relatively the new kid in town, so be sure to check out [Browser Support](https://caniuse.com/#feat=intersectionobserver). Also [polyfill](https://github.com/w3c/IntersectionObserver/tree/master/polyfill).\n\n#### Show me theÂ Code!\n\n\u003Ciframe\n  height=\"300\"\n  scrolling=\"no\"\n  title=\"Intersection Observer Demo\"\n  src=\"//codepen.io/BoyWithSilverWings/embed/bKgopr/?height=300&theme-id=32843&default-tab=js,result\"\n  frameborder=\"no\"\n  allowtransparency=\"true\"\n  allowfullscreen=\"true\"\n  style={{ width: \"100%\" }}\n>\n  See the Pen{\" \"}\n  \u003Ca href=\"https://codepen.io/BoyWithSilverWings/pen/bKgopr/\">\n    \u003Cspan>Intersection Observer Demo\u003C/span>\n  \u003C/a>\n  \u003Cspan> by Boy with Silver Wings (\u003C/span>\n  \u003Ca href=\"https://codepen.io/BoyWithSilverWings\">@BoyWithSilverWings\u003C/a>) on{\" \"}\n  \u003Ca href=\"https://codepen.io\">CodePen\u003C/a>.\n\u003C/iframe>\n\nBut letâ€™s go into why first? Why use Intersection Observer and not [getBoundingClientRect](https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect)? I have an article doing that with jQuery [here](https://medium.com/talk-like/detecting-if-an-element-is-in-the-viewport-jquery-a6a4405a3ea2). **So Why?**\n\n`getBoundingClientRect` is something that works on the main thread and hence involves the programmer to write multiple scroll handlers that will at the end of day slow your site down. If working on the main thread is not enough, you have `getBoundingClientRect` [triggering a browser re-layout](https://gist.github.com/paulirish/5d52fb081b3570c81e3a).\n\nIntersection Observer API is newly added to spec to free us from this evil. Letâ€™s look at how to setup one first.\n\n```js\nconst observer = new IntersectionObserver(callback);\nconst target = document.querySelector('#target');\n\nobserver.observe(target);\n\nfunction callback(entries) {\n  //  Do action here\n}\n`}\n```\n\nIntersection Observer takes two arguments, first one being `callback` function and the second takes an object with different kinds of options. These options are:\n\n- `root`: root element to which the intersection observer compares the visibility to.\n\n- `rootMargin`: This one letâ€™s your choose margins for the root element. This is a CSS type margin string, `10px 20px 30px 40px`.\n\n- `threshold`Â : This might be the most prominent one among the options. List of threshold(s) at which to trigger callback. callback will be invoked when intersectionRectâ€™s area changes from greater than or equal to any threshold to less than that threshold, and vice versa. This option defaults to 0, which means it fires when a small part of element becomes visible.\n\nIn our example, we have used:\n\n```js\nconst observer = new IntersectionObserver(callback, {\n  threshold: [0, 0.25, 0.5, 0.75, 1],\n});\n```\n\nThis means, the `callback` will fire at junctures 0, 0.25, 0.5, 0.75 and 1 (0 means 0% visibility and 1 means 100% visibility)\n\nThe callback gives you an array of elements that you have attached the observer to. You attach an observer to an element as:\n\n`observer.observe(element);`\n\nWhen the callback fires according to the threshold levels that we have specified in our code. It gets the arguments `changes` which has an array of all observed elements that you have attached to.\n\nEach object comprises of:\n\n```js\nvar observer = new IntersectionObserver((changes) => {\n  for (const change of changes) {\n    console.log(change.time); // Timestamp when the change occurred\n    console.log(change.rootBounds); // Unclipped area of root\n    console.log(change.boundingClientRect); // target.boundingClientRect()\n    console.log(change.intersectionRect); // boundingClientRect, clipped by its containing block ancestors, and intersected with rootBounds\n    console.log(change.intersectionRatio); // Ratio of intersectionRect area to boundingClientRect area\n    console.log(change.target); // the Element target\n  }\n}, {});\n```\n\nFinally, inside this callback you can take any action necessary for your visibility. You might be using this for\n\n1.  Ad visibility\n\n2.  Lazy Loading Images\n3.  Executing animations only when it is sure that user is watching\n4.  Infinite Loading\n5.  Limited only by your imaginationâ€¦\n\nBut do take into account that the _Intersection Observer_ is not pixel perfect, so stay away from creating animations that depend on it.\n\nThe intersection observer will stop listening if:\n\n1.  `observer.unobserve(target)`\n\n2.  `observer.disconnect() // The difference being unobserve only removes the target from observation, disconnect removes observation all together.`\n3.  Target element is deleted\n4.  Intersection root is deleted\n\n> Happy Coding","src/content/blog/detecting-if-an-element-is-in-viewport-javascript.mdx","f27c16554aac6285","carlo-on-webserver",{"id":75,"data":77,"body":86,"filePath":87,"digest":88,"deferredRender":20},{"title":78,"date":79,"tags":80,"published":20},"Carlo development on a web server","2019-01-06T22:12:03.284Z",[81,82,83,84,85],"carlo","server","webpack","module not found error","blocked by the client","[Carlo](https://github.com/GoogleChromeLabs/carlo) is a headful Node app framework for building desktop applications.\n\n### How is it different from Electron, Proton Native?\n\nWhile these other frameworks, bring their own runtime into the equation, Carlo uses the Chrome instance already installed on a users computer.\n\n### Why would you want it on a web server?\n\nUsing webpack to bundle all your files makes it easier to use the developer ecosystem that the javascript community already provides. Like Babel, SCSS or ESLint.\n\n### What is about to be assumed?\n\nYou already know how to setup a normal webpack server.\n\n### Is there a shortcut?\n\nYes, [Electrojet CLI](https://github.com/agneym/create-electrojet) provides a single command to setup a carlo project using webpack:\n\n```bash\n  npm init electrojet \u003Cproject-name> --template=carlo\n```\n\n### How do I set Carlo to listen to the webpack dev server?\n\nCarlo has an API [`serveOrigin`](https://github.com/GoogleChromeLabs/carlo/blob/master/API.md#appserveoriginbase-prefix) to listen to a particular web address as origin. You can use that with:\n\n```js\ncarlo.launch().then(async (app) => {\n  app.on(\"exit\", () => process.exit());\n  app.serveOrigin(\"http://localhost:8080\"); // Point to webpack url here\n  await app.load(\"index.html\");\n});\n```\n\nBut then, you would soon find that your javascript bundle is not loading.\n\n### What is the problem?\n\nCarlo, currently on version 0.9, allows to serve origin contents only when they are from secure origins, which means if you try to setup a normal webpack server to serve the application you would end up with:\n\n```bash\nBlocked by the Client\n```\n\nin the console while serving the application.\n\nFortunately, if you are using webpack dev server, the solution to this is easy. Inside the configuration object for `devServer` provide:\n\n```js\n{\n  devServer: {\n    ...otherOptions\n    http: true,\n  }\n}\n```\n\nBut this would pull up the nasty `Your webpack is not secure` screen for you, when you are not even running it on a webpage.\n\nLuckily, Carlo provides an API to escape this dreaded screen. On launching the carlo server, you can provide `args: [\"--allow-insecure-localhost\"],` to avoid seeing the screen ever again.\n\n```js\ncarlo.launch({\n  ...otherOptions\n  args: [\"--allow-insecure-localhost\"],\n})\n```\n\nYou should have your server up and running now.\n\nCheck out [Electrojet Carlo Default](https://github.com/agneym/electrojet-default-carlo)\n\n> Happy Coding!","src/content/blog/carlo-on-webserver.mdx","51125f5d57514b29","dynamic-tailwind-values",{"id":89,"data":91,"body":98,"filePath":99,"digest":100,"deferredRender":20},{"title":92,"date":93,"tags":94,"published":20},"Dynamic values in Tailwind","2023-10-22T22:02:03.284Z",[95,96,31,97],"tailwind","react","dynamic","When working with Tailwind CSS, there are instances where you may need to use dynamic values, such as data fetched from the backend or calculations performed within your code.\n\nIn these scenarios, you might initially consider using arbitrary values:\n\n```javascript\nfunction Content() {\n  return \u003Cmain className=\"h-[calc(100%_-_64px)]\">\u003C/main>;\n}\n```\n\nIn the example above, the `64px` value is arbitrary and stands aloneâ€”it isn't tied to any external variable. However, be wary of directly interpolating JavaScript variables within class names, as Tailwind CSS documentation advises against it.\n\nA clearer and more maintainable approach is to utilize CSS variables:\n\n```javascript\nfunction Content() {\n  return (\n    \u003Cmain\n      style={{ \"--header-height\": \"64px\" }}\n      className=\"h-[calc(100%_-_var(--header-height))]\"\n    >\u003C/main>\n  );\n}\n```\n\nFor an even more abstracted method:\n\n```javascript\nfunction Content() {\n  return (\n    \u003Cmain\n      style={{\n        \"--header-height\": \"64px\",\n        \"--main-height\": \"calc(100% - var(--header-height))\",\n      }}\n      className=\"h-[var(--main-height)]\"\n    >\u003C/main>\n  );\n}\n```\n\nYou can also use the same technique to represent values from the backend. This gives us the extra advantage of using modifiers like `md:` or `hover:` which isn't possible using inline styles. Taking an example out of the Tailwind blog:\n\n```javascript\nexport function MyComponent({ company }) {\n  return (\n    \u003Cdiv\n      style={{\n        \"--brand-color\": company.brandColor,\n        \"--brand-hover-color\": company.brandHoverColor,\n      }}\n      className=\"bg-[--brand-color] hover:bg-[--brand-hover-color]\"\n    />\n  );\n}\n```","src/content/blog/dynamic-tailwind-values.mdx","a5354279e50b95c4","effective-meetings",{"id":101,"data":103,"body":110,"filePath":111,"digest":112,"deferredRender":20},{"title":104,"date":105,"tags":106,"published":20},"Effective Remote Communication","2020-04-04T22:12:03.284Z",[107,108,109],"remote","communication","meetings","![Remote meetings](/blog/effective-meetings/poster.jpg)\n\nA lot of people are taking to remote for the first time because of the pandemic. While doing software engineering remote is well and good enough for most people, it's the communication that they struggle with. If you do not see the other person what techniques can we use to get our thoughts through?\n\nThe points in discussion are very valid even for in-person communication. We are just discussing how to make them better in context of Remote.\n\n## 1. Meetings\n\nThe hardest hit of these are meetings. When there is nobody to laugh at the jokes, how do we measure the impact?\n\n### 1. Make sure you need a meeting\n\nMany meetings happen because they can. If you are not getting feedback from people in the meeting, not allowing them to build off each others ideas, then the meeting could have been an email.\n\nAtlassian has published a [guide](https://3kllhk1ibq34qk6sp3bhtox1-wpengine.netdna-ssl.com/wp-content/uploads/2018/05/runningeffectivemeetingscheatsheet_atlassian.pdf) to check if your meeting is necessary.\n\n### 2. Make sure all the attendees need to be in the meeting\n\nMany a time we tack on people for meetings, but at the end don't invite the most necessary people. As Julie Zhuo writes in [Making of a Manager](https://www.amazon.in/Making-Manager-What-Everyone-Looks/dp/0753552892), if the design team has a meeting to push backward all the dates for engineering team, the result is disharmony. But if representatives from the engineering team themselves are invited and a decision is made with suggestions from both parties, then it gains trust from both departments.\n\nHarvard Business Review has a calculator for [finding the cost of each meeting](https://hbr.org/2016/01/estimate-the-cost-of-a-meeting-with-this-calculator)\n\n### 3. Always write an agenda for your meeting\n\nIt might seem wasteful on the part of the manager.\n\n> Oh! I'm going to meet them in person in a few hours, I will explain it then.\n\nBut do remember that springing surpises on people isn't the best way to get feedback from anyone. Everyone takes some time to actually understand the graphs and bullet points that are spread on a PowerPoint presentation.\n\nIf you give people an agenda on what is to be discussed:\n\n- They are aware that this is a meeting they should attend\n- Allows people to catch up on what has been discussed even in between action items\n- Actually prepare points to discuss.\n- A prepared person can beat group-think.\n\nNoteJoy has examples and templates for you to write an [effective meeting agenda](https://notejoy.com/resources/meeting-agenda-example)\n\n### 3. Make sure results of the meeting are understood for all attendees.\n\nAs a meeting host gathering feedback, it is possible that you understand what the results of the meeting are. But if you do not communicate that with the attendees, then the meaning and ownership are lost on them.\n\n- Meeting results are to be actionable.\n- Each meeting result has to be under the ownership of a person\n- It should be documented through email or any other note service used.\n\nIt doesn't have to be immediate. Time can be spent after the meeting to calculate costs of alternatives discussed during the meeting and included in the results to reach an effective solution.\n\n![](https://dev-to-uploads.s3.amazonaws.com/i/vro5pokzg8u8rgx3bedx.jpg)\n\n## 2. Slack/Teams\n\nOr some other software where employees are divided into channels and predominantly text/image based communication happens.\n\n### 1. Use channels\n\nChannels are very useful for general questions. This is primarily because:\n\n- Anyone can answer your query\n- Other people might have same query as yours in the future.\n- The project manager can collect common questions and add it to documentation FAQ.\n\nSo many companies outright ban personal communication for work and prefer channels for all communication.\n\nArkency has a guide explaning why their teams are asked to stick to [channels](https://blog.arkency.com/use-channels-not-direct-messages/)\n\nBut also know that this is helpful only when the teams are divided into very **small** channels. Assume the case where an employee wants to discuss if confirmation has to be added in his secuity design. To communicate this in a channel with all employees, they would have to explain the entire context in anticipation that even other employees should 'get' where the alert box is. If it gets too big, no one reads, the only person who could answer in the first place also gets confused. When this happens, you would see that all communication in the channel has been striped down to _Can I have a call?_ which is more harmful that the original intention of the rule.\n\n### 2. Long form communication\n\nRemote Teams communicate mostly through written text (if you don't then, aspire to communicate through written text). This is because unlike videos, text is indexable and searchable for all the employees. Even if you don't show up during a specific time, you can provide feedback to an RFC or go through all the comments as they happened.\n\nBasecamp [Guide to their Internal Communication](https://basecamp.com/guides/how-we-communicate) is a great primer on this.\n\n### 3. Praise in public, criticise in smaller groups.\n\nOften times we 'see' people only when they make a mistake. Because of the channel rule, this often leads to pointing fingers in a public group. While this is fine, it is a criticism with some feedback, it is still important that it is kept to the people who need to hear it. If you have feedback for a person in the design team, add it to the respective channel, would the others in the company be interested in it? Probably not.\n\nHowever the opposite holds true when you want to praise an employee for their work. Choose the largest channel where it does not get annoying and offer praise. It inspires other employees to do better and let's project managers, HRs, business executives to notice the employee.\n\n## 3. Over-communicate\n\nRemember that the CEO cannot see you in the elevator ask you about work. People can forget that you are working there unless you tell them.\n\n![](https://dev-to-uploads.s3.amazonaws.com/i/t9eu86zynjsnq1hoh3fu.jpg)\n\n## 4. Intentional Watercooler\n\nSometimes you can have anyone can join team meetings/watercooler moments to keep your yourself close to your collegues. Remote companies don't have watercoolers, cafeterias or free gyms. To see other employees, to feel part of a company sometimes, it helps to meetup (virtually) in some zoom coffee shop background.\n\nYou could also have Basecamp (or similar) software setup to ask all the employees social questions so they can communicate amongst themselves on common interests.\n\nOlark talks about [their watercooler zoom chats](https://blog.olark.com/creating-remote-watercooler-moments)\n\n---\n\nPractice Social Distancing and Stay Safe Everyone.","src/content/blog/effective-meetings.mdx","6e587764234a93ff","event-delegation",{"id":113,"data":115,"body":123,"filePath":124,"digest":125,"deferredRender":20},{"title":116,"date":117,"tags":118,"published":20},"Event delegation - The React Way","2025-11-15T22:12:03.284Z",[119,120,121,122],"react 16","react 17","event delegation","event bubbling","This article explains how event delegation works in the React DOM. We will first define the terms and show what they do in plain JavaScript; skip ahead if you already know this part.\n\n# Event\n\nAn event is a signal sent by the browser (or your environment) to notify you that an action or behavior has occurred. You can then attach listeners to these signals so your code can react to the events.\n\nThese events fire in the browser, so their behavior depends on the browser environment rather than on native JavaScript. Fortunately, their behavior has been standardized across browsers for some time.\n\n```javascript\nconst button = document.getElementById(\"#button\");\n\n/* On which element do I listen to the event */\nbutton.addEventListener(\n  /* Type of event to listen to */\n  \"click\",\n  /* What to do when this event happens */\n  () => {},\n);\n```\n\n# Event bubbling\n\nIn the earlier example, we add a click listener to a button, which makes sense because the button is the element being clicked. But what if we want to detect clicks outside the button? For instance, a popover appears when you click the button, and you want it to disappear when you click anywhere else. You could attach an event listener to every element on the page, but that would quickly become unmanageable. Fortunately, events don't stop at the clicked elementâ€”they travel up and down the DOM tree.\n\nWhen you act on the page - say, click an element - the click event travels from the top of the window down to the target element, then back up again. The downward journey is the **Capture** phase; the upward return is the **Bubble** phase.\n\n\u003CBubblingVisualizer />\n\n## Not every event will bubble ðŸ§‹\n\nNot all events bubble. For example, the `focus` event does not bubble. This is because the focus event is only triggered on the element that is focused, and not on the elements that are descendants of the focused element.\n\nScroll events also do not bubble. This is because the scroll event is only triggered when the user scrolls the page, and not on the elements that are descendants of the scrollable element.\n\n## Bubbling phase\n\nThe bubbling phase is surely is the most used among the two phases. It is bottom-up in nature - meaning it starts from the element that is the target of the event and goes up to the root element.\n\n# Event delegation\n\nEvent delegation is a technique of listening to events on a parent element instead of the target element. This is useful when you have a lot of elements that need to listen to the same event. A direct application of the bubbling phase as you can see.\n\n\u003CPlayground\n  initialSnippet={{\n    markup: `\u003Cdiv id=\"parent\">\n  \u003Cbutton>Button 1\u003C/button>\n  \u003Cbutton>Button 2\u003C/button>\n  \u003Cbutton>Button 3\u003C/button>\n  \u003Cbutton>Button 4\u003C/button>\n  \u003Cbutton>Button 5\u003C/button>\n  \u003Cbutton>Button 6\u003C/button>\n  \u003Cbutton>Button 7\u003C/button>\n  \u003Cbutton>Button 8\u003C/button>\n  \u003Cbutton>Button 9\u003C/button>\n  \u003Cbutton>Button 10\u003C/button>\n\u003C/div>`,\n    css: ``,\n    javascript: `const parent = document.getElementById(\"parent\");\nparent.addEventListener(\"click\", (event) => {\n  alert(\"Button clicked: \" + event.target.textContent);\n  console.log(\"Event target\", event.target.textContent);\n  console.log(\"Event currentTarget\", event.currentTarget.id);\n});`,\n  }}\n  defaultEditorTab=\"javascript\"\n/>\n\n\u003Cbr />\n\n# Synthetic Events - React's Event System\n\nReact's synthetic event system is a wrapper around the browser's event system. React creates an event object for the native event and then dispatches it to the target element.\n\nWhen you listen to an event through a React element, the event object that you see is a synthetic event object. This is a wrapper around the native event object that is created by React.","src/content/blog/event-delegation.mdx","36e0e0b5eadd7d36","electrojet-cli-as-a-service",{"id":126,"data":128,"body":136,"filePath":137,"digest":138,"deferredRender":20},{"title":129,"date":130,"tags":131,"published":20},"Electrojetâ€Šâ€”â€ŠCLI as a Service","2019-01-11T22:12:03.284Z",[31,132,133,134,135],"electrojet","cli","starter kit","boilerplate","In Javascript world, we are in a chaos of CLIs, using at least two or three on a project basis. Out of the top of my head, there is `create-react-app`, `vue-cli`, `ng-cli`, `express-generator`, `feathers-generator`, `gatsby-cli` and endless possibility of JavaScript frameworks and Pokemon names. So, it is now proven a fact that very few people want to spend their time on configuring things.\n\nAll of these CLIs bring many amazing things to the table, say the UI for Vue CLI or automatic upgrades for Angular CLI. But barring some of these amazing features, we can see that most of what these CLIs do are the same things.\n\n- They copy over template files\n- They install packages\n- They initialise git repositories\n- Setup bundler, linting, prettier or any of the common configuration stuff.\n- Provides docs for extending the framework for Babel, Typescript or any other things that might come up.\n\nhttps://github.com/agneym/create-electrojet\n\nFor providing these features, CLIs do not need to be independently managed, because some of these whether dealing with paths or setting up dependencies can run across some weird cross platform inconsistencies. What if, we could take the pain out, at least for the upcoming frameworks to build prototyping/production frameworks with a CLI already made for them. That is what Electrojet intends to be.\n\n## How is it better for the users?\n\n- No need to install/download a new CLI for every framework you want to try, you can have Electrojet good to go.\n- Electrojet brings with it a plugin based system where you can add your favourite dependencies as plugins to a configuration file. You can use the same config across frameworks and projects.\n- It can bring in both default technologies for projects and projects from github repositories, meaning you can create starters yourself.\n\n## How is it better for package authors?\n\n- No need to maintain, issues, pull requests for a CLI yourself\n- Lesser docs for adding new technologies, as it can be covered by Electrojet\n- The ecosystem will have readymade core packages and plugins that you can add to your custom CLI package such that you have an easier time upgrading.\n\n## How do I get it?\n\nCut to the chase:\n\n```bash\nnpm init electrojet \u003Cproject-name>\n```\n\nThe CLI will guide you through a list of templates or an option to bring your own starter. More options available the docs.\n\nCurrently, we have [Phaser-CE](https://github.com/photonstorm/phaser-ce), [Electron](https://electronjs.org/), [Carlo](https://github.com/GoogleChromeLabs/carlo/), [SvelteJS](https://svelte.technology/) in the list of options and are looking to expand. Here is how you can [help](https://github.com/agneym/create-electrojet#how-do-i-build-a-cli-for-my-favorite-technology).\n\n## How can I add \\***\\*\\_\\_\\*\\*** ?\n\nThis seems like the big question, so big that major CLIs have pages of frameworks regarding adding different things to the generated application. Electrojet Ecosystem comes with its list of plugins that you can add to the system. Adding SASS to your application can be as simple as updating `electrojet.config.js` as:\n\n```js\nconst sass = require(\"@electrojet/sass\");\nmodule.exports = {\n  plugins: [\n    {\n      resolve: sass,\n    },\n  ],\n};\n```\n\n## How do I eject?\n\n_Or, how do I look at all the generated code and wonder what to do?_\n\nUsing Electrojet, there is no eject step. We give you plugins and starters out of box, but if we you have grown to a point when you donâ€™t want any of those, you are free to add your own `webpack.config.js`. Yes, that is all that it takes, add your own Webpack config to the root of the application and you are good to go.\n\n## Can I use other stuff that does not use Electrojet Ecosystem?\n\nSure, the whole plan with Electrojet is to be adaptive to different frameworks. Just because you choose not to extend `@electrojet/core` does not mean you cannot use the CLI.\n\nUse the option:\n\n```bash\nnpm init electrojet --starter=\u003CGithubUserName>/\u003CRepoName>\n```\n\nIt downloads the github repository and initialises things for you.\n\n## How can I help?\n\nThe ecosystem can use bugfixes, better documentation, plugins, more ecosystems and starters.\n\nThe repository has features, bug fixes and enhancements ready to be coded.\n\nYou can help out at the repo and also, build and host things independently.\n\nhttps://github.com/agneym/create-electrojet","src/content/blog/electrojet-cli-as-a-service.mdx","0f8af82ea6f8fe54","everyone-full-stack",{"id":139,"data":141,"body":145,"filePath":146,"digest":147,"deferredRender":20},{"title":142,"date":143,"tags":144,"published":20},"Everyone is a full stack developer","2020-06-22T22:12:03.284Z",[],"With the rise of JavaScript as a viable option on both frontend and backend, there has been a steady increase in the number of people who claim to be full stack developers. In fact, everyone resume you find could be of a full stack developer (not to mention 10x developers). This claim usually means one of three things:\n\n1. They are frontend developers.\n2. They are backend developers.\n3. They are neither.\n\nHow do we tell who is who and find needle from the haystack?\n\n## A Task to differentiate\n\n1. There is a list of products, when you click on a product more detail is shown in a modal window.\n   - Backend developer is the person who has the box open with product details\n   - Frontend developer is the person who has set the focus to the modal box and changed the URL to reflect page change.\n\n2. Change profile picture of user\n   - Frontend developer is the person who deletes the old profile picture, uploads new one and busts the cache.\n   - Backend developer is the person who uploads the new image with a new hash and pushes the deleting part to a low priority queue.\n\nThe frontend developer is concerned with how fast the user gets the job done versus the backend developer is concerned with how fast the server responds. Both of the people gets the job done. Both of them are right on their own concerns as well.\n\n### Are you saying frontend developer isn't concerned about speed?\n\nFar from it. The frontend developer likes a 60FPS animation for sure. But if it takes three steps to get to the point where your 60FPS animation is, it's probably not worth it.\n\n> Getting things done in 40FPS in one step > 3 steps in 60FPS\n\nAs [MDN says](https://developer.mozilla.org/en-US/docs/Learn/Performance/perceived_performance),\n\n> Perceived performance is how fast a website seems to the user. How a user perceives your performance is as important, or perhaps **more important**, than any objective statistic, but it's subjective, and not as readily measurable. Perceived performance is user perspective, not a metric.\n\n### Backend developer can leave some parts of UI out of date?\n\nWhen the backend developer is concerned with the output being out fastest possible it is possible that stats in some parts of the application are updating way slower than you thought they would.\n\nYou would find some users complaining about it as well, but that is nowhere close to the number of users would complain if the response takes a second more. But far worse is the fact that users who have found your application too slow would leave before they complain about it, while some parts of the application not updating is a bug that people complain about, application being too slow just gets in the way of getting the job done.\n\n## In Retrospect\n\nIt's okay to be good at one thing.\n\nPS: I'm not assuming that this is some crime committed by interview candidates. It's probably because companies are setting the wrong expectations from their candidates. If you want a guy who can do Java Spring, Python Machine Learning, some docker, kubernetes, penetration testing, Cypress, Selenium, React, Angular, AngularJS, BackboneJS, AWS, Azure and Google Cloud, you are looking for **an engineering department**.","src/content/blog/everyone-full-stack.mdx","d2fe788b5e01e914","fastestgoogle-fonts",{"id":148,"data":150,"body":155,"filePath":156,"digest":157,"deferredRender":20},{"title":151,"date":152,"tags":153,"published":20},"Fastest way to Google Fonts","2020-05-26T22:12:03.284Z",[154],"google fonts","Harry Roberts writes about fastest ways of loading Google fonts on [his blog](https://csswizardry.com/2020/05/the-fastest-google-fonts/):\n\n> Itâ€™s widely accepted that self-hosted fonts are the fastest option: same origin means reduced network negotiation, predictable URLs mean we can preload, self-hosted means we can set our own cache-control directives, and full ownership mitigates the risks that come with leaving static assets on third-party origins.\n\n> That said, the convenience of a service like Google Fonts cannot be overstated. Their ability to serve the tiniest possible font files tailored to specific user agents and platforms is amazing, and with such a huge, freely-available library served from Google-grade CDNsâ€¦ I definitely see why people continue to turn to it.\n\nWell, yes. Self hosting fonts is a pain. Can we make it a little faster with the CDN?\n\nHarry dives into a private instance of Webpage test and marks the performance metrics for each attribute that can be used. Here is what he ends up doing:\n\n```html\n\u003C!--\n  - 1. Preemptively warm up the fontsâ€™ origin.\n  -\n  - 2. Initiate a high-priority, asynchronous fetch for the CSS file. Works in\n  -    most modern browsers.\n  -\n  - 3. Initiate a low-priority, asynchronous fetch that gets applied to the page\n  -    only after itâ€™s arrived. Works in all browsers with JavaScript enabled.\n  -\n  - 4. In the unlikely event that a visitor has intentionally disabled\n  -    JavaScript, fall back to the original method. The good news is that,\n  -    although this is a render-blocking request, it can still make use of the\n  -    preconnect which makes it marginally faster than the default.\n  -->\n\n\u003C!-- [1] -->\n\u003Clink rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin />\n\n\u003C!-- [2] -->\n\u003Clink rel=\"preload\" as=\"style\" href=\"$CSS&display=swap\" />\n\n\u003C!-- [3] -->\n\u003Clink\n  rel=\"stylesheet\"\n  href=\"$CSS&display=swap\"\n  media=\"print\"\n  onload=\"this.media='all'\"\n/>\n\n\u003C!-- [4] -->\n\u003Cnoscript>\n  \u003Clink rel=\"stylesheet\" href=\"$CSS&display=swap\" />\n\u003C/noscript>\n```\n\nWe can find a sample to this on [Harry's site](https://harry.is/):\n\n```html\n\u003C!-- [1] -->\n\u003Clink rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin=\"\" />\n\n\u003C!-- [2] -->\n\u003Clink\n  rel=\"preload\"\n  as=\"style\"\n  href=\"https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,900;1,900&amp;family=Roboto:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap\"\n/>\n\n\u003C!-- [3] -->\n\u003Clink\n  rel=\"stylesheet\"\n  href=\"https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,900;1,900&amp;family=Roboto:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap\"\n  media=\"all\"\n  onload=\"this.media='all'\"\n/>\n```\n\nOn to the fast lane! ðŸ‘ðŸ‘","src/content/blog/fastest.google-fonts.mdx","feb8e8a902b0bbbc","grid-blowout",{"id":158,"data":160,"body":168,"filePath":169,"digest":170,"deferredRender":20},{"title":161,"date":162,"tags":163,"published":20},"TIL - Grid Blowout","2020-03-01T22:12:03.284Z",[164,165,166,167],"css grid","widths wrong","width expanding beyond","1fr","Today I learned that there is a thing named _Grid Blowout_. It's not as bad as sounds though.\n\nOne fine day, I had a normal grid going and things were going great.\n\n\u003CPlayground\n  initialSnippet={{\n    markup: `\n\u003Cdiv class=\"container\">\n  \u003Cdiv>\n    \u003Cdiv class=\"text\">\n      Lorem ipsum, dolor sit amet consectetur adipisicing elit. Laboriosam id\n      corporis eligendi voluptates aliquam voluptas voluptate, libero soluta non\n      repellendus reiciendis, inventore vero minima beatae? Quibusdam placeat\n      veniam alias corrupti.\n    \u003C/div>\n  \u003C/div>\n  \u003Cdiv>\u003C/div>\n\u003C/div>`,\n    css: `body {\n  background-color: white;\n}\n.container{\ndisplay: grid;\ngrid-template-columns: repeat(2, 1fr);\nheight: 100vh;\ngrid-gap: 10px;\n}\n.container>div{\nborder: 1px solid purple;\n}`,\n    javascript: ``,\n  }}\n  defaultEditorTab=\"css\"\n/>\n\nThen the requirements changed and text had to be on a single line with ellipsis as it's tail. I mean why not, just three lines or so.\n\n\u003CPlayground\n  initialSnippet={{\n    markup: `\n\u003Cdiv class=\"container\">\n  \u003Cdiv>\n    \u003Cdiv class=\"text\">\n      Lorem ipsum, dolor sit amet consectetur adipisicing elit. Laboriosam id\n      corporis eligendi voluptates aliquam voluptas voluptate, libero soluta non\n      repellendus reiciendis, inventore vero minima beatae? Quibusdam placeat\n      veniam alias corrupti.\n    \u003C/div>\n  \u003C/div>\n  \u003Cdiv>\u003C/div>\n\u003C/div>`,\n    css: `body {\n  background-color: white;\n}\n.container {\ndisplay: grid;\ngrid-template-columns: repeat(2, 1fr);\nheight: 100vh;\ngrid-gap: 10px;\n}\n.container>div {\nborder: 1px solid purple;\n}\n.text {\ntext-overflow: ellipsis;\nwhite-space: nowrap;\noverflow: hidden;\n}`,\n    javascript: ``,\n  }}\n  defaultEditorTab=\"css\"\n/>\n\n**oh! no ðŸ˜±** `1fr` isn't one fraction of the left space, any more. and the grid wasn't reacting to any changes I did to give it a `max-width`.\n\nAfter two-three google searches with the words CSS Grid and width, I arrived on Chris Coyier's article on CSS Tricks that discussed the subject: [Preventing a Grid Blowout](https://css-tricks.com/preventing-a-grid-blowout/).\n\nThe solution offered was simple, use `minmax(0, 1fr)` instead of just `1fr` for spacing.\n\n\u003CPlayground\n  initialSnippet={{\n    markup: `\n\u003Cdiv class=\"container\">\n  \u003Cdiv>\n    \u003Cdiv class=\"text\">\n      Lorem ipsum, dolor sit amet consectetur adipisicing elit. Laboriosam id\n      corporis eligendi voluptates aliquam voluptas voluptate, libero soluta non\n      repellendus reiciendis, inventore vero minima beatae? Quibusdam placeat\n      veniam alias corrupti.\n    \u003C/div>\n  \u003C/div>\n  \u003Cdiv>\u003C/div>\n\u003C/div>`,\n    css: `body {\n  background-color: white;\n}\n.container {\ndisplay: grid;\ngrid-template-columns: repeat(2, minmax(0, 1fr));\nheight: 100vh;\ngrid-gap: 10px;\n}\n.container>div {\nborder: 1px solid purple;\n}\n.text {\ntext-overflow: ellipsis;\nwhite-space: nowrap;\noverflow: hidden;\n}`,\n    javascript: ``,\n  }}\n  defaultEditorTab=\"css\"\n/>\n\nChris explained that:\n\n> the minimum width of a grid column is auto.\n\nwhich did not make much sense to me, so I went into the spec (like all normal people) looking for answers.\n\nAfter some time, here is what I found:\n\n> When appearing outside a minmax() notation, implies an automatic minimum (i.e. minmax(auto, flex)).\n\nSo, without a `minmax` notation surrounding it a grid-item would take up the minimum space that it's content would have and then expand to `1fr`. I did not find anything pertaining to why this was so in the original spec, but coming back to the article, I found a Rachel Andrew comment:\n\n> Grid then looks at the min-content size of the item. If the item has a size (youâ€™ve given it a width) or has something in it with a size such as an image, the min-content size might be much bigger than the share of available space you think 1fr will give you. Itâ€™s easy to think of 1fr as being â€œone part of the space in the grid containerâ€ when it is really one part of the space left over. If there is space to grow then the tracks grow from that min-content size assigning space.\n\nThere is so much grid to be learned and to realise we haven't scratched the surface of what's possible.","src/content/blog/grid-blowout.mdx","0b7c6f95ee1e2cfa","fast-dark-mode",{"id":171,"data":173,"body":181,"filePath":182,"digest":183,"deferredRender":20},{"title":174,"date":175,"tags":176,"published":20},"Fast Track to Dark Mode with Styled Components","2020-02-25T22:12:03.284Z",[177,178,179,180,31],"dark mode","styled components","how to","reactjs","This post describes a fast track to dark mode with Styled Components and a couple of other packages which is currently implemented on this blog.\n\nNote that we will not be discussing the implications or concept behind dark mode, there are enough articles on the web that do that already. Let's get straight to business.\n\nWe will start with [a ReactJS hook for dark mode](https://github.com/donavon/use-dark-mode). We will also add in the gatsby plugin that helps prevent flashing on load for the same hook.\n\n```bash\nnpm i use-dark-mode gatsby-plugin-use-dark-mode\n```\n\nNow, we need a button to change the mode, we could add any button but let's get the pre-made beautiful SVG button:\n\n```bash\nnpm i react-dark-mode-toggle\n```\n\n\u003Cimg\n  src={`https://github.com/cawfree/react-dark-mode-toggle/raw/master/assets/title.gif`}\n  alt=\"button demo\"\n  width=\"50%\"\n  style={{ margin: \"2rem 0\" }}\n/>\n\nLet's split our theme to colors and others:\n\n```javascript\nconst darkColors = {\n  background: `#121212`,\n  textColor: `rgba(255, 255, 255, 0.85)`,\n}\nconst lightColors = {\n  background: `#FFFFFF`,\n  textColor: `rgba(0, 0, 0, 0.8)`,\n}\nconst theme = {\n  other: {},\n}\nexport default getTheme(mode) {\n  return {\n    ...theme,\n    colors: mode === 'light' ? lightColors : darkColors,\n  }\n}\n```\n\n[Guide to using `ThemeProvider` in docs](https://styled-components.com/docs/advanced#theming)\n\nNow, let's wire the button and the hook together:\n\n```javascript\nfunction Layout({ children }) {\n  const darkMode = useDarkMode(false);\n  const theme = getTheme(darkMode.value ? \"dark\" : \"light\");\n  return (\n    \u003C>\n      \u003Cheader>\n        \u003CDarkModeToggle\n          onChange={darkMode.toggle}\n          checked={darkMode.value}\n          size={50}\n        />\n      \u003C/header>\n      {children}\n    \u003C/>\n  );\n}\n\nexport default App;\n```\n\nand that's it! We have dark mode. You might have to adjust some other variables for hover styles and others, but this is a great start.\n\nBonus: Global Styles:\n\n```javascript\nconst GlobalStyles = createGlobalStyle`\n  body {\n    color: ${(props) => props.theme.colors.textColor};\n    background-color: ${(props) => props.theme.colors.background};\n  }\n  body.dark-mode {\n    img:not([src*=\".svg\"]) {\n      filter: grayscale(50%);\n    }\n  }\n`;\n\nexport default GlobalStyles;\n```","src/content/blog/fast-dark-mode.mdx","50353897d63f7a4b","font-awesome-pseudo-elements",{"id":184,"data":186,"body":194,"filePath":195,"digest":196,"deferredRender":20},{"title":187,"date":188,"tags":189,"published":20},"Font Awesome Icons with Pseudo-Elements","2019-09-09T22:12:03.284Z",[31,190,191,192,193],"font-awesome","pseudo elements","before","after","Font Awesome's fifth iteration is huge with the company finally moving to SVG icons from their flagship icon fonts.\n\nWith this change, the company has also published packages like [`react-fontawesome`](https://www.npmjs.com/package/@fortawesome/react-fontawesome) and [`@fortawesome/fontawesome-svg-core`](https://fontawesome.com/how-to-use/on-the-web/advanced/svg-javascript-core).\n\nThis is great for the consumer, because we no longer have to ship the complete icon font. SVG imports with Package managers like Webpack and Parcel ensure that only the icons we use are present in the bundle.\n\nBut lots of earlier code would depend on pseudo elements, sort off like this:\n\n```html\n\u003Cbutton class=\"button\">Thing\u003C/button>\n```\n\n```css\n.button {\n  width: 100%;\n  padding-left: 4rem;\n}\n.button::before {\n  content: \"\\f7e5\";\n  font-family: \"Font-Awesome\";\n}\n```\n\nFor comparison, here is how you render an SVG icon when rendering with React FontAwesome library and SVG Core:\n\n```javascript\nconst element = \u003CFontAwesomeIcon icon={faCoffee} />;\n\nReactDOM.render(element, document.body);\n```\n\nSo, how do we migrate the psuedo element code to the React one? _There is no easy answer_ to that and it involves some markup changes.\n\nFirst, we have to introduce the icon into the markup.\n\n```javascript\nfunction App() {\n  return (\n    \u003Cbutton className=\"button\">\n      \u003CFontAwesomeIcon icon={faCoffee} className=\"icon\" />\n      \u003Cspan className=\"button-text\">Text\u003C/span>\n    \u003C/button>\n  );\n}\n\nReactDOM.render(\u003CApp />, document.body);\n```\n\nNow, you can change the css to:\n\n```css\n.button {\n  width: 100%;\n  padding-left: 4rem;\n}\n.icon {\n  // whatever styles you want the color to take.\n  color: red;\n}\n```\n\n> There could be more complicated cases, refer to this [PR on BuffetJS](https://github.com/strapi/buffet/pull/41/files) to see more cases.\n\n### Bonus: How does the SVG change color when you apply `color` to it's parent class?\n\nIf you inspect the fontawesome SVGs, you will find their `path` elements have an attribute in common:\n\n```html\n\u003Cpath fill=\"currentColor\" ...>\u003C/path>\n```\n\nRead more on the trick at [CSS Tricks](https://css-tricks.com/cascading-svg-fill-color/)","src/content/blog/font-awesome-pseudo-elements.mdx","7444bba8c3caa2bb","hooks-of-react-router",{"id":197,"data":199,"body":207,"filePath":208,"digest":209,"deferredRender":20},{"title":200,"date":201,"tags":202,"published":20},"Hooks of React Router","2020-01-18T22:12:03.284Z",[203,204,205,206],"hooks","react-router","useRouteMatch","useParams","React Router 5 embraces the power of [hooks](https://reactjs.org/docs/hooks-intro.html) and has introduces four different hooks to help with your routing.\n\nBut before we look at hooks themselves, we have to look at a new pattern that the `Route` component exposes and how this changes things.\n\n_Before_:\n\n```javascript\n// When you wanted to render the route and get router props for component\n\u003CRoute path=\"/\" component={Home} />\n// Or when you wanted to pass extra props\n\u003CRoute path=\"/\" render={({ match }) => \u003CProfile match={match} mine={true} />}>\n```\n\nWhen using the `component` syntax, route props (match, location and history) are implicitly being passed on to the component. But it has to be changed to `render` once you have extra props to pass to the component. Note that adding a function to the `component` syntax would lead to the component re-mounting on every render.\n\n_After_:\n\n```javascript\n\u003CRoute path=\"/\">\n  \u003CHome />\n\u003C/Route>\n```\n\nNote that there is no implicit passing of any props to the `Home` component. But without changing anything with the `Route` itself, you can add any extra props to the `Home` component. You can no longer make the mistake of re-mounting the component on every render and that's the best kind of APIs.\n\nBut now that implicit passing of route props is not there, how do we access `match`, `history` or `location`? Do we have to wrap all components with `withRouter`? That is where the hooks steps in.\n\n> Note that hooks were introduced in 16.8 version of React, so you need to be above that version to use them.\n\n## `useHistory`\n\n- Provides access to the `history` prop in React Router\n- Refers to [history package](https://github.com/ReactTraining/history) dependency that the router uses\n- Primary use case would be for programmatic routing with functions like `push`, `replace` etc\n\n```javascript\nfunction Home() {\n  const history = useHistory();\n  return \u003Cbutton onClick={() => history.push(\"/profile\")}>Profile\u003C/button>;\n}\n```\n\n## `useLocation`\n\n- Provides access to the `location` prop in React Router\n- It is similar to the `window.location` in the browser itself, but this is accessible everywhere as it represents the Router state and location.\n- Primary use case for this would be to access the query params or the complete route string.\n\n```javascript\nfunction Profile() {\n  const location = useLocation();\n  useEffect(() => {\n    const currentPath = location.pathname;\n    const searchParams = new URLSearchParams(location.search);\n  }, [location]);\n  return \u003Cp>Profile\u003C/p>;\n}\n```\n\n> Since location property is immutable, the `useEffect` will call the function everytime the route changes, making it perfect to operate on search parameters or current path.\n\n## `useParams`\n\n- Provides access to search parameters in the URL.\n- This was possible earlier only using `match.params`\n\n```javascript\nfunction Profile() {\n  const { name } = useParams();\n  return \u003Cp>{name}'s Profile\u003C/p>;\n}\n\nfunction Dashboard() {\n  return (\n    \u003C>\n      \u003Cnav>\n        \u003CLink to={`/profile/ann`}>Ann's Profile\u003C/Link>\n      \u003C/nav>\n      \u003Cmain>\n        \u003CRoute path=\"/profile/:name\">\n          \u003CProfile />\n        \u003C/Route>\n      \u003C/main>\n    \u003C/>\n  );\n}\n```\n\n## `useRouteMatch`\n\n- Provides access to the [match](https://reacttraining.com/react-router/web/api/match) object.\n- If provided with no arguments, it returns the closest match in the component or it's parents.\n- Primary use case would be to construct nested paths.\n\n```javascript\nfunction Auth() {\n  const match = useRouteMatch();\n  return (\n    \u003C>\n      \u003CRoute path={`${match.url}/login`}>\n        \u003CLogin />\n      \u003C/Route>\n      \u003CRoute path={`${match.url}/register`}>\n        \u003CRegister />\n      \u003C/Route>\n    \u003C/>\n  );\n}\n```\n\nYou can also use `useRouteMatch` to access a match without rendering a `Route`, this is done by passing it the location argument.\n\nFor example, consider that you need your own profile to be rendered at `/profile` and somebody else's profile if the URL contains the name of the person `/profile/dan` or `/profile/ann`. Without using the hook, you would either write a [`Switch`](https://reacttraining.com/react-router/web/api/Switch) and list down both routes and customise them with props, now using the hook:\n\n```javascript\nimport {\n  Route,\n  BrowserRouter as Router,\n  Link,\n  useRouteMatch,\n} from \"react-router-dom\";\n\nfunction Profile() {\n  const match = useRouteMatch(\"/profile/:name\");\n\n  return match ? \u003Cp>{match.params.name}'s Profile\u003C/p> : \u003Cp>My own profile\u003C/p>;\n}\n\nexport default function App() {\n  return (\n    \u003CRouter>\n      \u003Cnav>\n        \u003CLink to=\"/profile\">My Profile\u003C/Link>\n        \u003Cbr />\n        \u003CLink to={`/profile/ann`}>Ann's Profile\u003C/Link>\n      \u003C/nav>\n      \u003CRoute path=\"/profile\">\n        \u003CProfile />\n      \u003C/Route>\n    \u003C/Router>\n  );\n}\n```\n\n> You can also use all the props on `Route` like `exact` or `sensitive` as an object with `useRouteMatch`.\n\n---\n\nUsing the hooks and the technique we mentioned in the beginning with `Route` would make it much easier to upgrade to new versions of React Router.","src/content/blog/hooks-of-react-router.mdx","8faac531a5baa270","hooks-why-is-my-state-not-getting-updated",{"id":210,"data":212,"body":218,"filePath":219,"digest":220,"deferredRender":20},{"title":213,"date":214,"tags":215,"published":20},"Why is my state not getting updated - Hooks version","2019-10-18T22:12:03.284Z",[96,31,216,217,203],"state","not getting updated","Probably because you are using it wrong.\n\n> Find class based version [here](/blog/why-is-my-state-not-getting-updated/)\n\n```js\nconst [value, setValue] = useState(\"\");\nfunction handleChange(newValue) {\n  setValue(newValue);\n  console.log(value);\n}\n```\n\nWhy is your state not getting updated?\n\nStraight out of [React docs](https://reactjs.org/docs/state-and-lifecycle.html#state-updates-may-be-asynchronous), `setState` may be asynchronous. What does that mean?\n\nLetâ€™s find out.\n\n```js\nsetTimeout(() => console.log(\"foo\"), 0);\nconsole.log(\"bar\");\n```\n\nWhat is the output?\n\nFirst the second `console.log` fires and then the first one inside the `setTimeout` function. This happens because `setTimeout` is asynchronous and is moved to the browser thread. So the code that runs after `setTimeout` gets executed however small the timeout is.\n\nSame is the case with `setState` Because of itâ€™s asynchronous state, the statement after is being called before the actual `setState` function.\n\n---\n\n# How do we fix this?\n\nReact calls the functional component once again whenever the state is updated. Hence, to see the updated state, just look in the render.\n\n```js\nfunction App() {\n  const [value, setValue] = useState(\"\");\n  function handleChange(newValue) {\n    setValue(newValue);\n  }\n  console.log(value);\n  ...\n}\n```\n\nBut in real world react components, there would be multiple states (and props) and this would trigger the `console.log` every time any one of these is updated. Instead, a more effective approach would be:\n\n```js\nfunction App() {\n  const [value, setValue] = useState(\"\");\n  useEffect(() => {\n    console.log(value);\n  }, [value]);\n  function handleChange(newValue) {\n    setValue(newValue);\n  }\n  ...\n}\n```\n\nNote that the `useEffect` has the required state as dependency and thus would run whenever it is changed.","src/content/blog/hooks-why-is-my-state-not-getting-updated.mdx","b39667a60b6363ac","immutable-array-operations",{"id":221,"data":223,"body":230,"filePath":231,"digest":232,"deferredRender":20},{"title":224,"date":225,"tags":226,"published":20},"Immutable Array Operations - JavaScript","2019-10-05T22:12:03.284Z",[227,31,228,229],"immutable array operations","without changing original array","svelte","[Svelte JS](https://svelte.dev/) documentation reads:\n\n> Because Svelte's reactivity is triggered by assignments, using array methods like push and splice won't automatically cause updates. For example, clicking the button doesn't do anything.\n\nIt further goes on to replace the push operation with:\n\n```js\nfunction addNumber(newNum) {\n  numbers = [...numbers, newNum];\n}\n```\n\ncalling it the _idiomatic_ way.\n\nThen it says,\n\n> You can use similar patterns to replace pop, shift, unshift and splice.\n\nLet's see.\n\n## 1. Unshift\n\nThis is the polar opposite of the push we saw in Svelte docs.\n\n> Adds one or more elements to the beginning of an array and returns the new length of the array.\n\nSimply reverse it:\n\n```js\nfunction addNumber(newNum) {\n  numbers = [newNum, ...numbers];\n}\n```\n\n## 2. Pop\n\n> removes the last element from an array and returns that element. This method changes the length of the array.\n\nFirst, we have to remove the last element without mutating the array. We know [slice](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/slice) returns a copy of the array given start and end indices.\n\n```js\nfunction removeNumber() {\n  numbers = [...numbers.slice(0, numbers.length - 1)];\n}\n```\n\n## 3. Shift\n\n> removes the first element from an array and returns that removed element. This method changes the length of the array.\n\nRemove first element without mutating the array. `slice` to the rescue again.\n\n```js\nfunction removeNumber() {\n  numbers = [...numbers.slice(1)];\n}\n```\n\nLet's try out few of other conditions where we can apply the same:\n\n## 4. Splice\n\n> changes the contents of an array by removing or replacing existing elements and/or adding new elements\n\nThat's few things, let's break them down:\n\n1. Deletes items starting at an index\n\n```js\nfunction removeNumbers(index, numberOfItems) {\n  numbers = [\n    ...numbers.slice(0, index),\n    ...numbers.slice(index + numberOfItems),\n  ];\n}\n```\n\n2. Inserts item at given index\n\n```js\nfunction insertNumber(index, newNumber) {\n  numbers = [...numbers.slice(0, index), newNumber, ...numbers.slice(index)];\n}\n```\n\n3. Inserts items at a given index.\n\nNotice the plural.\n\n```js\nfunction insertNumbers(index, ...rest) {\n  numbers = [...numbers.slice(0, index), ...rest, ...numbers.slice(index)];\n}\n```\n\n** Double Bonus ðŸŽ‰ðŸŽ‰: **\n\n### Remove item based on a condition:\n\n```js\nfunction removeItem() {\n  numbers = numbers.filter((num) => num > 5);\n}\n```\n\n### Change all items in the array:\n\n```js\nfunction multiplyArray() {\n  numbers = numbers.map((num) => num * 2);\n}\n```\n\nAnything more complicated, [Array reduce](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce) is your friend.\n\nHappy immutability.","src/content/blog/immutable-array-operations.mdx","fecd5a98b438f1b4","introducing-playground",{"id":233,"data":235,"body":242,"filePath":243,"digest":244,"deferredRender":20},{"title":236,"date":237,"tags":238,"published":20},"Introducing Playground - A Frontend Demonstration Component","2019-11-20T22:10:27.284Z",[180,239,240,241],"playground","demo","component","[Playground](https://github.com/agneym/playground) is a React Component that can be used for demonstrating HTML, CSS and JavaScript code.\n\n\u003CPlayground\n  initialSnippet={{\n    markup: `\u003Cdiv id=app />`,\n    css: `h1 {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    text-align: center;\n    color: dodgerblue;\n    }`,\n    javascript: `import { h, Component, render } from 'preact';\nconst html = htm.bind(h);\n \nconst app = html\\`\u003Ch1>Hello World from Playground!\u003C/h1>\\`\nrender(app, document.getElementById('app'));`,\n  }}\n  defaultEditorTab=\"javascript\"\n  transformJs\n/>\n\n## Features\n\n1. Allows bare ES package imports. This means you can add imports for any library that supports ES Module resolution and playground will automatically load it into your code.\n1. Load preview for predefined code.\n1. Autoreloading preview.\n1. See console output in the component itself.\n1. Control tab loaded by default for your use-case.\n\n### How does module imports work?\n\nIf an NPM package exposes an endpoint for \"module\", then you can direcly import this package by it's name.\n\n```js\nformat(new Date(2014, 1, 11), \"yyyy-MM-dd\");\n```\n\nUnfortunately, not all packages currently support this feature. You can search through an entire list of packages through [pika.dev](https://pika.dev).\n\nYou can use community created packages to replicate the functionality. For eg. React would be:\n\n```js\nReactDOM.render(\n  createElement(\"div\", {}, \"Hello World\"),\n  document.getElementById(\"app\"),\n);\n```\n\n[See Complete Documentation](https://github.com/agneym/playground)","src/content/blog/introducing-playground.mdx","23495a6bc41bab46","ir-imperative-toast",{"id":245,"data":247,"body":254,"filePath":255,"digest":256,"deferredRender":20},{"title":248,"date":249,"tags":250,"published":20},"Toast with Ionic React","2020-03-28T22:12:03.284Z",[251,96,252,253],"ionic","toast","ionic-react","A toast notification is a long standing custom in mobile application used to notify the user of something happening within the system. Sometimes it even has buttons for interaction.\n\n![Toast GIFc](https://www.hkinfosoft.com/wp-content/uploads/2019/05/toast.gif)\n\nHere is how to use one (straight from the docs):\n\n```typescript\nfunction ToastExample: FC = () => {\n  const [showToast, setShowToast] = useState(false);\n  return (\n    \u003CIonToast\n      isOpen={showToast}\n      onDidDismiss={() => setShowToast(false)}\n      message=\"Your settings have been saved.\"\n      duration={200}\n    />\n  )\n}\n```\n\nWell, this is easy ðŸ˜I can do that.\n\nBut I normally thinks of toasts more imperatively than this. It might be because of libraries like `react-toast` or `ant.design` who have these imperative toast messaging systems, or it could even be that Ionic's own Angular part of design has an imperative toast.\n\nAlso, if I needed to a success toast and an error toast, I would need multiple `IonToast` components rendered or have states definining toast state.\n\nIn Angular Ionic, you would:\n\n```typescript\nconst toast = this.toastController.create({\n  message: \"\",\n});\ntoast.present();\n```\n\nThat's pretty cool ðŸ˜Ž. What if we could do this?\n\nWe could utilise a [React Context](https://reactjs.org/docs/context.html) and a hook to achieve this functionality at with ease. I wrote out a custom package which does exactly that.\n\n```typescript\n// Wrap you App.tsx with ToastProvider\nconst App: FC = () => {\n  \u003CIonApp>\n    \u003CToastProvider>\n      // ...rest of your application\n    \u003C/ToastProvider>\n  \u003C/IonApp>\n}\n\n// In your component\nconst RegisterForm: FC () => {\n  const Toast = useToast();\n  // ...\n\n  function validate() {\n    const toast = Toast.warning('Passwords don\\'t match');\n  }\n\n  function submit(data) {\n    try {\n      const response = await api.register(data);\n      Toast.success('Registration Successful');\n    } catch() {\n      Toast.error('Request failed');\n    }\n  }\n}\n```\n\nThis allows you have to have error messages with a one liner:\n\n```\nToast.error('Error message');\n```\n\nThe `ToastProvider` also takes a `value` property that allows you to define defaults for all toasts created in it's children.\n\nThe package also enables creating toast messages with the same Angular API as:\n\n```typescript\nfunction Component: FC = () => {\n  const Toast = useToast();\n\n  const handleClick = () => {\n    const toast = Toast.create({ message: 'thing' });\n    toast.present();\n    // When you want to.\n    toast.dismiss();\n    ...\n  }\n\n  // ...\n}\n```\n\nTo install the package:\n\n```bash\nnpm i @agney/ir-toast\n```\n\nNote that it has a dependency on both React and Ionic React.\n\n[Github for Full Source](https://github.com/agneym/ir-toast)","src/content/blog/ir-imperative-toast.mdx","a7a70d884c77a6ba","link-to-text",{"id":257,"data":259,"body":269,"filePath":270,"digest":271,"deferredRender":20},{"title":260,"date":261,"tags":262,"published":20},"Link to any text with Bookmarklet","2020-06-11T22:12:03.284Z",[263,264,265,266,267,268],"chrome","scroll","text","highlight","edge","google","If you are using Chrome or the new Edge browser, you might have noticed that opening a page from Google Search highlights and scrolls to the text that had your search query.\n\n![Rick and Morty Suace details at McDonalds highlighted on a CNN page](https://dev-to-uploads.s3.amazonaws.com/i/dbs0gergcmdug95gra4a.png)\n\nThe magic âœ¨ here is in the URL.\n\n> https://www.cnet.com/news/rick-and-morty-szechuan-sauce-is-coming-back-but-theres-a-catch/#:~:text=Rick%20and%20Morty%20fans%2C%20maybe,Adult%20Swim%20comedy%20in%202017.\n\nThe `#:~:text=` part of the URL is the part of a [new text fragment specification](https://github.com/WICG/scroll-to-text-fragment). It's currently supported in Chrome, Opera and Edge.\n\nIt's mostly useful for search engines to directly link to and highlight text (which might explain why the Chromium browsers have it) but it can also be used by anyone.\n\nThere is a lot to unravel from the spec, but let us look at the simplest URL fragment:\n\n```\nURL/#:~:text=some-text\n```\n\nHere `#:~:` is the part that seperates the text fragment from rest of the URL. `text=` would be the query parameter indicating that it is text that is to be scrolled to, it's value indicates the text.\n\nHow can we use this knowledge to scroll to a content using JavaScript?\n\n```javascript\n// We use getSelection to get string version of text\nconst text = window.getSelection().toString();\n\n// We add the text to current URL and URL encode the text\nconst newUrl = window.location.href + \"#:~:text=\" + c;\nconsole.log(newUrl);\n```\n\nThis makes it very easy to implement it on your blog or website, but how do we create links to other people's pages?\n\nHere is a bookmarklet to help:\n\n```\njavascript:(function()%7Bwindow.location%20%3D%20window.location.href%20%2B%20%22%23%3A~%3Atext%3D%22%20%2B%20encodeURIComponent(window.getSelection().toString())%7D)()\n```\n\nYou can copy the above text and add a bookmark in your browser with this as URL. Next time you click on the bookmark with text selected, you will have the URL with text ready.\n\nAdding a bookmarklet to Chrome:\n![Alt Text](https://dev-to-uploads.s3.amazonaws.com/i/3d0jkvwizmsx8hyzmfse.gif)\n\nUsing the Bookmarket:\n![Alt Text](https://dev-to-uploads.s3.amazonaws.com/i/tqewr7i29xguw89l8wtz.gif)\n\nThere are lots of restrictions to this that you can find on the spec. But an important one being that you can only link to complete words (for some reason), so if you have a half of a word, won't work.\n\nThere more to the spec like adding context, and specifying start and end text, I suggest you read through if Mozilla implements it or if you are just bored.\n\nHave fun ðŸ˜","src/content/blog/link-to-text.mdx","4e35e4d1da8f515b","js-playground",{"id":272,"data":274,"body":280,"filePath":281,"digest":282,"deferredRender":20},{"title":275,"date":276,"tags":277,"published":20},"JavaScript Playground","2019-02-02T22:12:03.284Z",[278,279,239,31],"js playground","frontend","> Currently I have written a new component for the same playground concepts and is available for demo [here](/introducing-playground/)\n\nAnnouncing a new JavaScript Playground for the blog.\n\nThis is a live edit panel so you can edit and come up with a live output right here, right now.\n\nYou can find the library [https://github.com/agneym/react-js-live](https://github.com/agneym/react-js-live)\n\n> Happy Coding","src/content/blog/js-playground.mdx","ba094f986d64a264","looking-ahead-2024",{"id":283,"data":285,"body":293,"filePath":294,"digest":295,"deferredRender":20},{"title":286,"date":287,"tags":288,"published":20},"Looking ahead in 2024 by peeking into the past","2024-01-01T22:10:03.284Z",[289,290,31,291,292],"looking ahead","2024","development","web","PS: This is extracted from [my monthly newsletter](https://buttondown.email/agney/archive/jem-web-in-december-javascript-every-month/).\n\nThis is an endeavour to reflect on the observations made throughout the year and make predictions or manifest expectations for what lies ahead.\n\n## Coming of age of AI\n\nWhen ChatGPT initially made its debut, one of its early applications beyond being a chatbot was in the realm of coding. GitHub introduced Copilot, a tool trained on vast amounts of open-source code. Now, it seamlessly assists users without requiring explicit instructions on what to do.\n\nBefore we say, \"obviously!\", such applications are quite rare. Presently, many design-oriented applications rely on user-provided text to generate entire designs, which often proves impractical. We have evolved beyond scenarios where designers can articulate their needs in a single sentence. While coders benefit from working with text, and Language Models excel in this regard, there's a need for AI applications that assist users in their existing workflows, rather than requiring exhaustive input for complete output generation. Exciting initiatives like [Visual Electric](https://visualelectric.com/) stand out as they adopt a distinctive approach to image generation, departing from the conventional textbox reliance. We require AIs that augment human productivity rather than attempting to replace humans entirely.\n\n## Microfrontends\n\nMicrofrontends, while not new, have historically operated in the shadows of the internet, lacking a comprehensive exploration of their advantages, disadvantages, and real-world applications. This architectural approach, analogous to Microservices but applied to the frontend, awaits a nuanced analysis.\n\nOne prominent argument in favor of Microfrontends is their facilitation of team scalability, enabling easier division and management of tasks among smaller teams. Various methodologies, ranging from rendering in iFrames to utilizing web components and embracing module federation, currently exist for implementing microfrontends. However, amid this diversity, a critical question persists: which approach reigns supreme, or how do they compare in addressing specific needs?\n\nIt is noteworthy that the module federation advocates predominantly align with the Webpack toolchain. As the landscape evolves, it is anticipated that the coming year will witness the emergence of additional tools dedicated to efficiently managing microfrontends. An exploration of these developments promises a deeper understanding of the optimal strategies for implementing and navigating the intricacies of microfrontend architectures.\n\n## Non JavaScript tool stacks continue to dominate\n\nNearly every tool within the JavaScript ecosystem is undergoing a transition towards more performant alternatives implemented in lower-level languages.\n\n- [Babel](https://babeljs.io/) ðŸ”œ [SWC](https://swc.rs/) written in Rust.\n- [Webpack](https://webpack.js.org/) ðŸ”œ [esbuild](https://esbuild.github.io/) written in Go / [Turbopack](https://vercel.com/blog/turbopack) written in Rust / [Rspack](https://www.rspack.dev/) written in Rust.\n- [ESLint](https://eslint.org/) ðŸ”œ [Oxlint](https://oxc-project.github.io/docs/guide/usage/linter.html) written in Rust.\n- [Prettier](https://prettier.io/) ðŸ”œ [Biome](https://biomejs.dev/) written in Rust.\n- Node.js ðŸ”œ [Bun](https://bun.sh/) written in Zig.\n\nI don't see any signs that this is slowing down. Who doesn't love faster tooling.\n\n## WebAssembly Component Model\n\nAs developers who typically operate on robust systems, the preference for faster tooling in lower-level languages prompts a consideration: should we extend this optimization to benefit users on less powerful devices, such as mobile phones, watches, or smart fridges, as they access the web?\n\nThe [WebAssembly component model](https://component-model.bytecodealliance.org/design/why-component-model.html) will make it easier for languages to talk to each other using an agreed interface.\n\n> For Wasm modules to interoperate, therefore, there needs to be an agreed-upon way for defining those richer types, and an agreed-upon way of expressing them at module boundaries.\n\n> The agreement of an interface adds a new dimension to Wasm portability. Not only are components portable across architectures and operating systems, but they are now portable across languages. A Go component can communicate directly and safely with a C or Rust component. It need not even know which language another component was written in - it needs only the component interface, expressed in WIT. Additionally, components can be linked into larger graphs, with one component satisfying another's dependencies, and deployed as units.\n\nIf this can create a world where JavaScript can talk to lower level languages faster and easier, we can start to see our frameworks written in lower level languages like Rust or Go and we would be able to communicate to them with JavaScript.\n\n> Here's to an amazing 2024 ðŸ¥‚","src/content/blog/looking-ahead-2024.mdx","d5a3b34205177cac","nextjs-on-eb-ci",{"id":296,"data":298,"body":307,"filePath":308,"digest":309,"deferredRender":20},{"title":299,"date":300,"tags":301,"published":20},"NextJS on Elastic Beanstalk with Circle CI","2019-03-08T22:12:03.284Z",[302,303,304,305,306],"how to deploy","nextjs","elastic beanstalk","circleci","aws","> It's a dream combination to have. But like all the things, it's hard to get there. But here is a crash course.\n\nPS: This assumes that you already know why you want to use Elastic Beanstalk and CircleCI.\n\nPlanned Workflow:\n\n![Flow from Local to CI to EB](/blog/nextjs-on-eb-ci/diagram.png)\n\n1. We create the application locally in different branches.\n2. We merge to `master` branch.\n3. CircleCI runs lint and test on these branches.\n4. CircleCI runs the NextJS build. (Also, run custom server build if you have one)\n5. CircleCI creates a ZIP file with necessary folders and pushed it to Elastic Beanstalk.\n6. Elastic Beanstalk runs the build and application is deployed.\n\n> Thanks to Ryan Simms [Gist](https://gist.github.com/ryansimms/808214137d219be649e010a07af44bad) for the cornerstone.\n\nSo, let's start.\n\n## Setup EB Environment\n\n1. Create New Application\n2. Create New Environment\n3. When it asks you over two choices, choose Create a Web Server.\n4. Configure the rest of the server, you would probably want a load balancer in there if you want to [setup HTTPS](https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/configuring-https.html).\n\n## Setup CircleCI\n\n1. Create a CircleCI application\n2. Link it to your repository on Github/Gitlab and select your technology.\n3. We have NodeJS here and our configuration script being:\n\n```\nversion: 2\njobs:\n  test:\n    docker:\n      -\n        image: 'circleci/node:10.8.0'\n    working_directory: ~/app-name-directory\n    steps:\n      - checkout\n      -\n        restore_cache:\n          name: Restore Yarn Package Cache\n          keys:\n            - yarn-packages-{{ checksum \"yarn.lock\" }}\n      -\n        run: 'yarn install'\n      -\n        save_cache:\n          name: Save Yarn Package Cache\n          key: 'yarn-packages-{{ checksum \"yarn.lock\" }}'\n          paths:\n            - ~/.cache/yarn\n      -\n        run: 'yarn test'\n  deploy_prod:\n    working_directory: ~/app-name-directory\n    docker:\n      -\n        image: 'circleci/node:10.8.0'\n    steps:\n      - checkout\n      -\n        run:\n          name: 'Build Application'\n          command: yarn install && yarn run build && yarn run generate-zip\n      -\n        run:\n          name: 'Install Python'\n          command: \"sudo apt-get -y -qq update\\nsudo apt-get -y -qq install python3.4-dev\\necho 'export PATH=/root/.local/bin/:$PATH' >> $BASH_ENV\\necho 'export PATH=/home/circleci/.local/bin/:$PATH' >> $BASH_ENV\\n\"\n      -\n        run:\n          name: 'Install pip'\n          command: \"curl -O https://bootstrap.pypa.io/get-pip.py\\npython3.4 get-pip.py --user\\n\"\n      -\n        run:\n          name: 'Install AWS EB CLI & S3 CLI'\n          command: \"pip install awsebcli --upgrade --user\\npip install awscli --upgrade --user\\n\"\n      -\n        run:\n          name: 'Deploy to Elastic Beanstalk'\n          command: \"eb use AppName-env\\ntimeout 1m eb deploy -v --staged || true\\n\"\nworkflows:\n  version: 2\n  Test_and_Deploy:\n    jobs:\n      - test\n      -\n        deploy_prod:\n          requires:\n            - test\n          filters:\n            branches:\n              only: master\n```\n\nThis configuration runs in `yarn test` on all branches pushed. It runs `deploy_prod` only on the `master` branch, after running `test` successfully.\n\n```\neb use AppName-env\\ntimeout 1m eb deploy -v --staged\n```\n\nIn this command, use the name you provided to your environment earlier in Elastic Beanstalk.\n\n## Create IAM user\n\nNow we have to provide permissions for Circle CI to deploy to Elastic Beanstalk. This is done with the help of AWS IAM User.\n\n1. [Add a AWS User from here](https://console.aws.amazon.com/iam/home#/users$new?step=details)\n2. Set a username and select Programmatic access as the Access type\n3. Click 'Create group' on the user permissions page\n4. Set a group name and search for the AWSElasticBeanstalkFullAccess policy type and select it\n5. Create the group so it's assigned to your new user\n6. Review and create the user.\n\n## Add IAM User to CircleCI\n\nAdd deployment user environment variables to CircleCi\n\n- Project Settings > Environment Variables\n  - AWS_ACCESS_KEY_ID\n  - AWS_SECRET_ACCESS_KEY\n\n## Deploying NextJS\n\nNow, is the tricky part. You do not want to transfer every part of your application to Elasticbeanstalk. Instead, you might want to transfer the `.next` folder that houses your build and may be a [custom server combination](https://github.com/zeit/next.js/tree/canary/examples/custom-server-express) you are using with it.\n\nElastic Beanstalk very essentially works with a ZIP file being uploaded to the service. This is what happens when you use the CI with the command `eb deploy`, but here what we want to do is create a custom ZIP file for EB and ask it to deploy the same.\n\n```\nyarn run generate-zip\n```\n\nThis is what this line in our CircleCI configuration is doing.\n\n```\n\"generate-zip\": \"sh ./scripts/generate-zip.sh\"\n```\n\n`generate-zip` command in our `package.json` points to an `sh` file that is to be executed after taking build of your application.\n\nHere is the `generate-zip.sh` file:\n\n```\n# If the directory, `dist`, doesn't exist, create `dist`\nstat dist || mkdir dist\n# Archive artifacts\nzip dist/$npm_package_name.zip -r dist .next package.json yarn.lock next.config.js assets\n```\n\nThis creates a ZIP in the dist folder with `.next`, `package.json`, `lock` files, config scripts and assets. If you have a custom server being build somewhere, add that folder name too. In my case, it is being build to `dist` folder itself.\n\nNow, we need to ask EB to actually use this zip file. We do that with `.elasticbeanstalk/config.yml` file.\n\n```\nbranch-defaults:\n  master:\n    environment: AppName-env\nglobal:\n  application_name: app-name\n  default_ec2_keyname: app-web\n  default_platform: Node.js\n  default_region: ap-south-1\n  include_git_submodules: true\n  instance_profile: null\n  platform_name: null\n  platform_version: null\n  profile: null\n  sc: git\n  workspace_type: Application\ndeploy:\n  artifact: dist/appname.zip\n```\n\nNote: Use the same names you used while creating the environment here too.\n\nThe last line is the major part to take notice. This is the ZIP we made with the `sh` file in last step.\n\nNow, just push the master branch and it should build the application on EB.\n\nFeel free to create an [issue](https://github.com/agneym/blog/issues) if you need help.","src/content/blog/nextjs-on-eb-ci.mdx","454714037f8492c4","new-styling-favorite",{"id":310,"data":312,"body":319,"filePath":320,"digest":321,"deferredRender":20},{"title":313,"date":314,"tags":315,"published":20},"twin.macro is my new styling favorite","2020-12-21T22:12:03.284Z",[316,317,318,95],"css","css-in-js","twin.macro","I have already made my love for [`styled-components`](https://www.styled-components.com/) pretty clear on many different posts in this blog. This blog is about a new absolute favorite - [`twin.macro`](https://github.com/ben-rogerson/twin.macro).\n\nBefore we talk about `twin.macro`, we have to talk about [TailwindCSS](https://tailwindcss.com/).\n\n## Tailwind CSS\n\nTailwind is a atomic CSS framework that has taken the world by storm. Everywhere you look, there would be a company/website using it. But atomic CSS has existed way before Tailwind - [Tachyons](http://tachyons.io/) is an early example.\n\nOne of my first exposures to this writing style was from Adam Wathan (who is also the author of Tailwind), when he wrote [this (now) iconic blog post](https://adamwathan.me/css-utility-classes-and-separation-of-concerns/). It's super long, but he very well talks about what atomic CSS is and what we can achieve through it.\n\n> every line of new CSS is still an opportunity for new complexity\n\nWhen Adam said he is releasing a new framework called Tailwind which enforces atomic CSS, I immediately wanted to check it out. I found the experience rather underwhelming, The tokens from CSS was already difficult enough, now I have to learn these short form tokens for them? _Uggh.. this is hard._\n\nFrom the website for Tailwind:\n\n```html\n\u003Cfigure class=\"rounded-xl bg-gray-100 p-8 md:flex md:p-0\">\n  \u003Cimg\n    class=\"mx-auto h-32 w-32 rounded-full md:h-auto md:w-48 md:rounded-none\"\n    src=\"/sarah-dayan.jpg\"\n    alt=\"\"\n    width=\"384\"\n    height=\"512\"\n  />\n  \u003Cdiv class=\"space-y-4 pt-6 text-center md:p-8 md:text-left\">\n    \u003Cblockquote>\n      \u003Cp class=\"text-lg font-semibold\">\n        â€œTailwind CSS is the only framework that I've seen scale on large teams.\n        Itâ€™s easy to customize, adapts to any design, and the build size is\n        tiny.â€\n      \u003C/p>\n    \u003C/blockquote>\n    \u003Cfigcaption class=\"font-medium\">\n      \u003Cdiv class=\"text-cyan-600\">Sarah Dayan\u003C/div>\n      \u003Cdiv class=\"text-gray-500\">Staff Engineer, Algolia\u003C/div>\n    \u003C/figcaption>\n  \u003C/div>\n\u003C/figure>\n```\n\nThis is not how any of us think of colors or spacing and they are new tokens that you have to learn. In commercial projects, designers who were not aware of our use of Tailwind created different colors, different spacings which crowded the theme file. I could not copy already written CSS from codepen projects and have it work (This seems to be the problem [Tailwind UI](https://tailwindui.com/) solves). And despite all that, Tailwind succeeded.\n\nI think the reason for Tailwind's success is better explained when talking about their second founder - [Steve Schoger](https://www.steveschoger.com/). Their first project together was a book named [Refactoring UI](https://refactoringui.com/book/) which is still one of the best books that a developer can get to teach themselves some design. The book is derived from tips that Steve used to provide on Twitter for developers. Both Steve and Adam have given enough thought about making a developer successful in design and received feedback on it. They have applied several of these principles into the framework of Tailwind itself and that's where the _magic numbers_ and _color suites_ come from.\n\n> Make your ideas look awesome, without relying on a designer. - Refactoring UI\n\n- We need to write custom CSS at least sometimes\n- Conditionally apply classes and create custom components\n- Extract critical CSS so that pages load faster\n- Instead of enabling and disabling features, I need to be able to use what I want.\n- I wish I didn't have to learn all these classes.\n\n## twin.macro\n\n> Twin blends the magic of Tailwind with the flexibility of css-in-js\n\n`twin` lets you write tailwind classes and converts them to css-in-js counterparts - currently supporting popular libraries like `styled-components` and `goober`. This means that instead of purging classes from HTML on build, twin can maintain a cache of classes that are being used and include them in the final bundle.\n\nIf you have something working with Tailwind before, using `twin.macro` you can change `className` to `tw`:\n\n```jsx\nfunction Cover() {\n  return (\n    \u003Cdiv className=\"relative w-48 flex-none\">\n      \u003Cimg\n        src=\"/classic-utility-jacket.jpg\"\n        alt=\"\"\n        className=\"absolute inset-0 h-full w-full object-cover\"\n      />\n    \u003C/div>\n  );\n}\n```\n\nOn `twin`:\n\n```jsx\nimport \"twin.macro\";\n\nfunction Cover() {\n  return (\n    \u003Cdiv tw=\"flex-none w-48 relative\">\n      \u003Cimg\n        src=\"/classic-utility-jacket.jpg\"\n        alt=\"\"\n        tw=\"absolute inset-0 w-full h-full object-cover\"\n      />\n    \u003C/div>\n  );\n}\n```\n\n- If you need to write custom CSS, it's as simple as writing custom CSS.\n\n```jsx\n\u003Cdiv tw=\"flex-none w-48 relative\">\n  \u003Cimg\n    src=\"/classic-utility-jacket.jpg\"\n    alt=\"\"\n    tw=\"absolute inset-0 w-full object-cover\"\n    { /* Using `css` prop from `styled-components`, `emotion`. */ }\n    css=\"max-height: calc(100vh - 48px)\"\n  />\n\u003C/div>\n```\n\n- Create components and apply CSS\n\n```jsx\nconst Button = styled.button(({ isPrimary }) => [\n  // Group related classes\n  tw`px-2 py-4 m-2`,\n  tw`border border-gray-600\tborder-dashed rounded-sm`\n  // Custom CSS\n  `box-shadow: 2px 2px 5px 0px rgba(50, 50, 50, 0.75);`\n  // conditional styling\n  isPrimary && tw`bg-indigo-400`\n  // variant grouping\n  tw`hover:(text-black underline)`\n]);\n```\n\n- All variants and media stylings are available and transpiled on demand.\n\nFrom `twin.macro` examples:\n\n```js\nimport 'twin.macro'\n\nconst interactionStyles = () => (\n  \u003Cdiv tw=\"hover:(text-black underline) focus:(text-blue-500 underline)\" />\n)\n\nconst mediaStyles = () => \u003Cdiv tw=\"sm:(w-4 mt-3) lg:(w-8 mt-6)\" />\n\nconst pseudoElementStyles = () => (\n  \u003Cdiv tw=\"before:(content block w-10 h-10 bg-black)\" />\n)\n\nconst stackedVariants = () => \u003Cdiv tw=\"sm:hover:(bg-black text-white)\" />\n\nconst variantsInGroups = () => \u003Cdiv tw=\"sm:(bg-black hover:bg-white)\">\n```\n\n- If you don't want to learn all the freaking classes, you can now sponsor Sid for his [UI Devtools](https://ui-devtools.com/).\n\n- I had mentioned that `twin.macro` transpiles to `styled-components` or `emotion`, but you can also set it to transpile the output down to `goober`.\n\nGoober is a 1kB alternative to CSS-in-JS libraries with the same functionalities. You aren't going to be using a whole lot of features because tailwind anyway, so overload the size limits.\n\n[More on Goober](/replacing-sc-with-goober/)\n\nOn installing `twin.macro` and `goober`, add a setting in `package.json` to set it up to use goober:\n\n```bash\nnpm i goober twin.macro\n```\n\n```json\n{\n  \"babelMacros\": {\n    \"twin\": {\n      \"preset\": \"goober\"\n    }\n  }\n}\n```\n\nThere is a lot more convienience features that you get to add in for `babel`, here's few examples:\n\n- [GooberJS, Preact and Twin Macro](https://github.com/ben-rogerson/twin.examples/tree/master/preact-goober/)\n- [Twin Macro with GooberJS and NextJS](https://github.com/agneym/next-goober-twin)\n\n_Happy Tailwinding_","src/content/blog/new-styling-favorite.mdx","c52c63cb23096230","netlify-fns-cra",{"id":322,"data":324,"body":332,"filePath":333,"digest":334,"deferredRender":20},{"title":325,"date":326,"tags":327,"published":20},"Creating a JAMStack Reader App with React & Netlify Functions","2020-01-04T22:12:03.284Z",[328,329,330,331],"netlify functions","create-react-app","serverless","reader app","I'm in ðŸ’– with the [JAMStack](https://jamstack.org/), It gets the work done. One of the very exciting companies in this area is [Netlify](https://www.netlify.com/). Anyone who tested their hosting would tell you it's top class and I would recommend it anyday.\n\nIn this post we will explore using their [Serverless functions](https://www.netlify.com/products/functions/) with [create-react-app](https://create-react-app.dev/).\n\n# The What.\n\nWhat we intend to create a reading application. You give it the URL and allows you to view the simplified content fit for reading.\n\n# The How\n\nWe ideally to parse the url string from the backend to avoid getting blocked by [CORS](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS). We will use a Netlify Function to achieve this. We will use Postlight's [Mercury Parser](https://github.com/postlight/mercury-parser) with the function to parse the simplified version from URL.\n\n# The Detail\n\nFirst let's create a new React application with [create-react-app](https://create-react-app.dev/):\n\n```bash\nnpm init react-app the-reader\n```\n\n## The Build step\n\nNow, to setup Netlify functions, create a top level folder, I'm naming it `functions`. We have to update the build step so that the function is also build when we run `yarn build`.\n\nNetlify has published a package [netlify-lambda](https://github.com/netlify/netlify-lambda) to help with the build:\n\n```\nyarn add netlify-lambda npm-run-all --dev\n```\n\n[`npm-run-all`](https://www.npmjs.com/package/npm-run-all) is used to run both tasks in parallel. In `package.json`:\n\n```json\n\"scripts\": {\n    \"build\": \"run-p build:**\",\n    \"build:app\": \"react-scripts build\",\n    \"build:lambda\": \"netlify-lambda build functions/\",\n}\n```\n\nCreate a `netlify.toml` so that `netlify` knows where the build is:\n\n```toml\n[build]\n  command = \"yarn build\"\n  functions = \"build-lambda\" # netlify-lambda gets build to this folder\n  publish = \"build\"  # create-react-app builds to this folder\n```\n\n> Remember to add `build-lambda` to `.gitignore`.\n\nCreate your first function by creating a JS file in `functions` folder we created earlier.\n\n> Netlify can recognise JS files in the folder or in nested folders.\n\nIn `functions/parse.js`:\n\n```javascript\nexport async function handler(event) {\n  return {\n    statusCode: 200,\n    body: JSON.stringify({ data: \"hello world\" }),\n  };\n}\n```\n\n## Dummy function\n\nFrom the frontend application you can now use `fetch` to query `.netlify/functions/parse.js` (your folder structure prepended with `.netlify/`) to get the dummy response we put in. But with a twist, it works only when you deploy the application to Netlify. _That's not a good development methodology._ This is because the functions are not build yet and there is `.netlify/` path to get the data from.\n\n`netlify-lambda` has a serve mode for development, so that the functions can be build for any changes and updated to a server.\n\nAdd the following to `package.json` and keep it running in the background with `npm start`:\n\n```json\n\"scripts\": {\n  \"serve:lambda\": \"netlify-lambda serve functions/\",\n},\n```\n\n## The Proxy\n\nYou will find that the functions is now running on a server with `localhost:9000`. But even if you could add an environment variable to query this server, there is an issue with CORS now. Your frontend and functions are running on different servers. To get around this, you can add a proxy with `create-react-app`. You can find complete instructions in the [docs](https://create-react-app.dev/docs/proxying-api-requests-in-development/#configuring-the-proxy-manually).\n\nWhat we have to do is to add `src/setupProxy.js`, you don't have to import this file anywhere, just create, add code and âœ¨ restart your development server.\n\n```javascript\nconst proxy = require(\"http-proxy-middleware\");\n\nmodule.exports = function (app) {\n  app.use(\n    proxy(\"/.netlify/functions/\", {\n      target: \"http://localhost:9000/\",\n      pathRewrite: {\n        \"^/\\\\.netlify/functions\": \"\",\n      },\n    }),\n  );\n};\n```\n\nWhat this is essentially doing is to rewrite any API calls to `.netlify/functions` to `localhost:9000` and get response from there. This only works in development, so it works without the server in production.\n\n## The API call\n\nFirst, let's setup a form where user can enter a URL and request the server.\n\n```jsx\nconst App = () => {\n  const handleSubmit = () => {};\n  return (\n    \u003Cmain>\n      \u003Cform onSubmit={handleSubmit}>\n        \u003Cinput type=\"url\" placeholder=\"Enter url here\" name=\"url\" label=\"url\" />\n        \u003Cbutton>View\u003C/button>\n      \u003C/form>\n    \u003C/main>\n  );\n};\n```\n\nFilling in the `handleSubmit` function:\n\n```javascript\n// for encoding the URL as a GET parameter\n\nconst handleSubmit = (event) => {\n  event.preventDefault();\n  const url = event.target.url.value;\n  fetch(`/.netlify/functions/parse?${stringify({ q: reqUrl })}`).then(\n    (response) => response.json(),\n  );\n};\n```\n\nIf you run this function now, it will return the `{ data: \"Hello world\" }` we added earlier (hopefully).\n\nTo return some real data, let's modify the `functions/parse.js` to:\n\n```javascript\nexport async function handler(event) {\n  const parameters = event.queryStringParameters;\n  const url = parameters.q;\n\n  if (!url) {\n    return {\n      statusCode: 400,\n      body: JSON.stringify({ error: \"Invalid/No URL provided\" }),\n    };\n  }\n  try {\n    const response = await Mercury.parse(url);\n    return {\n      statusCode: 200,\n      body: JSON.stringify({ data: response }),\n    };\n  } catch (err) {\n    return {\n      statusCode: 500,\n      body: JSON.stringify({ error: err }),\n    };\n  }\n}\n```\n\nThe function takes URL as an argument through `queryStringParameters` and uses `Mercury.parse` to get the simplified version and return it to the user.\n\nNow, running the frontend would get you the real response from the serverless function (which underwhelmingly has a server now, but you can always push and get it deployed).\n\nSome changes on the frontend to display the data from backend:\n\n```jsx\nconst App = () => {\n  const [result, setResult] = useState(null);\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    const url = event.target.url.value;\n    fetch(`/.netlify/functions/parse?${stringify({ q: reqUrl })}`)\n      .then((response) => response.json())\n      .then((jsonResponse) => setResult(jsonResponse.data));\n  };\n  return (\n    \u003Cmain>\n      \u003Cform onSubmit={handleSubmit}>\n        \u003Cinput type=\"url\" placeholder=\"Enter url here\" name=\"url\" label=\"url\" />\n        \u003Cbutton>View\u003C/button>\n      \u003C/form>\n      {result && \u003Carticle dangerouslySetInnerHTML={{ __html: data.content }} />}\n    \u003C/main>\n  );\n};\n```\n\nand we are Done ðŸ¥‚.\n\nTo convert this to a PWA, you can very simply [add the service workers on the `create-react-app`](https://create-react-app.dev/docs/making-a-progressive-web-app/) and adjust the parameters in `manifest.json`.\n\n## Share Target\n\nIt's too much of work to actually copy the URL and copy paste into our app, especially on mobile. But for PWAs what we can do is to register the application as a share target. You can do this by specifying the following in `manifest.json`:\n\n```json\n\"share_target\": {\n  \"action\": \"/\",\n  \"method\": \"GET\",\n  \"params\": {\n    \"text\": \"q\"\n  }\n}\n```\n\nThe important thing here is the `params` object. On the left is what is to be passed, there are different params like `title`, `text` and `url`. For some wierd reason, Chrome sends the URL of the page in the `text` parameter and that is what we are substituting here.\n\nWhen something is shared to the application, the URL would be:\n\n```\nhttps://baseurl.com?q=shared-url\n```\n\nTo process this, the frontend can:\n\n```javascript\nconst location = useLocation();\n\nuseEffect(() => {\n  const searchParams = new URLSearchParams(location.search);\n  const url = searchParams.get(\"q\");\n  if (url) {\n    handleView(url);\n  }\n}, [location.search]);\n```\n\nYou can find the complete code in the [repository](https://github.com/agneym/the-reader)\n\n[Application Demo](https://competent-nightingale-a5d6b2.netlify.com/)","src/content/blog/netlify-fns-cra.mdx","a592d33a59451783","npm-commands-to-save-time",{"id":335,"data":337,"body":345,"filePath":346,"digest":347,"deferredRender":20},{"title":338,"date":339,"tags":340,"published":20},"7 NPM Commands to help you save time.","2019-12-03T22:12:03.284Z",[341,342,343,344],"npm","tips and tricks","commands","beginner","As JavaScript developers, NPM is something that we always use and we have a script continously running on the terminal.\n\nWhat if we could save some time using it?\n\n## 1. Open documentation directly from npm\n\nWhat if we could directly jump to the documentation of a package from using `npm`?\n\n```bash\nnpm home package-name\n\n# for example:\n\nnpm home react  # would take you to reactjs.org in the browser/\n```\n\n## 2. Open the bugs ðŸ› page\n\nJust in case, we wanted to file a bug on the package.\n\n```bash\nnpm bugs package-name\n\n# for example:\nnpm bugs @agney/playground\n```\n\nThis would open the github issues page (or any issues page) in the browser if linked by the package author.\n\n## 3. See all scripts in your package.\n\nIt's hard to remember script names esp. if you did not write them in the first place. Instead of going to `package.json`, you can run the following command to see script names and commands being run.\n\n```bash\nnpm run\n```\n\n## 4. Skip all the init questions\n\nWhen you run `npm init`, it asks you a number of questions. You can go ahead and answer all of them, but it's much better to skip and accept the default for most of the time.\n\n```bash\nnpm init -yes\n```\n\n## 5. Updating packages to latest.\n\nThe default command for NPM CLI would only update the packages respecting the semver range specified in `package.json`.\n\n```bash\nnpm update\n```\n\nHowever, I don't think we believe in package authors or ourselves to change the semver indicators. `yarn` provides a nice enough utility with `yarn upgrade-interactive --latest`, but it's not available for NPM.\n\nTo clone this functionality with NPM, you can use a package named [`npm-check`](https://www.npmjs.com/package/npm-check).\n\n```\nnpx npm-check --update\n```\n\n## 6. Faster npm install on CI\n\n`npm install` comes with some baggage (user oriented features) that makes it inherently slow. But we do need these on the CI server, NPM allows us to skip these with a command.\n\n```bash\nnpm ci\n```\n\nYou can add replace the `npm install` with `npm ci` in your CI servers and do fine if you have a `package-lock.json`.\n\nFor example, [Travis CI](https://travis-ci.org/) configuration would be:\n\n```\n# .travis.yml\ninstall:\n- npm ci\n# keep the npm cache around to speed up installs\ncache:\n  directories:\n  - \"$HOME/.npm\"\n```\n\n## 7. A Better npm publish\n\n`npm publish`is good, it can update your package version with semver and then push the package onto the registry.\n\nBut this does leave out some of the important steps: Building and testing the package. To automate these to be performed, you can use the `prepublish` script.\n\n```json\n\"scripts\": {\n    \"prepublish\": \"npm run build\"\n}\n```\n\nBut `prepublish` is executed on each `install` and hence not the best place to create changelogs or run your tests. After taking some criticism on the naming (it's one of the hardest things anyway), NPM introduced some a new automatic hook `prepublishOnly`\n\n```json\n\"scripts\": {\n    \"prepublishOnly\": \"npm test\"\n}\n```\n\nOr, better is the package [`np`](https://github.com/sindresorhus/np).\n\nYou can simply run:\n\n```\nnpx np\n```\n\nand it will run all the necessary steps including installing packages, build and running the tests. It will also create a tag and release on Github ðŸ’Œ.\n\n>\n\nWhat tricks do you use to save time?","src/content/blog/npm-commands-to-save-time.mdx","427cbb954c2c0bfd","og-images-with-actions",{"id":348,"data":350,"body":358,"filePath":359,"digest":360,"deferredRender":20},{"title":351,"date":352,"tags":353,"published":20},"OG Images with Github Actions","2019-09-20T22:12:03.284Z",[354,355,356,357],"github","actions","open graph image","gatsby","Open graph images are those that show up on your social media card when you share the URL.\n\nHere is how to add one:\n\n```html\n\u003Cmeta property=\"og:image\" content=\"http://ia.media-imdb.com/images/rock.jpg\" />\n```\n\nSimple, Right?\n\nNow for comparison here are two tweets:\n\n![Without an open graph image - bland](/blog/og-images-with-actions/without-og.png)\n\nI think we can all agree that this is pretty bland.\n\nNow let's look at another one, but now with the Open Graph Image.\n\n![With open graph - much better](/blog/og-images-with-actions/with-og.png)\n\nMuch better.\n\nBut moving to photoshop for creating this image is pretty hard, it's mostly generic anyway.\n\n# Github Actions to the rescue\n\n[Install from Marketplace](https://github.com/marketplace/actions/generate-og-image)\n\n[Generate OG Image](https://github.com/marketplace/actions/generate-og-image) is a customisable open graph image generator that runs on Github Actions which means it is free for public repositories.\n\nYou can add it to your existing workflow by adding the following lines to your `action.yml`:\n\n```yml\nname: \"Generate OG Images\"\non: pull_request\n\njobs:\n  generate_og_job:\n    runs-on: ubuntu-latest\n    name: Generate OG Images\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v1\n      - name: Generate Image\n        uses: agneym/generate-og-image@1.0.3\n        env:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n          GITHUB_CONTEXT: ${{ toJson(github) }}\n        with:\n          path: static/post-images/\n```\n\nSteps to note here:\n\n1. It needs the `GITHUB_TOKEN` so it can access the markdown files and commit the generated image.\n2. `GITHUB_CONTEXT` gives more information pull request.\n3. `actions/checkout@v1` allows to access the files inside the action.\n4. `path` refers to the required path.\n\nFor more properties, customisations and uses, follow the [Readme](https://github.com/marketplace/actions/generate-og-image)\n\nLet me know if you try out.","src/content/blog/og-images-with-actions.mdx","367eaef582b7d8ef","one-signal-on-gatsby",{"id":361,"data":363,"body":371,"filePath":372,"digest":373,"deferredRender":20},{"title":364,"date":365,"tags":366,"published":20},"One Signal Notifications on Gatsby","2019-04-04T22:12:03.284Z",[367,368,369,370],"one signal","web notifications","gatsby js","notifications for gatsby","Notifications are now an integral part of the web ecosystem. It increases the user engagement rate and your site can organically have people coming back day after day with fresh content.\n\n[Gatsby](https://www.gatsbyjs.org/) is the most popular Blog React Framework in town and that is what we will be pairing up with popular free (mostly) notification service [One Signal](https://onesignal.com).\n\nWe will be looking at [Web Push](https://documentation.onesignal.com/docs/web-push-overview) in this article.\n\n## 1. Login with OneSignal\n\n[Create an Account](https://app.onesignal.com/login) on OneSignal, it's pretty much [free](https://app.onesignal.com/pricing) to start with.\n\n## 2. Add a new App on OneSignal Dashboard\n\nYou can add any (identifiable) name you want and select No Organisation under the organisation dropdown.\nAdd the app and select Web Push as the required platform. (Onesignal has docs for almost every platform out there, web push is just the one we will cover).\n\n## 3. Setup Page\n\n![Setup Page](/blog/one-signal-on-gatsby/setup.png)\n\nThe Typical Site option is the easiest and but it is not going to have the UX we want, click on the Custom Site option.\n\nFollow the instructions in [official docs](https://documentation.onesignal.com/docs/web-push-custom-code-setup#section--span-class-step-step-2-span-site-setup) to complete the form.\n\n## 4. Site setup\n\nYou will now get to [download three files](https://github.com/OneSignal/OneSignal-Website-SDK/releases/download/https-integration-files/OneSignal-Web-SDK-HTTPS-Integration-Files.zip).\n\nThese are `manifest.json` file, `OneSignalSDKWorker.js` and `OneSignalSDKUpdaterWorker.js`. What we have to achieve now is to upload these to the top level directory.\n\nIf you are using `gatsby`, you probably have [`gatsby-plugin-manifest`](https://www.gatsbyjs.org/packages/gatsby-plugin-manifest/) somewhere in your configuration. If you do, just copy the `gcm_sender_id` from the manifest you downloaded and add it to manifest config.\n\n[Sample](https://github.com/agneym/blog/blob/4d1f1df1bb7b55b1e4718e80e646fb8ee591df21/gatsby-config.js#L77)\n\nCopy the other two files into the static folder of gatsby. All files inside this folder will be copied over to the build folder and hence satisfies the top level directory requirement.\n\nThe next step is to include OneSignal SDK URL into HTML head. It is specifically said that it should be from a CDN and not loaded from the local. But we do not normally edit head inside Gatsby applications.\n\nWe have instructions for editing the head of HTML doc here: [Customizing html.js](https://www.gatsbyjs.org/docs/custom-html/)\n\nYou can copy HTML with:\n\n```bash\ncp .cache/default-html.js src/html.js\n```\n\nIn the new HTML file, add:\n\n```html\n\u003Cscript src=\"https://cdn.onesignal.com/sdks/OneSignalSDK.js\" async=\"\" />\n```\n\nto the head.\n\n### 5. Trigger it on custom link\n\nAdding a react component with link.\n\n```jsx\nclass NotificationsForm extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      permission: \"default\",\n    };\n  }\n  componentDidMount() {\n    this.OneSignal = window.OneSignal || [];\n    this.setupOneSignal();\n  }\n  /**\n   * Render subscribe button\n   * @param {('default'|'denied'|'granted')} permission - permission level\n   * @returns {import('react').ReactElement} React Node\n   */\n  renderBtn = (permission) => {\n    if (permission === \"default\") {\n      return (\n        \u003CS.SubmitBtn as=\"button\" onClick={this.onSubscriptionBtnClick}>\n          Subscribe\n        \u003C/S.SubmitBtn>\n      );\n    } else if (permission === \"granted\") {\n      return (\n        \u003Ch5>\n          Already part of Notification Squad{\" \"}\n          \u003Cspan role=\"img\" aria-label=\"relieved face\">\n            ðŸŽ‰\n          \u003C/span>\n        \u003C/h5>\n      );\n    } else if (permission === \"denied\") {\n      return (\n        \u003Ch5>\n          Thank You for your time.{\" \"}\n          \u003Cspan role=\"img\" aria-label=\"relieved face\">\n            ðŸ˜Œ\n          \u003C/span>\n        \u003C/h5>\n      );\n    } else {\n      console.warn(\"Unrecognised permission\", permission);\n    }\n  };\n  render() {\n    const { permission } = this.state;\n    return (\n      \u003Cdiv>\n        \u003CS.SubSection>\n          \u003CS.Subtitle>Notifications\u003C/S.Subtitle>\n          \u003Csub>As it Happens.\u003C/sub>\n        \u003C/S.SubSection>\n        {this.renderBtn(permission)}\n      \u003C/div>\n    );\n  }\n  onSubscriptionBtnClick = (event) => {\n    this.getSubscriptionState().then((state) => {\n      if (state.isPushEnabled) {\n        /* Subscribed, opt them out */\n        this.OneSignal.setSubscription(false);\n      } else {\n        if (state.isOptedOut) {\n          /* Opted out, opt them back in */\n          this.OneSignal.setSubscription(true);\n        } else {\n          /* Unsubscribed, subscribe them */\n          this.OneSignal.registerForPushNotifications();\n        }\n      }\n    });\n    event.preventDefault();\n  };\n  setupOneSignal = () => {\n    this.OneSignal.push(() => {\n      if (!this.OneSignal.isPushNotificationsSupported()) {\n        return;\n      }\n      this.OneSignal.init({\n        appId: \"1a5a3a21-f5d1-4a88-a3ab-f8219fbbacea\",\n        autoResubscribe: true,\n        notifyButton: {\n          enable: false,\n        },\n      });\n      this.updateManageWebPushSubscriptionButton();\n      this.OneSignal.on(\"subscriptionChange\", function () {\n        this.updateMangeWebPushSubscriptionButton();\n      });\n    });\n  };\n  updateManageWebPushSubscriptionButton = async () => {\n    try {\n      const state = await this.OneSignal.getNotificationPermission();\n      this.setState({\n        permission: state,\n      });\n    } catch (error) {\n      console.error(\"Error getting notification status\", error);\n    }\n  };\n  /**\n   * Find current subscription state\n   **/\n  async getSubscriptionState() {\n    const result = await Promise.all([\n      this.OneSignal.isPushNotificationsEnabled(),\n      this.OneSignal.isOptedOut(),\n    ]);\n    const [isPushEnabled, isOptedOut] = result;\n    return {\n      isPushEnabled: isPushEnabled,\n      isOptedOut: isOptedOut,\n    };\n  }\n}\nexport default NotificationsForm;\n```\n\n[Find the file here](https://github.com/agneym/blog/blob/master/src/components/subscribe/notifications-form.js)\n\nFeel free to create an [issue](https://github.com/agneym/blog/issues) if you need help.","src/content/blog/one-signal-on-gatsby.mdx","490ca459cb58293e","optional-spreading",{"id":374,"data":376,"body":384,"filePath":385,"digest":386,"deferredRender":20},{"title":377,"date":261,"tags":378,"published":20},"Conditionally spread into Object/Array - Javascript",[379,380,381,382,383],"optional","spread","object","array","condition","There comes a time when we want to add more fields/elements into an array or object when it satisfies a certain condition. This blog is an exploration of how and why.\n\n## Spreading into an Array\n\n`isWinter` is a boolean variable and you need to add `winterEssentials` if it's true and nothing otherwise.\n\n\u003CPlayground\n  defaultEditorTab=\"javascript\"\n  defaultResultTab=\"console\"\n  initialSnippet={{\n    markup: ``,\n    css: ``,\n    javascript: `const essentials = ['phones', 'book', 'cap'];\nconst winterEssentials = ['sweater', 'thermals'];\n \nconst isWinter = true;\n \nconst tripEssentials = [\n  ...essentials,\n  ...(isWinter ? winterEssentials : [])\n];`,\n  }}\n/>\n\nWe need an empty array at end because we cannot spread `undefined` or `null` into an array (they are not iterables). Spreading an empty array into another just keeps the array intact.\n\n```javascript\nconst initialArray = [\"a\", \"b\", \"c\"];\nconst resultingArray = [...initialArray, ...[]];\nconsole.log(initialArray, resultingArray); // Have the same elements.\n```\n\n## Spreading into an Object\n\nRest spread into object is a [Stage 4 ECMA proposal](https://tc39.es/proposal-object-rest-spread) and is [implemented in most browsers](https://caniuse.com/#feat=mdn-javascript_operators_spread_spread_in_object_literals).\n\nIt mimics the behavior of existing [Object.assign](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign) operator.\n\n\u003CPlayground\n  defaultEditorTab=\"javascript\"\n  initialSnippet={{\n    markup: ``,\n    css: ``,\n    javascript: `const hacker = {\n  hoodie: true,\n}\n \nconst isHacker = true;\n \nconst person = {\n  firstName: '',\n  lastName: '',\n  ...(isHacker && hacker)\n};\n \nconsole.log(person);`,\n  }}\n/>\n\nYou will notice here that resorting to a conditional operator isn't necessary. This is because rest spread for objects tries to wrap any primitive it finds to an object.\n\n```javascript\nconsole.log(null); // {}\nconsole.log(undefined); // {}\nconsole.log(0); // {}\nconsole.log(\"abc\"); // {0: \"a\", 1: \"b\", 2: \"c\"}, well an array is also an object\n```\n\n> Guide to [Type Coercion in JavaScript](/type-coercion/)\n\nSo the expression `(isHacker && hacker)` returns `undefined` which our spread operator converts to `{}` and spreading an empty array into an object results in nothing.\n\nThat's conditional spread.","src/content/blog/optional-spreading.mdx","2af17e8c985aca72","override-console-on-iframe",{"id":387,"data":389,"body":396,"filePath":397,"digest":398,"deferredRender":20},{"title":390,"date":391,"tags":392,"published":20},"Overriding console in an iFrame","2019-02-02T08:12:03.284Z",[31,393,394,395],"overriding console in iframe","using srcdoc","override console logs","This post talks about overriding your console logs in an iFrame on your own domain where you have access to the code inside the iframe.\n\nThis might be because you are building a code editor or just executing user code inside an iframe for security reasons.\n\nOur aim is to take the console logs outside the iframe into the main window and process them.\n\nFirst inside the iframe,\n\n```html\n\u003Cscript>\n  // Save the current console log function in case we need it.\n  const _log = console.log;\n  // Override the console\n  console.log = function (...rest) {\n    // window.parent is the parent frame that made this window\n    window.parent.postMessage(\n      {\n        source: \"iframe\",\n        message: rest,\n      },\n      \"*\",\n    );\n    // Finally applying the console statements to saved instance earlier\n    _log.apply(console, arguments);\n  };\n\u003C/script>\n```\n\nRemember to put this before any other JavaScript being executed.\n\nNow, inside our parent code:\n\n```js\n// Listen for messages\nwindow.addEventListener(\"message\", function (response) {\n  // Make sure message is from our iframe, extensions like React dev tools might use the same technique and mess up our logs\n  if (response.data && response.data.source === \"iframe\") {\n    // Do whatever you want here.\n    console.log(response.data.message);\n  }\n});\n```\n\n#### Overriding other methods.\n\nYou can override other console methods by changing up `console.log` to other functions like `console.table`\n\nIf you want to display the logs, [react-inspector](https://www.npmjs.com/package/react-inspector) is a good place to start.\n\n> Happy Coding.","src/content/blog/override-console-on-iframe.mdx","8fff17a05c5e6650","overusing-optional-chaining",{"id":399,"data":401,"body":407,"filePath":408,"digest":409,"deferredRender":20},{"title":402,"date":403,"tags":404,"published":20},"Please don't overuse optional chaining","2020-08-10T22:12:03.284Z",[379,405,31,406],"chaining","usage","This post is small rant on optional chaining and it's usage.\n\nIf you don't know, optional chaining allows you to use shorten your object reference chain by returning `undefined` when it sees a non existent reference in the chain.\n\nConsider a scenario where a person has his country name specified in the chain: `person.location.address.country.name`. Now what if the person doesn't have to specify a whole bunch of this? Location is optional, address is optional if that is present country is optional and so on. You are now either left with shielding your code with lots of `if` or `&&` ðŸ›¡ or lodash [`get`](https://lodash.com/docs/4.17.15#get) ðŸŽ£ or catch the error yourself ðŸ’£.\n\nOptional chaining understands this pain and can shorten it to:\n\n```javascript\nconst countryName = person.location?.address?.country?.name;\n```\n\nThis will not hit an error and will just return `undefined` if the chain fails. Also, it works with TypeScript ðŸŽ©.\n\n[Docs](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining)\n\nThis is obviously a welcome feature, I do use it myself a lot. But sometimes, we see that it is overused. I have overused it in the example itself, `country?.name`\n\nIs there a scenario where there would be a `country` but the `name` is not present? A country without a name?\n\nIf there is not, then it should be written as:\n\n```javascript\nconst countryName = person.location?.address?.country.name;\n```\n\nIt's true that you are skipping an error in some case when there would be an error and country name is not present. But then, you might just be delaying the inevitable.\n\n```javascript\nconst coordinates = location?.coordinates;\n\n// eternities later\nplotMap(coordinates);\n```\n\nIf it is mandatory for location to have coordinates, what you are doing here is to move the impact of the error as far from the origin of it.\n\nWhen Sentry (error tracking system) says that there is an error in `centerMap` function, you know have to trace back till the roots to figure out there is something wrong with your code. Otherwise, it would have straightforward told you that it cannot get `coordindates` of `undefined`.\n\nIf you don't run into an error, the UI is still going to be messed up and you will have the privilege of having to explain to the user that _it works on your system_ because you aren't looking at the cause, just the effect of it somewhere else.\n\nIn other words, TypeScript or use Optional Chaining responsibly.","src/content/blog/overusing-optional-chaining.mdx","8d436e882d1c2344","pomodoro-on-pip",{"id":410,"data":412,"body":419,"filePath":420,"digest":421,"deferredRender":20},{"title":413,"date":414,"tags":415,"published":20},"Let's make a Picture in Picture Countdown timer on the Web","2020-01-28T22:12:03.284Z",[416,417,31,418],"pip","picture in picture","canvas","Caution: This currently works only on Chrome and Safari. Firefox still does not have support for programmatic PiP.\n\n[Can I Use - Picture in Picture](https://caniuse.com/#feat=picture-in-picture)\n\n# The Normal Pomodoro Timer\n\nI'm starting off with a normal countdown pomodoro timer. I will be using [AlpineJS](https://github.com/alpinejs/alpine). For the uninitiated, AlpineJS is a small JavaScript library that uses Vue/Angular like syntax to bring reactivity to the DOM. If you are familiar with Vue or Angular, then you should feel right at home with the syntax.\n\n```html\n\u003Cmain x-data=\"timer()\" x-init=\"init()\">\n  \u003Cdiv>\n    \u003Cp x-text=\"text\">\u003C/p>\n  \u003C/div>\n  \u003Cdiv class=\"button-container\">\n    \u003Cbutton\n      x-text='interval ? \"Pause\" : \"Start\"'\n      @click=\"interval ? pause() : start()\"\n    >\n      Start\n    \u003C/button>\n    \u003Cbutton @click=\"stop()\">Reset\u003C/button>\n  \u003C/div>\n\u003C/main>\n```\n\nJavaScript:\n\n```javascript\nconst zeroPad = (num, places) => String(num).padStart(places, '0');\n\nconst formatTime({minutes, seconds}) = () => `${zeroPad(minutes, 2)} : ${zeroPad(seconds, 2)}`;\n\nfunction timer() {\n  return {\n    interval: null,\n    text: '',\n    time: {\n      minutes: 25,\n      seconds: 0,\n    },\n    init() {\n      this.text = formatTime(this.time);\n    },\n    start() {\n      this.interval = setInterval(() => {\n        const time = calculateTime(this.time);\n        this.time = time;\n        if(time.minutes === 0 && time.seconds === 0) {\n          this.stop();\n        }\n        this.text = formatTime(time);\n      }, 1000);\n    },\n    stop() {\n      clearInterval(this.interval);\n      this.interval = null;\n      this.time = {\n        minutes: 25,\n        seconds: 0,\n      }\n      this.text = formatTime(this.time);\n    },\n    pause() {\n      clearInterval(this.interval);\n      this.interval = null;\n    }\n  }\n}\n```\n\n> You need AlpineJS needed for this. You can load it from a [CDN](https://cdn.jsdelivr.net/gh/alpinejs/alpine@v1.9.5/dist/alpine.js)\n\n# Picture in Picture\n\nAs a sidenote, let us talk about Picture in Picture (This is where we are going at the end, but still).\n\nGoogle Developers pages have some [great tutorials](https://developers.google.com/web/updates/2018/10/watch-video-using-picture-in-picture) on picture in picture.\n\nBut by essence, you can request a video to play picture in picture with:\n\n```javascript\nconst videoEl = document.querySelector(\"#video\");\nvideoEl.requestPictureInPicture();\n```\n\nYou can see if a device supports Picture in Picture with:\n\n```javascript\nif (!(\"pictureInPictureEnabled\" in document)) {\n  console.log(\"The Picture-in-Picture Web API is not available.\");\n} else if (!document.pictureInPictureEnabled) {\n  console.log(\"The Picture-in-Picture Web API is disabled.\");\n}\n```\n\n## Bringing Canvas into the Picture\n\nHow do we bring the canvas into this? Well, Chrome allows for any video to play Picture in Picture and luckily for us, Canvas comes with a [captureStream](https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/captureStream) API that allows us to capture any stream on a canvas and capture it on video all in real time.\n\nHere is how we would do that:\n\n```javascript\nconst canvas = document.createElement(\"canvas\");\n// Draw something to canvas.\ncanvas.getContext(\"2d\").fillRect(0, 0, canvas.width, canvas.height);\n\nconst video = document.createElement(\"video\");\nvideo.muted = true;\nvideo.srcObject = canvas.captureStream();\nvideo.play();\n```\n\n## All Together now\n\n\u003Ciframe\n  height=\"300\"\n  style={{ marginTop: \"2rem\", width: \"100%\" }}\n  scrolling=\"no\"\n  title=\"Pomodoro Clock in PiP\"\n  src=\"https://codepen.io/BoyWithSilverWings/embed/preview/qBEwrbJ?height=300&theme-id=32843&default-tab=result\"\n  frameborder=\"no\"\n  allowtransparency=\"true\"\n  allowFullScreen={true}\n>\n  \u003Cspan>See the Pen \u003C/span>\n  \u003Ca href=\"https://codepen.io/BoyWithSilverWings/pen/qBEwrbJ\">\n    \u003Cspan>Pomodoro Clock in PiP\u003C/span>\n  \u003C/a>\n  \u003Cspan>by Boy with Silver Wings\u003C/span>\n  \u003Ca href=\"https://codepen.io/BoyWithSilverWings\">(@BoyWithSilverWings\")\u003C/a>\n  \u003Cspan>on \u003C/span>\n  \u003Ca href=\"https://codepen.io\">CodePen\u003C/a>.\n\u003C/iframe>","src/content/blog/pomodoro-on-pip.mdx","b6168cf42f10e692","preact-cli-with-typescript",{"id":422,"data":424,"body":431,"filePath":432,"digest":433,"deferredRender":20},{"title":425,"date":426,"tags":427,"published":20},"Configuring Preact CLI with Tailwind CSS","2019-11-23T08:12:03.284Z",[31,428,429,430],"preactjs","tailwindcss","preact cli","[Tailwind CSS](https://tailwindcss.com/) is a utility first CSS framework for building custom web designs.\n\nThe utility consists of a lot of CSS classes and is usually configured via [PostCSS](https://postcss.org/) to include these class names and styles into the project.\n\nHere, we will look at how to go about this configuration on a project generated with [Preact CLI](https://github.com/preactjs/preact-cli).\n\n## Step 1\n\nSetup Preact CLI project\n\n```bash\nnpx preact-cli create default my-project\n```\n\n## Step 2\n\nInstalling Tailwind CSS.\n\n```bash\nnpm i tailwindcss\n\n# OR\n\nyarn add tailwindcss\n```\n\n## Step 3\n\nConfiguring PostCSS loader to use Tailwind.\n\nPreactCLI default setup already uses PostCSS and to keep using the same loaders we have to modify the existing configuration. Fortunately for us, this is pretty easy with Preact CLI.\n\nCreate a `preact.config.js` at the root of your application.\n\nPreact CLI exposes a bunch of helper functions to help us manipulate the configuration and here we will use [`getLoadersByName`](https://github.com/preactjs/preact-cli/blob/master/docs/webpack-helpers.md#getloadersbyname) to access all instances of PostCSS loader in the configuration.\n\n```js\nmodule.exports = (config, env, helpers) => {\n  const postCssLoaders = helpers.getLoadersByName(config, \"postcss-loader\");\n  postCssLoaders.forEach(({ loader }) => {\n    const plugins = loader.options.plugins;\n\n    // Add tailwind css at the top.\n    plugins.unshift(require(\"tailwindcss\"));\n  });\n  return config;\n};\n```\n\nNow that Tailwind is added to the PostCSS configuration, you can follow the Step 2 and Step 3 on [Getting Started](https://tailwindcss.com/docs/installation/) page on Tailwind site to start using the classes.\n\n## Step 4\n\nTailwind by adding all utilities adds too much of size onto your project, especially when you might not be using half of it. This is where the magic with [PurgeCSS](https://www.purgecss.com/) comes into picture.\n\nAdding purge css as a postcss plugin helps us get rid of styles that we are _not_ using on our project, essentially _purging_ them.\n\n```\nnpm i @fullhuman/postcss-purgecss --save-dev\n\n# OR\n\nyarn add @fullhuman/postcss-purgecss --dev\n```\n\nTo add to your `preact.config.js`:\n\n```js\nmodule.exports = (config, env, helpers, params = defaultParams) => {\n  const purgecss = require(\"@fullhuman/postcss-purgecss\")({\n    // Specify the paths to all of the template files in your project\n    content: [\"./src/**/*.js\"],\n\n    // Include any special characters you're using in this regular expression\n    defaultExtractor: (content) => content.match(params.regex) || [],\n  });\n\n  const postCssLoaders = helpers.getLoadersByName(config, \"postcss-loader\");\n  postCssLoaders.forEach(({ loader }) => {\n    const plugins = loader.options.plugins;\n\n    // Add tailwind css at the top.\n    plugins.unshift(require(\"tailwindcss\"));\n\n    // Add PurgeCSS only in production.\n    if (env.production) {\n      plugins.push(purgecss);\n    }\n  });\n  return config;\n};\n```\n\nPurgeCSS plugin code and explanation is provided on the [docs for Tailwind](https://tailwindcss.com/docs/controlling-file-size).\n\n> And we are done. ðŸ¥³\n\n# Wait.. What if you can skip all the steps and use a plugin instead?\n\n```bash\nnpm i preact-cli-tailwind --save-dev\n\n# OR\n\nyarn add preact-cli-tailwind --dev\n```\n\nIn your preact.config.js:\n\n```js\nconst tailwind = require(\"preact-cli-tailwind\");\n\nmodule.exports = (config, env, helpers) => {\n  config = tailwind(config, env, helpers);\n  return config;\n};\n```\n\nYou can find the [docs and plugin on Github](https://github.com/agneym/preact-cli-tailwind) .","src/content/blog/preact-cli-with-typescript.mdx","29a995a74b31298b","react-avatar",{"id":434,"data":436,"body":443,"filePath":444,"digest":445,"deferredRender":20},{"title":437,"date":438,"tags":439,"published":20},"React - Avatars and Avatar Groups","2020-03-25T22:12:03.284Z",[96,440,441,442],"avatar","avatar group","auto contrast","Avatar components are a huge part of our pages nowadays. From homepages to profile, the proliferation of round avatars everywhere. What would be the challenges of just adding an image in place?\n\n1. Images take time to load, the space would be empty till then. This also means the layout _jumps_ around when the image loads (if size was not explicitly specified beforehand)\n1. There might be faulty links with unprocessed images and these end up with a nasty broken image.\n1. Text based avatars are easy to create but hard to maintain consistency.\n1. When text in avatars is too long, it breaks the design down.\n1. If you are choosing from lots of different colors, then the reading contrast for text fallbacks becomes an issue.\n1. Stacking multiple images together.\n1. Ensuring consistency across many different use cases.\n\nI'm open sourcing a component that I have been using to work around these issues:\n\n```bash\nnpm install @agney/react-avatar\n# OR\nyarn add @agney/react-avatar\n```\n\nCurrently it requires React 16.8 or above and Styled Components v4 or above.\n\n> Styled Components is a dependency that I'm actively trying to abstract out.\n\n## Features âœ¨\n\n1. Ability to render image avatar or text avatar as circle or square.\n1. Ability to render text based fallbacks for images for the time they take to load or error.\n1. Renders text based avatars and backgrounds based on text passed in.\n1. Autoscales text if it doesn't fit the container width.\n1. Automatically determines readable text color depending on background.\n1. Exposes a hook to use/generate gravatar for a user.\n1. Exposes a context so you can configure avatar components across your application.\n\n## Usage\n\n```javascript\nconst App = () => {\n  return (\n    \u003CAvatar\n      src=\"https://gravatar.com/avatar/7c4ff521986b4ff8d29440beec01972d?s=400&d=robohash&r=x\"\n      text=\"CM\"\n    />\n  );\n};\n\nexport default App;\n```\n\nFor full documentation, visit [Github Repository](https://github.com/agneym/react-avatar)\n\n[Storybook for Demos](https://agneym.github.io/react-avatar/?path=/docs/)\n\n> Follow me on [Twitter](https://twitter.com/agneymenon) for updates.","src/content/blog/react-avatar.mdx","4777271c1829873a","react-children-count",{"id":446,"data":448,"body":454,"filePath":455,"digest":456,"deferredRender":20},{"title":449,"date":450,"tags":451,"published":20},"Counting React Children","2020-06-24T22:12:03.284Z",[96,452,453],"children","count","`Children.count()` and `Children.toArray().length` have different outputs. We are going to explore how and why.\n\nConsider a React component:\n\n```javascript\nfunction Wrapper({ children }) {\n  const count = Children.count(children);\n  const countArray = Children.toArray(children).length;\n  return (\n    \u003Csection>\n      \u003Cp>\n        \u003Cpre>Children.count:\u003C/pre>\n        {count}\n      \u003C/p>\n      \u003Cp>\n        \u003Cpre>Children.toArray:\u003C/pre>\n        {countArray}\n      \u003C/p>\n      {children}\n    \u003C/section>\n  );\n}\n\nexport default Wrapper;\n```\n\nNow, to render this component we are giving it:\n\n```javascript\n\u003CWrapper>\n  \u003Ch1>Hello CodeSandbox\u003C/h1>\n  \u003Ch2>Start editing to see some magic happen!\u003C/h2>\n\u003C/Wrapper>\n```\n\nNow, both counts listed in the UI would point to 2. What about if we change the Wrapper children to:\n\n```javascript\n\u003CWrapper>\n  \u003Ch1>Hello CodeSandbox\u003C/h1>\n  {false && \u003Ch2>Start editing to see some magic happen!\u003C/h2>}\n\u003C/Wrapper>\n```\n\nNow, `Children.count` will report 2 while `Children.toArray().length` will report 1.\n\nThis is because `Children.count` is counting the number of slots that children has. Whether it be `false`, `null` or `undefined`, it's still a slot and `Children.count` does a good job of counting it. From the docs:\n\n> number of times that a callback passed to `map` or `forEach` would be invoked.\n\n`Children.toArray` on the other hand, converts Children it receives to an opaque structure containing only the elements that JSX can render. That's how it reports that there is only a single child inside `Wrapper`, the other one is conditionally false.\n\nYou often see people try to weed out invalid children using this property. For eg. [Chakra UI](https://github.com/chakra-ui/chakra-ui/blob/master/packages/utils/src/react-helpers.ts#L49-L59)\n\n```javascript\n/**\n * Gets only the valid children of a component,\n * and ignores any nullish or falsy child.\n *\n * @param children the children\n */\nexport function getValidChildren(children: React.ReactNode) {\n  return React.Children.toArray(children).filter((child) =>\n    React.isValidElement(child),\n  ) as React.ReactElement[]\n}\n```\n\nHere's a `Children.count` usage example from [Ant Design](https://github.com/ant-design/ant-design/blob/7212a9746d9f21933fda26cac21f81604da3738b/components/carousel/index.tsx#L52-L56):\n\n```javascript\ncomponentDidUpdate(prevProps: CarouselProps) {\n  // If the number of Children (even if something was conditionally rendered) has changed, then go to the first slide.\n  if (React.Children.count(this.props.children) !== React.Children.count(prevProps.children)) {\n    this.goTo(this.props.initialSlide || 0, false);\n  }\n}\n```\n\nHave fun ðŸŽ‰","src/content/blog/react-children-count.mdx","e6bdaee7a3008a8b","promises-js-concepts",{"id":457,"data":459,"body":464,"filePath":465,"digest":466,"deferredRender":20},{"title":460,"date":461,"tags":462,"published":20},"Promises - JavaScript concepts","2019-12-10T22:12:03.284Z",[31,31,344,463],"concepts","This is part of a series where I try to explain through each of [33 JS Concepts](https://github.com/leonardomso/33-js-concepts).\n\nThis part corresponds to Promises.\n\n## Background\n\nJavaScript is a single threaded language, which means it can work on only one thing at once.\n\nI'm sure this sounds great, there are no multiple pathways to worry about. But there is another thing we need to be keep in mind. There is a UI thread that is always running in the browser that needs to be responsive at all times. If JavaScript is focused at the UI thread, who would fetch the data from APIs?\n\nI would go into explaining how, but [Philip Roberts does an incredible job in his JSConf Talk](https://www.youtube.com/watch?v=8aGhZQkoFbQ).\n\nSo JavaScript needs to process some stuff _asynchronously_, without disturbing the single thread. You want to call an API?\n\n1. Make the API call\n1. Let the API call complete on the browser thread.\n1. Let the browser come back to you with the result.\n1. Process the result.\n\nPromises are one (easy) way for achieving Step 4, writing code that come back to a line and process the result from a given statement.\n\n## What is a Promise?\n\nA promise is essentially a special object (just like functions are objects) that has a `then` method on it which is called when an asynchronous operation completes.\n\nWhile we can define our own promises, most of the time we will be working with promises that is returned from an inbuild function or a third party library. First, let's look at how this operates.\n\n```javascript\nfetch(\"https://pokeapi.co/api/v2/pokemon/ditto\")\n  .then((response) => console.log(response))\n  .catch((error) => console.error(error));\nconsole.log(\"this comes first though\");\n```\n\nHere, we are using the in-build [fetch](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API) API to call the PokeAPI and get the results. The implementation would be the same even if you use [axios](https://github.com/axios/axios) or a GraphQL Client.\n\nThe fetch API returns a Promise object on which you can call `.then` and `error`, the function passed to `then` is called when the `fetch` is completed, `catch` is called if it errors out. Remember that the `fetch` goes to a microqueue and the next line will be executed afterwards, the `then` or `error` callback is called only when the other things finish executing (and the fetch obviously).\n\n## No, you Promise.\n\nSo, how do we create our own functions based on promises?\n\n```javascript\nfunction serveDish() {\n  return new Promise((resolve) => {\n    // An asynchronous function that gives you the dish back with a callback.\n    createDish(function (error, dish) {\n      if (error) {\n        throw error;\n      }\n      resolve(dish); // completed the operation and resolved the promise.\n    });\n  });\n}\n```\n\nThe constructor `new Promise` helps you create new Promises yourself. You might want to do this if you want to convert something that works by callbacks to a Promise. Or even just create one so that it executes asynchronously. If the promise runs into an error, you can just throw a `Error` and then `catch` the same at the other side.\n\n**The other side:**\n\n```javascript\nserveDish()\n  .then((dish) => console.log(\"Here's your dish\", dish))\n  .catch((err) => console.error(\"Things burned because of \", err));\n```\n\n## What happens then?\n\nYou can pass a callback to to `then` that receives the response of `resolve` from the `Promise` creation as we have already seen.\n\n## Let's chain some promises\n\nBut the real promise of `Promises` lies in the fact that you can chain them.\n\n```javascript\nlearnCooking()\n  .then((recipes) => createDish(recipes))\n  .then((dish) => inviteNeighbours(dish))\n  .then((dish) => serveDish(dish))\n  .then((servedDish) => getFeedback(servedDish))\n  .catch((err) => console.error(\"Something went wrong! ðŸ”¥\"));\n```\n\nThis is called chaining of promises, you can chain any number of promises you want as long as you return a promise from the then before. This is very easy than it seems because primitives are automatically converted to promises. If you want to convert something to promise explicitly, you can always:\n\n```javascript\nPromise.resolve(41);\n```\n\n## Lots of Promises to keep.\n\nSo far, we saw how we can handle a single promise and chain the results from these. But what if there are different promises and you need to wait for all of them to complete before you can execute? This is where `Promise.all` comes into play.\n\nFor eg. you have made multiple dishes studying the recipes.\n\n```javascript\nconst dishes = [\"names\", \"of\", \"your\", \"favorite\", \"dishes\", \"go\", \"here\"];\n\n// map returns the promise and forms dishesPromise array\nconst dishesPromise = dishes.map((dish) => createDish(dish));\n\n// You want to wait for all dishes to complete cooking before you invite neighbours\nPromise.all(dishesPromise).then((dishes) => inviteNeighbours(dishes));\n```\n\n`Promise.all` takes an array of promises as arguments and the `then` on it, is executed when all of them completes. The argument to `then` callback has an array of results from all the promises.\n\nWhile `Promise.all` is the most used, there also other methods that help you handle multiple promises and take actions accordingly. [Find all of them at MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise#Methods)\n\n### Note\n\nThere is a second argument to `then` that has been neglected for the purpose of this article. It returns the result when a Promise is rejected. It is seen very infrequently, if you would like to reject a promise, it is always better to throw an error as the end user can chain promises and `catch` all the errors with a single catch block. Adding multiple functions to `then` is confusing.\n\n> Find me on [Twitter](https://twitter.com/agneymenon)","src/content/blog/promises-js-concepts.mdx","b7f42bcc67a1c3ef","remark-to-mdx",{"id":467,"data":469,"body":476,"filePath":477,"digest":478,"deferredRender":20},{"title":470,"date":471,"tags":472,"published":20},"Transitioning from Remark to MDX","2019-01-27T22:12:03.284Z",[357,473,474,475],"remark to mdx","moving to use mdx","transition from remark to mdx","Moving my blog from Remark to MDX.\n\n## Why?\n\n[MDX](https://github.com/mdx-js/mdx) means that you can use JSX components in your markdown.\n\nThis means that blog posts down the road can have any type of content. Embed tweets, iframes without wandering around for a remark plugin, use live, editable snapshots, provide beautiful chart based visualisations, showcase some animations, bounded only by imagination (instead of remark plugins)\n\n## How?\n\n1. Start with installing `mdx` on your project with:\n\n```bash\nnpm install @mdx-js/mdx @mdx-js/tag\n```\n\n2. Add to it the `gatsby` plugin for `mdx`:\n\n```\ngatsby-mdx\n```\n\n3. Add the plugin to `gatsby-config.js`\n\n```js\nplugins: [\n  {\n    resolve: `gatsby-mdx`,\n    options: {\n      defaultLayouts: { default: path.resolve(\"./src/components/layout.js\") },\n    },\n  },\n];\n```\n\n4. Change the `gatsby-node` page generation algorithm for `mdx`:\n   1. Redo the query to:\n\n```js\n  {\n-    allMarkdownRemark {\n+    allMdx {\n  }\n```\n\n2. Getting the data from query, use:\n\n```js\nresult.data.allMdx.edges;\n```\n\n3. Inside the function `onCreateNode`, when checking for `node.internal.type`:\n\n```js\nif (node.internal.type === `Mdx`) {\n```\n\n4. At the places where you get data, (the listing page and blog post page),\n   repeat Step 2.\n\n```js\n  {\n-    allMarkdownRemark {\n+    allMdx {\n  }\n```\n\n## What about remark plugins? Can I still use them?\n\nSure you can. That's the beauty.\n\nGatsby MDX provides an option for `gatsbyRemarkPlugins` to be included. You can use it like:\n\n```js\noptions: {\n  defaultLayouts: {\n    default: path.resolve('./src/templates/blog-post.js'),\n  },\n  gatsbyRemarkPlugins: [\n    {\n      resolve: `gatsby-remark-images`,\n      options: {\n        maxWidth: 590,\n        showCaptions: true,\n      },\n    },\n    {\n      resolve: `gatsby-remark-external-links`,\n    },\n  ]\n}\n```\n\nCaution: It does not work with the \\`\\` format just yet. So you will always have to use an object with `resolve` key to put it in there.\n\nNow, you can rename all files to `mdx` and restart the server.\n\n### ðŸŽ‰ðŸŽ‰ We are Done. Just like that.\n\n## Getting syntax errors in the existing blog.\n\nI got lots and lots.\n\n```bash\nSyntaxError: unknown: Expected corresponding JSX closing tag for \u003Cimg>\n```\n\nIf you were using Github flavored markdown before, there are chances that you were embedding some JSX earlier. But the transition to MDX means that all that is going to be treated as JSX from now and rules for JSX applies.\n\nImages are `\u003Cimg />` and not `\u003Cimg>`\n\nOnce this is fixed, you can restart the server (I had to delete the cache and try too)\n\n## How is the experience so far?\n\nNot so good. But I'm hoping for it to get better.\n\nThere were several times during this when I had to stop and start the server to have it working. Worse, there were times when deleting the cache and restarting was the only way to fix the issue.\n\nMDX isn't very good at errors either. If you make an import error, which you will obviously do, MDX throws a cryptic error (with bright red background) and you have to restart the server to make it go away.\n\nThe editor support is not very good. Unlike remark, there is no output directly from VS Code. You can install the MDX language support to get more syntax highlighting. But it might stop working when there is a space or tab extra. So barely working! Because of the support, writing articles becomes a pain with editor showing off unnecessary suggestions when typing.\n\nI'm also moving from `remark-prismjs` to `prism-react-renderer` now that I can write JSX components. That has been smooth and hope to have more customisations working on how code is being shown. There has been a bug bothering me, with `prism-react-renderer` and `mdx` renderer not allowing any blank lines in between code. Currently that is hotfixed with spaces on those lines, but that is not going to be pretty to copy. Have to get that fixed.\n\nIs there something I missed? Something wrong? Something good? Ping me on [Twitter](https://twitter.com/agneymenon)","src/content/blog/remark-to-mdx.mdx","22c9b419fc8143d2","replacing-sc-with-goober",{"id":479,"data":481,"body":486,"filePath":487,"digest":488,"deferredRender":20},{"title":482,"date":483,"tags":484,"published":20},"Replacing Styled Components with a 1KB alternative Goober","2020-02-12T22:12:03.284Z",[178,96,31,485],"goober","[Styled Components](https://www.styled-components.com/) and [EmotionJS](https://emotion.sh/) are two of the most popular CSS-in-JS libraries for the React land. But both of these do come with a cost, anywhere between 10KB to 20KB is how much any of these libraries would add to the your bundle.\n\nWhat if we could replace the same with a 1KB library? That is the promise of [GooberJS](https://github.com/cristianbote/goober) that uses the same `styled(element)` paradigm styled-components and emotion popularised but at much lesser size.\n\nGoober does this by utilising a [custom pragma pattern](https://www.gatsbyjs.org/blog/2019-08-02-what-is-jsx-pragma/) which is already used in cases like the [`css` prop in emotion](https://emotion.sh/docs/css-prop#jsx-pragma) or [`sx` prop in ThemeUI](https://theme-ui.com/guides/jsx-pragma/).\n\n> TLDR; JSX Pragma is a way of customising how JSX is compiled to React elements (`React.createElement`) and adding our own thing in there.\n\n## Installation\n\nYou can install GooberJS with npm or yarn:\n\n```bash\nnpm install goober\n# or\nyarn add goober\n```\n\n## Usage\n\nFirst, we have to set the pragma to match:\n\n```js\nsetPragma(createElement);\n```\n\nNote that this has to be performed only once in the whole application and would probably go in `index.js` file in your application.\n\n### How do I styled an HTML element?\n\n```jsx\n// It's a named export\n// Notice the parathesis.\nconst Title = styled(\"h1\")`\n  font-size: 2rem;\n  color: maroon;\n`;\n\nfunction Header() {\n  return (\n    \u003Cheader>\n      \u003CTitle>Goober\u003C/Title>\n    \u003C/header>\n  );\n}\n```\n\nGoober also supports nesting and SASS like `&:hover` kind pseudo selectors as it's predecessors. You can also add media templates inside styled components to make it work.\n\n## How do I customise it with props?\n\n```jsx\nconst Title = styled(\"h1\")`\n  font-size: 2rem;\n  color: ${(props) => props.textColor};\n`;\n\nfunction Header() {\n  return (\n    \u003Cheader>\n      \u003CTitle textColor=\"red\">Goober\u003C/Title>\n    \u003C/header>\n  );\n}\n```\n\n## How do I extend a component?\n\n```jsx\nconst Title = styled(\"h1\")`\n  font-size: 2rem;\n  color: ${(props) => props.textColor};\n`;\n\nconst LargeTitle = styled(Title)`\n  font-size: 4rem;\n`;\n\nfunction Header() {\n  return (\n    \u003Cheader>\n      \u003CTitle textColor=\"red\">Goober\u003C/Title>\n    \u003C/header>\n  );\n}\n```\n\n## Global Styles?\n\nGoober exposes `glob` function for this. It is not to be imported/used anywhere else, just using this function would add the global styles as necessary.\n\n```jsx\nglob`\n  body {\n    margin: 0;\n  }\n`;\n```\n\nI do feel that styled components API did it better here with the `createGlobalStyle` function. But if you have been with the project for long, you will know this is how it started off.\n\n## Missing `styled.tag`?\n\nIf you are feeling attached to `styled.tag` format from Styled Components, Goober team has a babel plugin that can help so that you can keep writing `styled.tag` but the plugin will convert the references for you.\n\n```bash\nnpm i --save-dev babel-plugin-transform-goober\n# or\nyarn add --dev babel-plugin-transform-goober\n```\n\n# What's pending now?\n\n- Goober does not automatically prefix styles as of now, but they are proactively working on it.\n- Goober does not support theming at the moment. [Here is the PR](https://github.com/cristianbote/goober/pull/76) they are working on.\n\nBut this should not discourage you from using theming at all. You can always fallback to using CSS variables (or create a Theme Context and work with it if you miss JavaScript theming)\n\nHere is a kitchen sink of everything mentioned in this article: [CodeSandbox](https://codesandbox.io/s/react-goober-lc4g6)","src/content/blog/replacing-sc-with-goober.mdx","0bed471f83e479fc","right-stale-time",{"id":489,"data":491,"filePath":498,"digest":499,"deferredRender":20},{"title":492,"date":493,"tags":494,"published":497},"Tanstack Query - What's the right stale time for your app","2025-06-12T22:12:03.284Z",[495,496],"tanstack query","stale time",false,"src/content/blog/right-stale-time.mdx","9a4f99b06f815048","roasting-your-non-accessible-websites",{"id":500,"data":502,"body":508,"filePath":509,"digest":510,"deferredRender":20},{"title":503,"date":504,"tags":505,"published":20},"Roasting your Non Accessible Websites - React India 2023","2023-12-12T22:12:03.284Z",[31,506,507],"accessibility","talk","I was at React India 2023 and gave a talk on accessibility. I'm not actually roasting anyone here but weird patterns that I find on actual websites and pull requests. I hope you enjoy it!\n\n\u003Ciframe\n  width=\"560\"\n  height=\"315\"\n  src=\"https://www.youtube.com/embed/eZHVy3Bsnkg?si=Uk7U_fl-jdjDJZRx\"\n  title=\"YouTube video player\"\n  frameborder=\"0\"\n  allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\"\n  allowfullscreen\n>\u003C/iframe>","src/content/blog/roasting-your-non-accessible-websites.mdx","9d94109d6cfe4637","scopes-and-closures",{"id":511,"data":513,"body":520,"filePath":521,"digest":522,"deferredRender":20},{"title":514,"date":515,"tags":516,"published":20},"Scopes and Closures","2019-02-15T22:12:03.284Z",[517,518,31,519,44],"scopes","closure","types","This is part of a series where I try to explain through each of [33 JS Concepts](https://github.com/leonardomso/33-js-concepts).\n\nThis part corresponds to the Scopes and Closures.\n\n## Scope\n\n### What is scope of a variable?\n\nScope in programming stands for visibility and usage. For reasons considered obvious (but ones that we will still discuss), we cannot allow all variables in our program to be global. Scope is what limits the variable to used across certain limits and boundaries.\n\n### Why scope variables?\n\n#### 1. Collision Avoidance\n\nWe cannot declare two variables with the same name. This would throw a reference error.\n\n```js\nvar length = 1;\n// some operation going on, after sometime you think\nvar length = 1; // Nope!`}\n```\n\nBut we absolutely cannot not use the same variables for different purposes. If there are no boundaries, it becomes confusing for people who read your code. This becomes more problematic when there are lots of people on the team. How does anyone know if someone else has already declared the variable?\n\nClear boundaries on where you can access a variable makes it easier for all developers in the project to avoid conflcits.\n\n#### 2. Garbage Collection\n\nWhen we complete the usage of a variable, we want the variable and the data it is holding to be garbage collected. In dynamic languages, we expect this to happen automatically. But if we don't have any boundaries on where the variable can be accessed it would happen that the compiler does not have any hint on when to collect the garbage. Except may be at the end.\n\nHaving clear boundaries on where variables can be accessed can tell the compiler, that at the end of this scope it is safe to garbage collect these variables.\n\n### 3. Ownership\n\nIf all our variables are global, it means that anyone can change them.\n\nFor eg. in one of the maintanence projects I had to make a [Custom Event](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent) to broadcast an event to another part of the application itself. But whatever I did, I could not get the custom event to fire. What happened was that someone else had already declared a class named `CustomEvent` (they wanted to customise the `Event` class, so be it!) on the global window and it was overriding my interpretation. Except the other person (git blame) who did it, did not even know that a function named `CustomEvent` actually existed in JavaScript.\n\nImagine this happening to your variables, randomly at runtime. This is what happens if we do have some sort off ownership for the variables and functions that we write.\n\nJavaScript has two kinds of scope:\n\n1. Block Scope\n2. Function Scope\n\nWe will talk about function scope first.\n\n### Function Scope\n\nFunction Scope means that any variable declared would be available inside the function. This has existed and was widely used from olden times in JavaScript.\n\n```js\nfunction action() {\n  var a = 2;\n  ... // actions\n  // a can be accessed anywhere in this function.\n}\n```\n\n#### Hoisting\n\nWherever you declare a variable, JavaScript would proceed to hoist these upto the top of their scope. But let us be semantically correct here. JavaScript does not move the variables physically all your code remains the same. The compiler just picks the variables in it's current scope and declares them in compiler time with the value `undefined`.\n\n\u003CPlayground\n  id=\"hoisting\"\n  defaultEditorTab=\"javascript\"\n  defaultResultTab=\"console\"\n  initialSnippet={{\n    markup: ``,\n    css: ``,\n    javascript: `function init() {\n  console.log(a);\n  var a = 1;\n}\n \ninit();\n    `,\n  }}\n/>\n\nThis is how you can access a variable before declaration and get `undefined` as an answer.\n\nYou don't have to be afraid of hoisting. In fact hositing is what helps you when declaring functions in whichever order you want. Since the compiler would hoist it to the top anyway, it does not matter which order you declare it in. But with variables declared with `var`, it is important to write short precise functions.\n\nAlso, note that only declarations are hoisted, they would not take any value if used before initialisation.\n\n### Block Scope\n\nThis is widely used from ES6. Block refers to a `{}` in a program.\n\nBlock Scope means that the variables defined inside a `{}` can only be used inside it. Variables can be put in block scope by declaring them with `let` or `const`.\n\nNote that functions also form block scope.\n\n```js\nfunction action(limit) {\n  const a = 10; // a can only be used inside this function\n  if (a \u003C limit) {\n    const b = a + 2; // b can only be used inside this if block, a can also be used here as this block is inside the execution context of a's block\n    return b;\n  }\n}\n```\n\n#### Hoisting\n\nDoes hoisting happen in Block Scope? Yes. But if we try and use a variable before it's actual declaration, we get a `ReferenceError`.\n\n_That does not make any sense. If they are hoisted, shouldn't they be undefined?_\n\nTo get ahead of this question, JavaScript spec defines something known as a Temperal Dead Zone (TDZ). This is the difference of when it is memory (remember: Hoisting is just compiler putting variable declarations in memory) and it's actual declaration in code. When a block scoped variable in TDZ is accessed, it throws a `ReferenceError`.\n\n## Closures\n\nJavaScript is a language that treats functions as [first class citizens](https://developer.mozilla.org/en-US/docs/Glossary/First-class_Function). This is a part and parcel of the functional languages. Functions are just objects in JavaScript and they can be assigned to variables, pass them to functions or return them from functions itself.\n\nLet's look at these conditions one by one:\n\n1. Assigned to variables\n\n```js\nconst foo = function (a) {\n  return a++;\n};\n```\n\nHere function is assigned to variable `foo`, to invoke this function we have call `foo()`. `foo` here is a reference to the function and can be reassigned or assigned to some other variable.\n\n2. Pass them to functions\n\nWe just saw that functions can be assigned to variables. This is essentially an easy by product of the same. You can pass these references around as you would do with any other object.\n\n\u003CPlayground\n  id=\"pass-function\"\n  defaultEditorTab=\"javascript\"\n  defaultResultTab=\"console\"\n  initialSnippet={{\n    markup: ``,\n    css: ``,\n    javascript: `function inc(num) {\n  return num+1;\n}\nfunction counter(num, incFun) {\n  return incFun(num);\n}\nlet number = 1;\nnumber = counter(number, inc);\nconsole.log(number);\n// What happens on decrement action?\n`,\n  }}\n/>\n\nHere, you can see that `inc` is being passed into the `counter` function which in turn is invoking it. You might wonder why we have to take this approach instead of just calling `inc` directly from `counter`. The difference is that now we can control the factor of how much the `counter` is going to increment by from the outside. That is, we can pass another function that increments by 2 and Boom! we have a counter that adds by a factor of 2 instead of 1. We can do this without changing the function at all.\n\n> We are not invoking it when write `inc`, the incrementing is only when the brackets are attached to it.\n\n3. Return functions\n\nThis is going to be longer than the other ones, but bear with me here.\n\nWith the last example, we discussed how we can change the `counter` function by passing in different functions. Let us look at how we might achieve that result:\n\n\u003CPlayground\n  id=\"return-function-1\"\n  defaultEditorTab=\"javascript\"\n  defaultResultTab=\"console\"\n  initialSnippet={{\n    markup: ``,\n    css: ``,\n    javascript: `function inc(num) {\n  return num+1;\n}\nfunction incBy2(num) {\n  return num+2;\n}\nfunction counter(num, incFun) {\n  return incFun(num);\n}\nlet number = 1;\nnumber = counter(number, inc);\nconsole.log(number);\nnumber = counter(number, incBy2);\nconsole.log(number);\n`,\n  }}\n/>\n\nWe just created two functions: `inc` and `incBy2`. The first function increments by 1 and second increments by 2. But I guess we can agree that this is not the most elegant approach. If we had to create a function that adds by 3, then we would require a third function. How can we create a single function for this purpose?\n\nLet us look at the simplest approach first:\n\n\u003CPlayground\n  id=\"return-function-2\"\n  defaultEditorTab=\"javascript\"\n  defaultResultTab=\"console\"\n  initialSnippet={{\n    markup: ``,\n    css: ``,\n    javascript: `function inc(num, factor) {\n  return num+factor;\n}\nfunction counter(num, factor, incFun) {\n  return incFun(num, factor);\n}\nlet number = 1;\nnumber = counter(number, 1, inc);\nconsole.log(number);\nnumber = counter(number, 2, inc);\nconsole.log(number);\n`,\n  }}\n/>\n\nWell, this does the work. But this is breaking the expectation we had set for ourselves. The whole objective of passing a funtion to `counter` was the fact that `counter` did not need to know the factor which was being increment or any operation being performed. By passing `factor` into `counter`, we have broken that encapsulation. We need better ways to create dynamic functions that we can pass into `counter`.\n\n\u003CPlayground\n  id=\"return-function-3\"\n  defaultEditorTab=\"javascript\"\n  defaultResultTab=\"console\"\n  initialSnippet={{\n    markup: ``,\n    css: ``,\n    javascript: `function createInc(factor) {\n  return function(num) {\n    return num + factor;\n  }\n}\nfunction counter(num, incFun) {\n  return incFun(num);\n}\nlet number = 1;\nnumber = counter(number, createInc(1));\nconsole.log(number);\nnumber = counter(number, createInc(2));\nconsole.log(number);\n`,\n  }}\n/>\n\nIf this seems natural for you, then Congrats! ðŸŽ‰ðŸ¾ You have successfully understood closures. If it doesn't read on:\n\n`createInc` is a function that returns a function, let that sync in; A function that returns a function.\n\nWhat we have to be concerned here is the variable `factor` that is passed in. If you look of the [call stack](http://localhost:8000/call-stack/) of this program, you can see that `createInc` is added to the stack and is popped as soon as the function inside it is returned. But the returned function is still using `factor` in runtime. How is that retained?\n\nWhen a function is created, the function stores both it's local function and the context the function was created in. This context is known as the closure environment. A function when it is created, it stores the local variables and the closure scope it was created in. This closure scope is garbage collected only when the function itself is collected. This is part execution context of the function.\n\n## Does this change the way I write code?\n\nWell, it should. Scopes and Closures are some of the most integral cornerstones of the language. It can and should influence the way you think about the language and declarations.\n\nIs there something I missed? Something wrong? Something good? Ping me on [Twitter](https://twitter.com/agneymenon)","src/content/blog/scopes-and-closures.mdx","4ff825e7823ad9e4","sequelize-associations-fetch",{"id":523,"data":525,"body":531,"filePath":532,"digest":533,"deferredRender":20},{"title":526,"date":527,"tags":528,"published":20},"Sequelize Associations - Fetching Associations","2020-08-22T22:12:03.284Z",[31,529,530],"sequelize","associations","This blog exclusively deals with how to fetch associations in sequelize. Primary knowledge of NodeJS, Express and SequelizeJS is recommended.\n\n[Sequelize](https://sequelize.org/) is an Object relational library (ORM) that helps to communicate between database (Postgres, MySQL, MariaDB, SQLite and Microsoft SQL Server) and programming models on the NodeJS end.\n\nRefer to [Part 1 - Creating Associations](/sequelize-associations/) for a tutorial on how to create associations.\n\n## Associations Recap\n\nThere are three main types of associations that can be represented in Sequelize:\n\n- One to One relationship\n- One to Many relationship\n- Many to Many relationship\n\nAll three of these are fetched with similar semantics.\n\n## Fetch techniques\n\nSequlize offers two different ways to fetch associations of a model. These are:\n\n- Eager Loading\n- Lazy loading\n\n### Eager Loading\n\nThis technique is most used to fetch associations. Eager loading loads the associations and related models in a single request. To eager load, we can use `include` property in `find` clause.\n\nTo fetch `User` with `Profile` information:\n\n```javascript\nconst user = User.find({\n  include: {\n    model: Profile,\n  },\n});\n```\n\nIf `User` has `Profile` information, this will return data of the form:\n\n```javascript\n{\n  ...userProperties,\n  \"profile\": {\n    ...profileProperties,\n  }\n}\n```\n\nNote that `profile` is singular because they share a 1-1 relationship.\n\n**How do we select attributes to be returned?**\n\nJust like the normal `find` command, the `include` can have an `attributes` array including column names to be returned.\n\n```javascript\nconst user = User.find({\n  include: {\n    model: Profile,\n    attributes: [\"firstName\", \"lastName\"], // return only these columns\n  },\n});\n```\n\n**What if we need to go deeper? How do we fetch the Location model connected to Profile?**\n\nLet's nest it.\n\n```javascript\nconst user = User.find({\n  include: {\n    model: Profile,\n    include: {\n      model: Location,\n    },\n  },\n});\n```\n\n**What if we need a where clause on the association?**\n\nA `where` clause, you say.\n\n```javascript\nconst user = User.find({\n  include: {\n    model: Profile,\n    where: {\n      age: {\n        [Op.gt]: 18,\n      },\n    },\n  },\n});\n```\n\n**How to fetch only the users with profiles?**\n\nSequlize uses _Outer Joins_ by default. To turn it into an Inner Join (only if the associated model is also present):\n\n```javascript\nconst user = User.find({\n  include: {\n    model: Profile,\n    required: true,\n  },\n});\n```\n\nNote that the `where` clause that we specified in the last example automatically turns the query into an inner join.\n\n**What if it's not a 1-1 relationship?**\n\nThe plurality changes. The syntax remains the same, but the result with have a plural version of key name.\n\n```javascript\nconst userWithComments = User.find({\n  include: {\n    model: Comment,\n  },\n});\n```\n\nwill result in:\n\n```javascript\n{\n  ...userProperties,\n  \"comments\": [{\n    ...commentProperties,\n  }],\n}\n```\n\n**My association is aliased. How do I specify the alias?**\n\nYou can specify the alias with `as` keyword, similar to how you define it.\n\n```javascript\nconst userWithFavBooks = User.find({\n  include: {\n    model: Book,\n    as: \"FavBooks\",\n  },\n});\n```\n\n**How to get the junction table in case of Many-Many association?**\n\nThe junction table is automatically fetched by Sequelize when you fetch a Many-Many association.\n\nYou can apply other properties we mentioned like `where` clause using the `through` key.\n\n```javascript\nconst userWithFavBooks = User.find({\n  include: {\n    model: Book,\n    as: \"FavBooks\",\n    through: {\n      where: {\n        rating: {\n          [Op.gt]: 3,\n        },\n      },\n    },\n  },\n});\n```\n\n**Can we fetch multiple associations at once?**\n\nSure, let's turn `include` into an array.\n\n```javascript\nconst user = User.find({\n  include: [\n    {\n      model: Profile,\n    },\n    {\n      model: Comment,\n    },\n  ],\n});\n```\n\n### Lazy Loading\n\nLazy Loading makes use of Sequelize's ability to add functions to Models with it's associations.\n\nFor eg. If `User` and `Profile` are connected with 1-1 association, Sequelize automatically adds a function called `getProfile` to `User` and `getUser` to `Profile` (There are several functions like this, `addProfile`, `updateProfile` etc.)\n\n```javascript\nconst user = User.findOne({\n  where: {\n    id: 1,\n  },\n});\nlet profile = null;\nif (user.active) {\n  profile = user.getProfile();\n}\n```\n\nNote that it makes two database requests here, but the `Profile` information is fetched only if `User` found is active.\n\n---\n\nThere is a lot more to cover on creating these relationships like customising keys or changing how update or delete affects these relationships. I do plan to cover them, but [documentation](https://sequelize.org/master/manual/assocs.html) should be your best guide if you understand these relationships better.\n\nHave fun ðŸŽ‰","src/content/blog/sequelize-associations-fetch.mdx","04de70f968bea168","sequelize-associations",{"id":534,"data":536,"body":540,"filePath":541,"digest":542,"deferredRender":20},{"title":537,"date":538,"tags":539,"published":20},"Sequelize Associations - Creating Associations","2020-08-16T22:12:03.284Z",[31,529,530],"[Sequelize](https://sequelize.org/) is an Object relational library (ORM) that helps to communicate between database (Postgres, MySQL, MariaDB, SQLite and Microsoft SQL Server) and programming models on the NodeJS end.\n\nThis blog exclusively deals with how to setup associations in sequelize. Primary knowledge of NodeJS, Express and SequelizeJS is recommended.\n\n## Associations\n\nAn association (also called a relationship) models the way two classes are connected to each other.\n\nSequelize supports three types of associations between their models:\n\n- One to One relationship\n- One to Many relationship\n- Many to Many relationship\n\n## Implementation in relational databases\n\nRelational databases implement associations/relationships with the help of foreign keys.\n\n![User model with foreign key relation of profile_id to Profile model id](/blog/sequelize-associations/foreign-key.png)\n\nUser model contains a column `profile_id` which connects it to Profile model by referencing `id` column there. With SQL, you can use `JOIN` queries to retrieve information from associated Profile table when a User is fetched.\n\nAdding foreign keys also gives us control over actions to be taken when updating/deleting associated models.\n\n## Associations in Sequelize\n\nIn order to implement three of these standard associations, Sequelize provides us four APIs:\n\n- `hasOne` association\n- `belongsTo` association\n- `hasMany` association\n- `belongsToMany` association\n\nTo create associations, we have to use combinations of these together:\n\n- To create a One-to-One relationship, the `hasOne` and `belongsTo` associations are used together.\n- To create a One-to-Many relationship, the `hasMany` and `belongsTo` associations are used together.\n- To create a Many-to-Many relationship, two `belongsToMany` calls are used together.\n\nLet us explore each of these one by one.\n\nIn all examples below, `Book` and `User` are models that have already been defined. You can define a model with:\n\n```javascript\nconst User = sequelize.define(\"User\", {\n  name: {\n    type: DataTypes.STRING,\n  },\n});\n```\n\n[Docs](https://sequelize.org/master/manual/model-basics.html)\n\n### One to One relationship\n\n![Example of one to one relationship with User and Profile connected to each other](/blog/sequelize-associations/one-to-one.png)\n\nHere, User and Profile share a one to one relationship. A user has a profile and profile has a user associated with it.\n\n#### Creating a One to One association\n\nA One-to-One relationship could be in a likely scenario be merged back to a single table. So, this relationship is rarely used.\n\nTo create a one to one relationship we have to find the optional model in the relationship. In our example, `User` and `Profile` have a one-to-one relationship. Here User can exist without a Profile, but the vice versa is not possible.\n\nThis means, we will insert `userId` field to `Profile` model's table:\n\n```javascript\nUser.hasOne(Profile);\nProfile.belongsTo(User);\n```\n\ntranslated to SQL:\n\n```sql\nCREATE TABLE IF NOT EXISTS \"users\" (\n  /* ... */\n);\nCREATE TABLE IF NOT EXISTS \"profiles\" (\n  /* ... */\n  \"userId\" INTEGER REFERENCES \"users\" (\"id\") ON DELETE SET NULL ON UPDATE CASCADE\n);\n```\n\n### One to Many relationship\n\n![Example of one to many relationship with User and Commments connected to each other](/blog/sequelize-associations/one-to-many.png)\n\nHere user and comments share a one to many relationship. Each user can make multiple comments while each comment is associated with only a single user.\n\n#### Creating a One to Many relationship\n\nUnline 1-1 relationship there isn't a question of where to place the foreign keys here.\n\n```javascript\nUser.hasMany(Comment);\nComment.belongsTo(User);\n```\n\nThe foreign key `userId` is on each row of `Comment`\n\n### Many to Many\n\n![Example of many to many relationship with User and Books connected to each other](/blog/sequelize-associations/many-to-many.png)\n\nUser is marking down Books that he has read. Each user can mark as many books as they want, creating a many to many association between User and Books. Contrary to the earlier scenario with comments, a Book also can be connected to many number of Users.\n\nEach model involved in the relationship can be connected to multiple targets. But we cannot represent this relationship with a single foreign key on a model. If you're thinking array of foreign keys, that's ineffective to do joins on. Instead we use this concept called a Junction table; to borrow a diagram from Wikipedia:\n\n![Concept of a mapping table explained using actor and film tables joined by actor_film_mapping](https://upload.wikimedia.org/wikipedia/commons/d/d7/Mapping_table_concept.png)\n\nHere `actor_film_mapping` table is used as a junction table to link together actor and film tables.\n\nTo represent relationship in Sequelize:\n\n```javascript\nUser.belongsToMany(Book, {\n  through: \"UserBooks\",\n});\nBook.belongsToMany(User, {\n  through: \"UserBooks\",\n});\n```\n\n`UserBooks` representing the name of the junction table model.\n\nSequelize also allows you to specify a model instead of string and you can add your own columns to the junction table.\n\n```javascript\nconst UserBooks = sequelize.define(\"UserBooks\", {\n  userId: {\n    type: DataTypes.INTEGER, // given primary key is integer\n  },\n  bookId: {\n    type: DataTypes.INTEGER,\n  },\n  rating: {\n    type: DataTypes.INTEGER, // our own column added to the model\n  },\n});\nUser.belongsToMany(Book, {\n  through: UserBooks, // sequelize uses the UserBooks model instead of creating one.\n});\nBook.belongsToMany(User, {\n  through: UserBooks,\n});\n```\n\n## Aliasing an association\n\nSometimes, you end up having multiple relationships between entities, for example what if our Users could favorite Books too? As you can guess from the title, you can alias the relationship giving it a unique name.\n\n```javascript\nUser.belongsToMany(Book, {\n  through: FavBooks,\n  as: \"favorites\",\n});\nBook.belongsToMany(User, {\n  through: FavBooks,\n  as: \"favorites\",\n});\nUser.belongsToMany(Book, {\n  through: ReadBooks,\n  as: \"read\",\n});\nBook.belongsToMany(User, {\n  through: ReadBooks,\n  as: \"read\",\n});\n```\n\nThis is same in the case of all types of relationships.\n\n---\n\nThere is a lot more to cover on creating these relationships like customising keys or changing how update or delete affects these relationships. I do plan to cover them, but [documentation](https://sequelize.org/master/manual/assocs.html) should be your best guide if you understand these relationships better.\n\nHave fun ðŸŽ‰","src/content/blog/sequelize-associations.mdx","a83c439a36529e81","snowpack-community-plugin",{"id":543,"data":545,"body":552,"filePath":553,"digest":554,"deferredRender":20},{"title":546,"date":547,"tags":548,"published":20},"Writing a Snowpack Community Plugin","2020-06-24T10:12:03.284Z",[549,550,551],"snowpack","community","plugin","[Snowpack](https://www.snowpack.dev/) is a tool for building web applications with less tooling and 10x faster iteration. Snowpack comes with a starter generator called [Create Snowpack App](https://github.com/pikapkg/create-snowpack-app), it has official plugins for most of the frameworks.\n\nBut what if we wanted to build a custom community plugin?\n\n# Create Snowpack App (CSA)\n\nYou can use `create-snowpack-app` with:\n\n```\nnpx create-snowpack-app dir-name --template template-name\n```\n\nYou are excused if this feels familiar to [a popular react tool](https://create-react-app.dev/).\n\n# Community Starter\n\nA community starter is a repository that you get to maintain using Snowpack and published to NPM (or any of the other hosted services). You can initialise a new project using your template and CSA.\n\nIf your template is called `my-custom-template` and hosted to NPM, you would be able to use it with:\n\n```\nnpx create-snowpack-app dir-name --template my-custom-template\n```\n\nFirst, we will start with a basic template:\n\n```\nnpx create-snowpack-app my-custom-template --template @snowpack/app-template-blank\n```\n\nNow CSA will intialise a repository named `my-custom-template` that contains the snowpack template `@snowpack/app-template-blank`. Now you can proceed to make changes you want in the template.\n\n_I'm just choosing to start with `blank`, you can choose to start with any other [template](https://www.snowpack.dev/#official-app-templates)_\n\n## Add required fields\n\n1. It needs a name\n\nGive it a name in `package.json`, this is also your template name.\n\n```json\n{\n  \"name\": \"my-custom-template\"\n}\n```\n\nNote that this name needs to be unique in the NPM package registry. You can also scope it to something like `@npmuser@my-custom-template`, these are known as [scoped packages](https://docs.npmjs.com/about-scopes).\n\n2. It needs a version\n\nGive it a version.\n\n```json\n{\n  \"version\": \"0.0.1\"\n}\n```\n\n3. Add the keyword.\n\nCSA requires the template to have a specific keyword: `csa-template`.\n\n```json\n{\n  \"keywords\": [\"csa-template\"]\n}\n```\n\n## Publishing package to NPM\n\nThere are several articles and videos if you are not familar with publishing or haven't done this before. But the basic idea is:\n\n```bash\nnpm login\nnpm publish\n```\n\nYou can also use one of the several tools that help with this process. One of my absolute favorites is [np](https://www.npmjs.com/package/np).\n\n## Using the template\n\nYou can now use the template as mentioned with:\n\n```\nnpx create-snowpack-app dir-name --template my-custom-template\n```\n\nHave fun ðŸŽ‰","src/content/blog/snowpack-community-plugin.mdx","220bf6ea74aa382c","styled-components-and-typescript",{"id":555,"data":557,"body":563,"filePath":564,"digest":565,"deferredRender":20},{"title":558,"date":559,"tags":560,"published":20},"Styled Components & TypeScript - ðŸ˜","2019-12-07T22:12:03.284Z",[561,562,96],"styled-components","typescript","[Styled Components](https://www.styled-components.com/) happens to be one of my favorite CSS in JS libraries all time and have been part of almost all of my [ReactJS](https://reactjs.org/) projects.\n\nAs I'm transitioning most of my projects to include TypeScript, there are things I stumbled along, but there are things that feel perfect. Listing down some of them here.\n\n### 1. Installing the types\n\nStyled Components library does not ship with types. Instead we have to install it from the [Definitely Typed](https://github.com/DefinitelyTyped/DefinitelyTyped) repository.\n\n```bash\nnpm i --save-dev @types/styled-components\n```\n\n### 2. Custom props\n\nOne of the major advantages of using a CSS-in-JS solution is the ability to pass custom props on runtime and adapt CSS accordingly.\n\n```typescript\nconst Heading = styled.h1\u003C{ active: boolean }>`\n  color: ${(props) => (props.active ? \"red\" : \"blue\")};\n`;\n```\n\nJust as in JSX Elements, you can pass the generic type with `\u003C>` after the component. Now, your styled-component is typed and there would be a static error on the element if you have not passed `active` prop.\n\nTo use it for extending a component:\n\n```typescript\nconst Heading = styled(Title)\u003C{ active: boolean }>`\n  color: ${(props) => (props.active ? \"red\" : \"blue\")};\n`;\n```\n\nHowever, do note that `active` as a prop is being passed to the `Title` component even though it is not explicity said so. If someone adds an optional `active` prop to the component later, this might be problematic. To avoid this, you can refractor to:\n\n```typescript\nconst Heading = styled(({ active, ...rest }) => \u003CTitle {...rest} />)\u003C{\n  active: boolean;\n}>`\n  color: ${(props) => (props.active ? \"red\" : \"blue\")};\n`;\n```\n\nHowever, this syntax is obviously more convoluted and creates an extra component. Whether it is worth all the mess for uncovering an accidental prop is upto you.\n\n### 3. Typing the theme\n\nStyled Components has the ability to specify a theme with the help of `ThemeProvider`. You can later access the `theme` with `${props=>props.theme.main.something}`. Even if we avoid everything else, just the autocomplete from the theme object is worth doing this for.\n\nFrom the docs:\n\n> So the first step is creating a declarations file. Let's name it `styled.d.ts` for example.\n\n```typescript\n// import original module declarations\nimport \"styled-components\";\n\n// and extend them!\ndeclare module \"styled-components\" {\n  export interface DefaultTheme {\n    borderRadius: string;\n\n    colors: {\n      main: string;\n      secondary: string;\n    };\n  }\n}\n```\n\nBut manually typing the theme like this is pain, mainly because you have to edit two different files everytime you add or remove something from the theme object. Instead you can do:\n\n```typescript\nimport \"styled-components\";\n\ndeclare module \"styled-components\" {\n  type Theme = typeof theme;\n  export interface DefaultTheme extends Theme {}\n}\n```\n\nHere, we are making use of Typescript's type inference for our `theme` object to do it for us ðŸ™Œ.\n\n### 4. Making use of `css` prop\n\nThere are two `css` functions in the Styled Components documentation for some reason. Here I'm talking about the `css` attribute that can be used on an element when the [Babel plugin](https://www.styled-components.com/docs/tooling#babel-plugin) is enabled.\n\n```javascript\n\u003Cdiv\n  css={`\n    display: flex;\n  `}\n>\n  ...\n\u003C/div>\n```\n\nBut TypeScript is not aware of this `css` property and produces an error. I don't know about you, but those red lines do very well bother me ðŸ‘».\n\nTo get around this, you can add the following to the `styled.d.ts`:\n\n```typescript\nimport \"styled-components\";\ndeclare module \"react\" {\n  interface Attributes {\n    css?: CSSProp | CSSObject;\n  }\n}\n```\n\n### 5. Media templates\n\nThere is an easy for specifying media queries from the documentation, but while the syntax for it is user friendly, the implementation by itself is hard to reason about for TypeScript (and as it happens, for new users too).\n\nInstead I find myself using a much simpler alternative:\n\n```typescript\nconst customMediaQuery = (maxWidth: number) =>\n  `@media (max-width: ${maxWidth}px)`;\n\nconst media = {\n  custom: customMediaQuery,\n  desktop: customMediaQuery(922),\n  tablet: customMediaQuery(768),\n  phone: customMediaQuery(576),\n};\n\nconst Content = styled.div`\n  height: 3em;\n  width: 3em;\n  background: papayawhip;\n\n  /* Now we have our methods on media and can use them instead of raw queries */\n  ${media.desktop} {\n    background: dodgerblue;\n  }\n  ${media.tablet} {\n    background: mediumseagreen;\n  }\n  ${media.phone} {\n    background: palevioletred;\n  }\n`;\n\nrender(\u003CContent />);\n```\n\n[Courtesy](https://github.com/styled-components/styled-components/issues/2303#issuecomment-480047731)\n\n>\n\nThat one pain point I still have is about the `ref`. Adding a `ref` to a styled component still gives me an error, the same as it did [an year ago](https://spectrum.chat/styled-components/general/typescript-support-for-refs~76750641-e0de-4fdb-82b8-f09aa5ca42f1).\n\nOtherwise, Styled Components ðŸ’™ TypeScript.","src/content/blog/styled-components-and-typescript.mdx","cb2821cea2f53836","tailwind-snowpack-svelte",{"id":566,"data":568,"body":573,"filePath":574,"digest":575,"deferredRender":20},{"title":569,"date":570,"tags":571,"published":20},"Tailwind CSS & Svelte on Snowpack - Preprocess","2020-06-23T22:12:03.284Z",[95,549,229,572],"preprocess","[Snowpack](https://www.snowpack.dev/) is a tool for building web applications with less tooling and 10x faster iteration. [Tailwind CSS](https://tailwindcss.com/) is a utility-first CSS framework for\nrapidly building custom designs. Let's explore how to combine both of them. [Svelte](https://svelte.dev/) is a radical new approach to building user interfaces.\n\nThis article talks about how to use them in combination. This will also interest you if you want to add `svelte-preprocess` when using a Snowpack app.\n\n# Template\n\nPremade template is available on [Github](https://github.com/agneym/svelte-tailwind-snowpack). You can use the template with command:\n\n```bash\nnpx create-snowpack-app dir-name --template @snowpack/app-template-svelte\n```\n\n## Setup Svelte and Snowpack\n\nSnowpack provides an official template for svelte that can be initialised with:\n\n```bash\nnpx create-snowpack-app dir-name --template svelte-tailwind-snowpack\n```\n\n[Template Source](https://github.com/pikapkg/create-snowpack-app/tree/master/templates/app-template-svelte)\n\n## Svelte Preprocess\n\nIf you wanted to add PostCSS to your Svelte application, [`svelte-preprocess`](https://github.com/sveltejs/svelte-preprocess) would probably be the plugin you think of. It functions as an automatic processor for PostCSS, SCSS, Less and a lot more.\n\nBut since we are using Snowpack's custom plugin, none of the usual loaders would work. Luckily, snowpack plugin has a secret hatch to push in plugins. It's a config file named `svelte.config.js`. You can create one in your root folder and export your pre-processor.\n\n```javascript\nmodule.exports = {\n  preprocess: () => console.log(\"Preprocess Script\"),\n};\n```\n\nTo add `svelte-preprocess`, you would need to install it with:\n\n```bash\nnpm i svelte-preprocess\n```\n\nModify the `svelte-config.js` with:\n\n```javascript\nconst sveltePreprocess = require(\"svelte-preprocess\");\n\nconst preprocess = sveltePreprocess({\n  // options to preprocess here\n});\n\nmodule.exports = {\n  preprocess,\n};\n```\n\n## Configuring PostCSS\n\nAs [suggested on Tailwind docs](https://tailwindcss.com/docs/installation), we will use Tailwind CSS with PostCSS. To add this to preprocess:\n\n```javascript\nconst sveltePreprocess = require(\"svelte-preprocess\");\n\nconst preprocess = sveltePreprocess({\n  postcss: {\n    plugins: [\n      // Plugins go in here.\n    ],\n  },\n});\n\nmodule.exports = {\n  preprocess,\n};\n```\n\n## Adding Tailwind\n\nTailwind is available as a PostCSS plugin, you can add it with:\n\n```javascript\nconst sveltePreprocess = require(\"svelte-preprocess\");\n\nconst preprocess = sveltePreprocess({\n  postcss: {\n    plugins: [require(\"tailwindcss\")],\n  },\n});\n\nmodule.exports = {\n  preprocess,\n};\n```\n\nAfter installing `tailwindcss` package ofcourse.\n\n---\n\nand you are good to go. You can find the complete template on Github:\n\nhttps://github.com/agneym/svelte-tailwind-snowpack\n\nIt is also listed on the page for community templates on Snowpack website.\n\nHave Fun ðŸŽ‰","src/content/blog/tailwind-snowpack-svelte.mdx","ae7867ad1a18d291","tailwind-on-snowpack",{"id":576,"data":578,"body":582,"filePath":583,"digest":584,"deferredRender":20},{"title":579,"date":580,"tags":581,"published":20},"Tailwind CSS on Snowpack","2020-04-20T22:12:03.284Z",[95,549,316],"> This has changed lots after publication. You are better off following the [official docs on Snowpack](https://www.snowpack.dev/#tailwind-css) now.\n\n[Snowpack](https://www.snowpack.dev/) is a tool for building web applications with less tooling and 10x faster iteration. [Tailwind CSS](https://tailwindcss.com/) is a utility-first CSS framework for\nrapidly building custom designs. Let's explore how to combine both of them.\n\n[First resource we come across is on the site for Snowpack](https://www.snowpack.dev/#tailwind-css):\n\n> Tailwind works as-expected with Snowpack. Just follow the official Tailwind Install Guide. When you get to step #4 (â€œProcess your CSS with Tailwindâ€) choose the official Tailwind CLI option to generate your CSS. Import that generated CSS file in your HTML application.\n\nBut this misses an important part of _Process your CSS with Tailwind_ step on the Tailwind website:\n\n> For simple projects or just giving Tailwind a spin, you can use the Tailwind CLI tool to process your CSS.\n\nSo it's only for simpler projects or may be even trying out Tailwind.\n\n## What are we missing with Tailwind CLI?\n\nTailwind CLI currently does not remove unnecessary classes from Tailwind. This means that without using any of classes required for Tailwind, you would be stuck with a file of size above 1MB.\n\nTailwind recommends handling this by adding a [PurgeCSS PostCSS Plugin](https://purgecss.com/).\n\n## Steps to add PurgeCSS\n\n### Process\n\nThere are several ways/plugins for PostCSS that can be used. For build tool we are using, there is even a Rollup plugin for PostCSS. But the reason we are using Snowpack is to get rid of tooling, not to add more of them. So, it would make sense to add PostCSS as it's CLI tool and also run it in production only.\n\n### Snowpack Init\n\nFirst, to start of a normal snowpack project:\n\n```bash\nnpm init -y\n# Snowpack and a dev server of choice\nnpm install --save-dev snowpack servor\n# Tailwind CSS. Because.\nnpm i tailwind\nnpx snowpack\n```\n\nYou can [find full guide for installing snowpack on their site](https://www.snowpack.dev/#installing-snowpack)\n\nNow, for our developer tools:\n\n```bash\n# Our postcss tools\nnpm i --save-dev postcss-cli @fullhuman/postcss-purgecss\n# ease of setting env variables and running npm scripts.\nnpm i cross-env npm-run-all\n```\n\n### Tailwind Init\n\nSetting up tailwind:\n\nAdd a `src/style.css` file with Tailwind necessary CSS:\n\n```css\n@tailwind base;\n\n@tailwind components;\n\n@tailwind utilities;\n```\n\nCreate `tailwind.config.js` by running:\n\n```bash\nnpx tailwindcss init\n```\n\nYou can edit the file to change theme or add plugins to Tailwind CSS.\n\n[Find full guide to installation on Tailwind site](https://tailwindcss.com/docs/installation).\n\nAdd an HTML file to connect CSS to the HTML.\n\nIn `index.html`:\n\n```html\n\u003C!doctype html>\n\u003Chtml lang=\"en\">\n  \u003Chead>\n    \u003Ctitle>Snowpack - Simple Example\u003C/title>\n    \u003Clink rel=\"stylesheet\" type=\"text/css\" href=\"/src/output.css\" />\n  \u003C/head>\n  \u003Cbody>\n    \u003Cdiv id=\"app\">\u003C/div>\n    \u003Cscript type=\"module\" src=\"/src/app.js\">\u003C/script>\n  \u003C/body>\n\u003C/html>\n```\n\n### NPM Scripts for development\n\nThere are two things we want to do on development:\n\n1. Start dev server\n2. Use Tailwind CSS to convert our style file to CSS.\n\nIn `package.json`:\n\n```json\n{\n  \"scripts\": {\n    \"dev\": \"cross-env NODE_ENV=development run-s dev:*\",\n    \"dev:server\": \"npx servor --reload\",\n    \"dev:css\": \"tailwindcss build src/style.css -o src/output.css\"\n  }\n}\n```\n\nThis pretty much takes care of the development setup. For development, you can run:\n\n```bash\nnpm run dev\n```\n\n### Setup PostCSS\n\nAdd a `postcss.config.js` file at root which we will be using as configuration for PostCSS:\n\n```javascript\nconst purgecss = require(\"@fullhuman/postcss-purgecss\")({\n  content: [\"./index.html\", \"./src/**/*.js\"],\n\n  // Include any special characters you're using in this regular expression\n  defaultExtractor: (content) => content.match(/[\\w-/:]+(?\u003C!:)/g) || [],\n});\n\nmodule.exports = {\n  plugins: [\n    require(\"tailwindcss\"),\n    ...(process.env.NODE_ENV === \"production\" ? [purgecss] : []),\n  ],\n};\n```\n\nWe are adding `tailwind` and `purgeCSS` in our PostCSS configuration and has setup PurgeCSS to run only on Production. (We are using PostCSS only on production so it's not like it's doing anything, simply following Tailwind docs on the same.)\n\n### NPM Scripts for Production\n\nWe will run the same processes for production:\n\n```json\n{\n  \"scripts\": {\n    \"build\": \"cross-env NODE_ENV=production run-p build:*\",\n    \"build:styles\": \"npx postcss src/style.css -o src/output.css\",\n    \"build:module\": \"npx snowpack --optimize --clean\"\n  }\n}\n```\n\nFor production, you can run:\n\n```bash\nnpm run build\n```\n\nYou will find that I'm building source and development version of CSS to the same file. This is intentional. It is possible to add a `dist` folder and move assets and styles and build files into the folder and fix other issues that happen with it. Feel free but remember the reason you chose Snowpack was to lighten tooling.\n\n[Find full repository on Github](https://github.com/agneym/tailwind-snowpack)","src/content/blog/tailwind-on-snowpack.mdx","73691c442b9d973f","theming-on-styled-components",{"id":585,"data":587,"body":593,"filePath":594,"digest":595,"deferredRender":20},{"title":588,"date":589,"tags":590,"published":20},"Theming with Styled Components","2020-03-03T22:12:03.284Z",[591,561,592],"styling","theming","A guide on theming your web applications with Styled Components.\n\n## Why should you theme?\n\n- Themes help create an identity for your application. Themes can help abstract all usages of a particular color, length or shadow to a single place so that all use cases can follow it.\n- It's easier to change. However solid your current app is, there is surely coming that dreaded moment when designer is going to swap those two colors around. If you have colors spread out all over your application, then you are going to have hell with it. If you think you can search and replace, do consider all ways in which [colors can be represented](https://developer.mozilla.org/en-US/docs/Web/CSS/color_value) in CSS.\n\n## How to Theme?\n\nStyled Components comes in build in with a `ThemeProvider` to help you with this cause. Theme Provider is similar to a [React Context Provider](https://reactjs.org/docs/context.html#contextprovider) (in the sense that it is one). You have to wrap your content with a `ThemeProvider` and you can get started:\n\n```javascript\nfunction App() {\n  return (\n    \u003CThemeProvider theme={{}}>\n      \u003Cp>All the other stuff goes here...\u003C/p>\n    \u003C/ThemeProvider>\n  );\n}\n```\n\nTheme can be any simple POJO. Consider:\n\n```javascript\nconst theme = {\n  colors: {\n    primary: `yellow`,\n    secondary: `red`,\n  },\n};\nreturn \u003CThemeProvider theme={theme}>\u003C/ThemeProvider>;\n```\n\n### How to access a theme?\n\nA theme can be accessed in a styled component with `props.theme` usage. The only consideration being that where this `Button` is rendered should be wrapped somewhere in it's parent with `ThemeProvider` that provides it's `theme`.\n\n```javascript\nconst Button = styled(Button)`\n  background-color: ${(props) => props.theme.primary};\n`;\n```\n\nBut what if it is not wrapped with a `ThemeProvider`? If you believe in creating components that would work even without it's context parent, then you would want to give it some theme as `defaultProps`.\n\n```javascript\nconst Button = styled(Button)`\n  background-color: ${(props) => props.theme.colors.primary};\n`;\n\nButton.defaultProps = {\n  theme: {\n    colors: {\n      primary: \"transparent\",\n    },\n  },\n};\n```\n\n## Nesting Themes\n\nMultiple Theme Providers can be nested within one another. A component will pick up the theme from nearest Theme Provider it is nested within.\n\n```javascript\nconst Button = styled.button`\n  background-color: ${(props) => props.theme.colors.primary};\n`;\nconst theme = {\n  colors: {\n    primary: `yellow`,\n  },\n};\nreturn (\n  \u003CThemeProvider theme={theme}>\n    \u003CButton>Primary Button\u003C/Button>\n    \u003CThemeProvider theme={specialTheme}>\n      \u003CButton>Special Button\u003C/Button>\n    \u003C/ThemeProvider>\n  \u003C/ThemeProvider>\n);\n```\n\nStyled Components packs another trick in it's sleeve with nested Theme Providers. Styled Components delivers the current theme that it receives from it's parent as an argument which you can use to manipulate or add values to the theme.\n\n```javascript\nconst theme = (currentTheme) => ({\n  ...currentTheme,\n  navbar: {\n    height: \"6rem\",\n  },\n});\n\nreturn (\n  \u003CThemeProvider theme={theme}>\n    \u003CThemeProvider theme={specialTheme}>\n      \u003CNavbar />\n    \u003C/ThemeProvider>\n  \u003C/ThemeProvider>\n);\n```\n\n## Variants\n\nVariants are how we can create components that adapt based on props. You might have seen these in UI libraries:\n\n```javascript\n\u003CButton primary>Primary Button\u003C/Button>\n\u003CButton secondary>Secondary Button\u003C/Button>\n```\n\n### Traditional Way\n\nWith styled-components, you can adapt based on props.\n\n```javascript\nconst Button = styled.button`\n  ${(props) =>\n    props.primary &&\n    `\n    background-color: ${props.theme.colors.primary};\n  `}\n  ${(props) =>\n    props.secondary &&\n    `\n    background-color: ${props.theme.colors.secondary};\n  `}\n`;\n```\n\n## Styled Theming\n\nThe traditional way of building variants are a pain on scale as you can imagine. Especially if you are building a design system.\n\nStyled Components family has a library called [styled theming](https://github.com/styled-components/styled-theming). It has an easier API for creating and maintaining variant based styles. For eg. To create a button that would be different in light and dark mode:\n\n```javascript\nconst backgroundColor = theme(\"mode\", {\n  light: \"#f1c40f\",\n  dark: \"#f39c12\",\n});\n\nconst Button = styled.div`\n  background-color: ${backgroundColor};\n`;\n\nexport default function App() {\n  return (\n    \u003CThemeProvider theme={{ mode: \"light\" }}>\n      \u003CButton>Primary Button\u003C/Button>\n    \u003C/ThemeProvider>\n  );\n}\n```\n\nOkay, but what if we need to create a secondary variant of this? That's where the `variants` functions comes in to play.\n\n```javascript\nconst backgroundColor = theme(\"mode\", \"variant\", {\n  primary: {\n    light: \"#f1c40f\",\n    dark: \"#f39c12\",\n  },\n  secondary: {\n    light: \"#2ecc71\",\n    dark: \"#27ae60\",\n  },\n});\n\nconst Button = styled.div`\n  background-color: ${backgroundColor};\n`;\n\nexport default function App() {\n  return (\n    \u003CThemeProvider theme={{ mode: \"light\" }}>\n      \u003CButton variant=\"primary\">Primary Button\u003C/Button>\n      \u003CButton variant=\"secondary\">Secondary Button\u003C/Button>\n    \u003C/ThemeProvider>\n  );\n}\n```\n\nWhat are some other styled-component magic âœ¨ you use? For using styled-components with TypeScript, see my [post on that](/blog/styled-components-&-typescript/).","src/content/blog/theming-on-styled-components.mdx","74c06a95b83a28ed","things-i-dont-know-as-of-2018",{"id":596,"data":598,"body":606,"filePath":607,"digest":608,"deferredRender":20},{"title":599,"date":600,"tags":601,"published":20},"Things I dont know as of 2018","2018-12-28T22:12:03.284Z",[31,602,603,604,605],"things I dont know","imposter syndrome","personal","2018","Inspired from Dan Abramov's [article](https://overreacted.io/things-i-dont-know-as-of-2018/)\n\nFirst of all, there are a lot of things I don't know. There might be techniques whose names I haven't even heard yet. This isn't an attempt to name all those things, this is just a list of things that have been on my bucket list for a long time, but haven't got to learning yet.\n\n1. Javascript Animations\n\n   I can do normal animations using CSS, may be even jQuery fadeIn and fadeOut. I have been on the page for GSAP and even React Spring and React Motion multiple times now, but haven't made something real, till now.\n\n2. Microqueues\n\n   After Philip Roberts talk on [What the heck is event loop anyway?](https://www.youtube.com/watch?v=8aGhZQkoFbQ) I now understand what event loops do, but microqueues are still a black box. May be I don't have to know it to use any of the JavaScript APIs, but I'm sure knowing it would make it better.\n\n3. AWS, Google Cloud\n\n   I know the documentation for both these have improved so much over the last year, but it's still a large jungle for me to navigate. AWS needs to be credited for some real application tutorials and easier setup initiatives like Amplify and Lightsail. Google has always had Firebase. I understand bits and pieces of what and why but there is a lot more that I have to take in.\n\n4. Database Design\n\n   Having read lots of articles and tutorials on designing them, I'm not sure if I get them right, whether it's MongoDB or Postgres. It's hard to even explain where I would plug in something like Redis.\n\n5. Design Patterns and Algorithms\n\n   More of these, always.\n\nThe aim from this article, is to help me have this reference to learn in 2019. As important is the initiative to #LearnInPublic, I also think admitting that you do not know some things helps you learn much better.\n\nHere is to a better 2019 ðŸ¥‚","src/content/blog/things-I-dont-know-as-of-2018.mdx","aae13801a0958bdb","til-mark",{"id":609,"data":611,"body":618,"filePath":619,"digest":620,"deferredRender":20},{"title":612,"date":613,"tags":614,"published":20},"TIL - mark","2019-06-12T22:12:03.284Z",[615,463,616,617],"html","mark tag","til","From series - Today I learned. There is a tag in HTML that helps us highlight stuff just using it. And too many times I have used `span`s with a highlight class, Damn it!\n\nLet's look at what the `mark` tag brings in and how to use it.\n\n\u003CPlayground\n  id=\"mark-intro\"\n  initialSnippet={{\n    markup: `\u003Cp>This is a long text that I want you to look very \u003Cmark>closely\u003C/mark> at\u003C/p>`,\n    css: ``,\n    javascript: ``,\n  }}\n/>\n\nJust embed mark where you want the highlight and you are good to go.\n\n#### Where do we use this?\n\n1. Do you want to highlight the most relevant parts of a paragraph? Use `mark`.\n2. Do you want to highlight the term user searched for? Use `mark`\n3. Want to try syntax highlighting? Don't do `mark`, Use a [library](https://prismjs.com/).\n4. Want to highlight the most important part in a paragraph? Don't use `mark`, use `strong`.","src/content/blog/til-mark.mdx","768f95d573c9fd6e","triple-equal-vs-double-equal",{"id":621,"data":623,"body":630,"filePath":631,"digest":632,"deferredRender":20},{"title":624,"date":625,"tags":626,"published":20},"Double Equal vs Triple Equal","2019-02-04T22:12:03.284Z",[627,628,44,629],"double equal","triple equal","which to use","This is part of a series where I try to explain through each of [33 JS Concepts](https://github.com/leonardomso/33-js-concepts).\n\nThis part corresponds to the Double Equal vs Triple Equal.\n\n### Prerequisites\n\n1. [Type Coercion in JavaScript](/blog/type-coercion/)\n\n> That is all you need to know. No, I'm just kidding!\n> But you do need to know that.\n\n`==` is known as loose equality.\n\n`===` is known as strict equality.\n\n### What is difference between loose and strict?\n\nLoose Equality performs Coercion.\n\nStrict Equality _does_ not perform Coercion.\n\nCoercion is defined here follows the rules specified in the Abstract Equality Comparison Algorithm as defined in the ES Spec.\n\n### Case 1 - Both of the operands are of same types\n\n\u003CPlayground\n  id=\"same-types\"\n  initialSnippet={{\n    markup: ``,\n    css: ``,\n    javascript: `console.log(\n  undefined == undefined,\n  null == null,\n  NaN == 1,\n  1 == NaN,\n  NaN == NaN,\n  +0 == -0,\n  2 == 2,\n  -2 == 2\n);`,\n  }}\n  defaultResultTab=\"console\"\n  defaultEditorTab=\"javascript\"\n/>\n\nTake Aways from here:\n\n1. `NaN` is **not** equal to itself or anything else.\n2. `+0` is equal to `-0` (_not that anyone uses them_)\n\n### Case 2 - The operands are null and undefined\n\n\u003CPlayground\n  id=\"null-undefined\"\n  initialSnippet={{\n    markup: ``,\n    css: ``,\n    javascript: `console.log(\n  undefined == null,\n  null == undefined,\n)`,\n  }}\n  defaultEditorTab=\"javascript\"\n  defaultResultTab=\"console\"\n/>\n\nThese people are very special and they are coerced to be equal to each other.\n\nUnlike others this is something that has constant applications. There might be functions that you want others to write and take the result from. You have instructed them to return `null` if the result is falsy but they forget. You have not got `null`, but you have got `undefined` in you hands. Instead of writing these an `||` to compare them you can compare the result with `==` to get the exact result you want.\n\nThis also means that they are not equal to anything else. If you try `undefined == false`, you are ought to get `false` out of it.\n\n> Don't believe me? Try it out yourself.\n\n### Case 3 - One is string and the other number\n\n\u003CPlayground\n  id=\"string-number\"\n  initialSnippet={{\n    markup: ``,\n    css: ``,\n    javascript: `console.log(\n  12 == \"12\",\n  \"12\" == 12\n)`,\n  }}\n  defaultResultTab=\"console\"\n  defaultEditorTab=\"javascript\"\n/>\n\nThe string is being converted into a number here. If it is not a number, you will get an `NaN`, which is not equal to anything else anyway (not even itself as we mentioned)\n\n### Case 4 - Boolean and something else\n\n\u003CPlayground\n  id=\"boolean-and-else\"\n  initialSnippet={{\n    markup: ``,\n    css: ``,\n    javascript: `console.log(\n  12 == true,\n  true == 12\n)`,\n  }}\n  defaultResultTab=\"console\"\n  defaultEditorTab=\"javascript\"\n/>\n\n> Huh? Where is the coercion I was promised?\n\nCoercion is still happening, we are not just looking at it the way compiler is. If compiler sees a boolean on either side of the `==`, it converts the boolean into a number and repeats the algorithm. So in our case, `true` gets converted to `1` and Is `12 == 1`, No; and hence `false`\n\nYou know what would be right though? `1 == true`, try it.\n\nWhat if the other side is not a number? Say `\"12\" == true`, let's break it down:\n\n1. Compiler sees a boolean: `\"12\" == toNumber(true)` --> `\"12\" == 1`\n2. Compiler sees a string: `toNumber(\"12\") == 1` --> `12 == 1` (Case 3)\n3. `false`\n\n### Case 5 - String/Number vs an Object\n\n\u003CPlayground\n  id=\"object-and-else\"\n  initialSnippet={{\n    markup: ``,\n    css: ``,\n    javascript: `console.log(\n  {} == false,\n  [] == false,  // Okay\n  [[]] == false,  // Hmm..\n  [[0]] == false,  // definitely wierd\n);\n\nconst a = {\nvalueOf: () => 0,\n}\nconst b = {\ntoString: () => \"string\",\n}\nconsole.log(\na == false,\nb == \"string\"\n);\n\nconst c = {\nvalueOf: () => 0,\ntoString: () => \"string\",\n}\nconsole.log(\nc == 0,\nc == \"string\", // What?! I was just getting the hang of this.\n);`,\n}}\ndefaultResultTab=\"console\"\ndefaultEditorTab=\"javascript\"\n/>\n\nLots of things here, let's break them down one by one.\n\nIf we find an object on either sides of the `==` operator, we try converting it to a primitive.\n\n#### How might we do that?\n\nObjects have two methods defined to do this:\n\n1. `toString()`\n2. `valueOf()`\n\n`valueOf` by default returns the object itself, `toString` says `[object Object]`\n\n> More like I'm Groot. But this time, annoying.\n\nRule 1: These two methods can only return primitives.\n\n> There are no errors if they return other stuff. It just ignores the value.\n\n> I mean, Common! `valueOf` just broke their only rule with it's default value.\n\n1. Empty object is not a falsy value, no coercion here.\n2.\n\nAs we had mentioned in our Coercion article, arrays have a `toString()` function defined by default.\n\nAs `==` is a nuetral (default) case, compiler calls upon `toString()` on the array. which is `join(',')`. What happens when we apply that function to an empty array? We get `\"\"`, which is falsy.\n\nLet's recount the step the steps now:\n\n1. `false` gets converted to number (case 4)\n   [] == 0\n2. `[]` toPrimitive called, `toString` is invoked\n   \"\" == 0\n3. String and number (Case 3)\n   0 == 0 --> `true`\n\nThe same explanation explains 3, 4, 5 cases, so we will skip those.\n\n6 asks the important question:\n\n#### What if object has both `valueOf` and `toString`?\n\nThe compiler first makes some guesses about it.\n\nIs it someplace a string would make sense? Like say, as an object key? Then prefer `toString()`\n\nIs it somewhere a number would make sense? Like in a mathematical expression? Then `valueOf`\n\nIs it someplace where both could exist? Like `==`? Then `valueOf` anyway.\n\nThis is how the last one turns out to be false.\n\n#### Can I get this hint the compiler makes and take a decision on it?\n\nWith ES6 and some magic with [Symbols](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol), yes you can.\n\n\u003CPlayground\n  id=\"to-primitives\"\n  initialSnippet={{\n    markup: ``,\n    css: ``,\n    javascript: `const object1 = {\n  [Symbol.toPrimitive](hint) {\n    if (hint == 'number') {\n      return 42;\n    }\n    return null;\n  }\n};`,\n  }}\n  defaultEditorTab=\"javascript\"\n  defaultResultTab=\"console\"\n/>\n\n[See how it works](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toPrimitive)\n\n### Case 6: Object vs Object\n\nIf the two objects compared are of same [reference](/blog/value-vs-reference/), then `true` otherwise `false`.\n\nThis is actually same for both `==` and `===`, just making the point.\n\n\u003CPlayground\n  id=\"references\"\n  initialSnippet={{\n    markup: ``,\n    css: ``,\n    javascript: `const person = {\n name: 'john',\n skills: ['hiking'],\n}\nconst developer = person;\n/* == comparison operator for objects just compares references */\nconsole.log(person === developer) // true\nconst anotherPerson = {\n  name: 'john',\n  skills: ['hiking'],\n}\nconsole.log(anotherPerson == person)`,\n  }}\n  defaultEditorTab=\"javascript\"\n  defaultResultTab=\"console\"\n/>\n\n## Does this change the way I code?\n\nThere is a choice to be made here. Stalwarts like Douglas Crockford, recommend that you should always use `===` instead of `==`. There are people like Kyle Simpson who thinks understanding `==` would be a far better option.\n\nThere is an interesting conversation between Kyle Simpson and Brendan Eich on twitter about this:\n\n\u003Cblockquote className=\"twitter-tweet\" data-lang=\"en\">\n  \u003Cp lang=\"en\" dir=\"ltr\">\n    also, defaulting to === could be *slightly* less performant. when the types\n    are different, the behavioral equiv of x == y (allowing coercion) actually\n    requires two or more === usages. one == usage is faster than two === usages.\n  \u003C/p>\n  &mdash; getify (@getify)\n  \u003Ca href=\"https://twitter.com/getify/status/1092614585704697856?ref_src=twsrc%5Etfw\">\n    \u003Cspan>February 5, 2019\u003C/span>\n  \u003C/a>\n\u003C/blockquote>\n\nTo quote a [Stackoverflow answer](https://stackoverflow.com/a/5447170/4374566) on the topic,\n\n> Douglas Crockford makes a lot of recommendations, but you don't have to take them as gospel. :)\n\nHave your opinion, have a team huddle, decide and code.\n\nThat's about it about _=== vs ==_ for now. Is there something I missed? Something wrong? Something good? Ping me on [Twitter](https://twitter.com/agneymenon)","src/content/blog/triple-equal-vs-double-equal.mdx","a975a7de4ebb0227","type-coercion",{"id":633,"data":635,"body":640,"filePath":641,"digest":642,"deferredRender":20},{"title":636,"date":637,"tags":638,"published":20},"Type Coercion - JavaScript Concepts 4","2019-02-03T22:12:03.284Z",[639,31,519,44],"type coercion","This is part of a series where I try to explain through each of [33 JS Concepts](https://github.com/leonardomso/33-js-concepts).\n\nThis part corresponds to the Type Coercion.\n\nFirst let us take a quick recap on types in JavaScript.\n\n> There are generally two types: Primitives and Objects.\n\n> Primitives are number, string, null, undefined, boolean and symbols.\n\n> Objects are everything else\n\nType Conversions are generally of two types: Implicit or Explicit.\n\n1. Implicit conversion means that the compiler is going behind your back to convert something you give it without you explicitly saying it. This is also known as Type Coercion.\n\n2. Explicit coercion happens when you explicitly tell the compiler what type to convert to. This is popularly known as type casting.\n\n## Who decides what is explicit and implicit?\n\nLike in most cases, the spec does. But if you had to figure out rules, it would completely depend on your knowledge whether something is implicit or explicit.\n\nFor eg. You might know that unary `+` operator forces anything to convert to an integer. But a junior developer joining the team tomorrow might not. So what is explicit for you just turned implicit for another person.\n\n## Can any type be coerced to any other type?\n\nOf course not. There is no way the compiler converts \"three\" to 3 whatever conversion tactics you use.\n\nType coercion always converts types to Primitives or Scalars. There is no conversion that results in the opposite.\n\n> Except may be [boxing], but that is not coercion in the meaning of things.\n\n## Numerical Conversions\n\nHere, we discuss how things can turn into `number` types.\n\n### 1. Unary plus\n\n\u003CPlayground\n  id=\"unary-plus\"\n  initialSnippet={{\n    markup: ``,\n    css: ``,\n    javascript: `const numberOfDays = \"365\";\nconst booleanType = true;\nconst object = {\n  a: 1,\n}\nconst object2 = {\n  a: 1,\n  valueOf: function() {\n    return this.a;\n  }\n}\nconst array = [2];\nconst array2 = [2,4];\n \nconsole.log(+numberOfDays, +booleanType, +object, +object2, +array, +array2);`,\n  }}\n  defaultEditorTab=\"javascript\"\n  defaultResultTab=\"console\"\n/>\n\nUnary Plus operator before any string/object/boolean converts it into a number (if possible)\n\n### 2. Number()\n\n\u003CPlayground\n  id=\"number()\"\n  initialSnippet={{\n    markup: ``,\n    css: ``,\n    javascript: `const numberOfDays = \"365\";\nconst booleanType = true;\nconst object = {\n  a: 1,\n}\nconst object2 = {\n  a: 1,\n  valueOf: function() {\n    return this.a;\n  }\n}\nconst array = [2];\nconst array2 = [2,4];\nconst date = new Date();\n \nconsole.log(Number(numberOfDays), Number(booleanType), Number(object), Number(object2), Number(array), Number(array2), Number(date));`,\n  }}\n  defaultEditorTab=\"javascript\"\n  defaultResultTab=\"console\"\n/>\n\n**This is as explicit as explicit gets**\n\nIf conversion is not possible, it is converted to `NaN`, _which you need to be very vary as it is very inconsistent in it's behavior_\n\nIf objects have a `valueOf` function, it is called for conversion to `number`, otherwise `NaN` is returned.\n\nArrays have a `valueOf` function defined by default, but as you can guess it works only when there is a single element in the array.\n\nOne special detail to remember:\n\n- `null` is converted to 0\n- `false` is converted to 0\n- `undefined` is converted to `NaN`\n\nWhen numerical conversion is used on a `Date()` object, it gives you a timestamp.\n\n## String Conversions\n\n### 1. Plus Operator\n\n> This guy seems to be the culprit here too.\n\nAs in most places + in between two operands is either string concatenation or addition. This is pretty simple when both operands are of the same type. But what happens when it is not?\n\n\u003CPlayground\n  id=\"plus-operator\"\n  initialSnippet={{\n    markup: ``,\n    css: ``,\n    javascript: `console.log(\n  365 + \"\",\n  365 + \"1\",\n  \"1\" + 365,\n  1000 * 1000 * 10000 * 10000 * 1000 * 1000 * 1000 + \"\"\n);\n \nconst obj = {\n  a: 1,\n  toString: function() {\n    return \"this string\";\n  }\n}\nconst array = [1,2];\nconsole.log(obj + \"\", array + \"\");\n`,\n  }}\n  defaultEditorTab=\"javascript\"\n  defaultResultTab=\"console\"\n/>\n\nIf we add a string to a number, the string always wins. But if the number gets very large, it takes the form of an exponentiation operator as a string.\n\nIf the object implements `toString()` function, that is returned on converting to string. Otherwise, you get the infamous `[object Object]`.\n\nArrays, by default implement a `toString()` function that is equal to `array.join(\",\")`.\n\n### 2. String()\n\nSame rules. More explicit.\n\n### 3. toString()\n\nSame rules. Doesn't get more explicit that this.\n\n## Boolean Conversions\n\nBefore boolean conversions, we have to talk about falsy values.\n\nES Spec defines falsy values as:\n\n- null\n- undefined\n- false\n- 0, +0, -0\n- \"\"\n- NaN\n\nFalsy values are coerced into `false` when applying a boolean type conversion.\n\n#### What about truthy values?\n\nES Spec defines all values that are not falsy as truthy.\n\nThat's it. There is no table of values. Just the ones that aren't falsy.\n\n### Explicit coercion\n\n1. `Boolean()`\n2. `!!`\n\n\u003CPlayground\n  id=\"explicit-boolean\"\n  initialSnippet={{\n    markup: ``,\n    css: ``,\n    javascript: `console.log(\n  !!3,\n  !!\"a\",\n  !!\"\",\n  !!null,\n  !!undefined,\n  !!{},\n  !![]\n);`,\n  }}\n  defaultEditorTab=\"javascript\"\n  defaultResultTab=\"console\"\n/>\n\nThe `!` operator turns `true` to `false` and `false` to `true`. You can guess what two of those can accomplish.\n\nThere are two things to remember here, An empty object `{}` and `[]` are not falsy values. If you want to run checks on them, you are better off with `Object.keys({})` and `[].length`.\n\nThe same rules apply for Boolean().\n\n3 Bitwise Operator ~\n\nWhat does this do? This operator takes the [2s compliment](https://en.wikipedia.org/wiki/Two%27s_complement) of a number.\n\n#### I was sleeping in the math class at this point.\n\nWell, just remember if you take 2s compliment of `x`, you get `-(x + 1)`\n\n\u003CPlayground\n  id=\"2s-compliment\"\n  initialSnippet={{\n    markup: ``,\n    css: ``,\n    javascript: `console.log(\n~1,\n~100,\n~Infinity,\n~-1\n)`,\n  }}\n  defaultEditorTab=\"javascript\"\n  defaultResultTab=\"console\"\n/>\n\n#### Okay, that's cool. Why is this important?\n\nWell, because of the last one. `~-1 = 0`\n\n-1 is known as the sentinel value. Very famously, `indexOf` function returns -1 to signal that the argument is not present in the string.\n\nTo make sense of this we would have to provide:\n\n\u003CPlayground\n  id=\"index-of\"\n  initialSnippet={{\n    markup: ``,\n    css: ``,\n    javascript: `const stringValue = \"long string\";\n \nif(stringValue.indexOf(\"o\") !== -1) {\n  console.log(\"o is present\");\n}\n \nif(~stringValue.indexOf(\"o\")) {\n  console.log(\"o is present\");\n}\n`,\n  }}\n  defaultEditorTab=\"javascript\"\n  defaultResultTab=\"console\"\n/>\n\nWhich one is more readable? Jury is still out.\n\n### Implicit Coercion\n\nEven the most hard coercion haters use this at some point.\n\nExpressions that force coercion are:\n\n1. if\n2. for\n3. while\n4. ternary\n5. || and &&\n\nAll of them are conditionals. Whatever you provide inside these (adapt it to logical and ternary) expressions gets converted to a boolean.\n\nThe rules are pretty straightforward for the first four. So we will skip them and focus on the last. The logical operator.\n\nThe logical operators `||` and `&&` do not convert both the sides of the expression to boolean. In fact, both of them only convert the first operator given to them to a boolean.\n\nThe `||` operator converts the first to boolean. If it is a truthy value, it returns the first otherwise the second.\n\nThe `&&` operator converts the first to boolean, If it is a truthy value, it returns the second, returns false otherwise.\n\nThis leads to some interesting applications:\n\n\u003CPlayground\n  id=\"logical-operators\"\n  defaultEditorTab=\"javascript\"\n  defaultResultTab=\"console\"\n  initialSnippet={{\n    markup: ``,\n    css: ``,\n    javascript: `function someFn(ar) {\n  const defaultValue = ar || \"this\";\n  return defaultValue;\n}\n \nconsole.log(\n  someFn(null),\n  someFn(\"we have a value\")\n);\n \nconst signedIn = true;\nconst userRole = signedIn && \"admin\";\nconsole.log(userRole);\n`,\n  }}\n/>\n\nThe `&&` operator is very widely used in React for conditional rendering.\n\n## Does this change the way I write code?\n\nAfter reading this, you should immediately put to test which of these you knew already and which of these your coworkers could know. That is ultimately what decides what is implicit and what is explicit. Implicit conversion, though seemigly evil makes the code easier to read (not always, but when everyone involved knows the rules).\n\nHaving an opinion on which of these can be used, or should not be used is very important on maintaining a codebase.\n\nIs there something I missed? Something wrong? Something good? Ping me on [Twitter](https://twitter.com/agneymenon)","src/content/blog/type-coercion.mdx","79f89f63d45196db","usememo-inside-context",{"id":643,"data":645,"body":651,"filePath":652,"digest":653,"deferredRender":20},{"title":646,"date":647,"tags":648,"published":20},"useMemo inside Context API - React","2021-03-27T22:12:03.284Z",[649,650,96,31],"useMemo","context","One of the most common places a `useMemo` is seen (in the wild) is for memoizing React context value. Let's look into what are the advantages of doing this and how we can prevent unnecessary renders using this pattern.\n\n---\n\nContext provides a way to pass data through the component tree without having to pass props down manually at every level. General use case for a Context is as follows:\n\n```jsx\nconst UserContext = React.createContext(); // could have a default value\n\nfunction UserCtxProvider({ children }) {\n  const [authUser, setAuthUser] = React.useState(null);\n\n  const value = React.useMemo(() => ({\n    authUser, setAuthUser\n  }), [authUser]);\n\n  return (\n    \u003CUserContext.Provider value={value}>\n      {children}\n    \u003CUserContext.Provider>\n  );\n}\n\nfunction App() {\n  return (\n    \u003CUserCtxProvider>\n       \u003CLogin />\n       \u003CHome />\n       {/* Rest of the app */}\n    \u003C/UserCtxProvider>\n  );\n}\n```\n\nBy adding context provider, we are ensuring that all components rendered from `App` component can access authenticated user object from context without having it to be passed down multiple levels to the bottom. The children can access it with the `useContext` hook.\n\n```jsx\nfunction Greeting() {\n  const { authUser } = useContext(UserContext);\n  return \u003Cp>Hello {authUser?.name}\u003C/p>;\n}\n```\n\nWhenever the value in `UserContext` changes, `Greeting` component would automatically be re-rendered by React.\n\n---\n\nIf you have used this before, you will notice a common pattern that I used in the example. The context value is passed through a `useMemo` before being provided to the `Provider` component. The most common advice on the Internet is that this prevents unnecessary renders.\n\nRather than blindly follow the pattern, we will look to analyse how `useMemo` can help and learn more about how React renders components along the way. Let's look at creating an example to play around with.\n\n# Creating a sample context\n\nWe will create a context using `useMemo` and then one without it so we can compare what happens with both.\n\n\u003Ciframe\n  src=\"https://codesandbox.io/embed/context-with-and-without-memo-eb8ep?fontsize=14&hidenavigation=1&theme=dark\"\n  style={{\n    width: \"100%\",\n    height: \"500px\",\n    border: 0,\n    borderRadius: \"4px\",\n    overflow: \"hidden\",\n  }}\n  title=\"context with and without memo\"\n  loading=\"lazy\"\n  allow=\"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking\"\n  sandbox=\"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts\"\n>\u003C/iframe>\n\nWe have created two `CustomCtx` with providers `ProviderWithMemo` and `ProviderWithoutMemo` (I'm very creative with names, I know). Clicking the `Increment` button increments the count by updating the context value, this will also print logs of rerendering component.\n\n> If you open React DevTools panel on codesandbox, you can check _Highlight updates when components render_ option to visually follow along when a component renders.\n\nFrom the logs, we can see that\n\n- When context changes, the corresponding child rerenders. Because the child is subscribed to the context, this is aligned with our expectations.\n- When the parent rerenders, both the children rerender.\n\nSo adding _just_ `useMemo` has not prevented any unnecessary rerenders so far.\n\nWhat if there was an extra parent in between? Would the parent rerender when the context is updated? Would the extra parent rerender if main parent state is updated?\n\n```jsx\n\u003CContext.Provider value={value}>\n  \u003CParent />\n\u003C/Context.Provider>\n```\n\n# Memoization and useMemo\n\nTo find out why `useMemo` did not prevent any rerenders, let's look at what it does in the first place. React docs describe it as follows:\n\n> Pass a â€œcreateâ€ function and an array of dependencies. useMemo will only recompute the memoized value when one of the dependencies has changed. This optimization helps to avoid expensive calculations on every render.\n\nOur usage with context does not seem to align with this definition of `useMemo`. Creating an object is not an expensive operation in any way.\n\nBut since it is an object being created, but there is an advantage of using of recreating the object only when one of the fields change.\n\n## Referential Equality\n\nJavaScripts objects follow the rule of referential equality, which means that for them to be equal (`===`, `==` or `Object.is`) they need to be of the same instance.\n\n```jsx\n/* Even when all fields are the same, two objects are not equal */\n{} == {} // false\n{ name: 'Bruce' } == { name: 'Bruce' } // false\n\n/* If both objects share the same instance, they are equal */\nconst person1 = { name: 'Wayne' };\nconst person2 = person1;\nperson1 == person2 // true\n/* Even if you change one of the fields */\nperson2.name = 'Batman';\nperson1 == person2 // true\n```\n\n---\n\nIn our context example, we have used `useMemo` to make sure that the object instance is not changed unless the context value itself has not changed.\n\nIn fact, We are already using this very technique to force a render from the `App` component. `useState` compares (`==`) current state with previous state and if they are different, rerenders the component. We are setting the state to `{}` on clicking the button so that React would find a new instance of empty object every time it updates.\n\n```jsx\nfunction App() {\n  const [, forceRender] = React.useState();\n  return \u003Cbutton onClick={() => forceRender({})}>Re-Render\u003C/button>;\n}\n```\n\nBut by default, React does not use this comparison mechanism for parent-child rerenders. Instead it rerenders all child components when the parent rerenders. How do we force it to check for equality?\n\n# Memoizing the component\n\nWe can use the higher order component `memo` provided by React to check equality before rerendering a component. This works as follows:\n\n> If your component renders the same result given the same props, you can wrap it in a call to React.memo for a performance boost in some cases by memoizing the result. This means that React will skip rendering the component, and reuse the last rendered result.\n\nBut what about the context? The child component needs to render when context value changes, right? The docs have an answer for that as well.\n\n> React.memo only checks for prop changes. If your function component wrapped in React.memo has a `useState`, `useReducer` or `**useContext**` Hook in its implementation, it will still rerender when state or context change.\n\nLet's memoize our `Child` component.\n\n\u003Ciframe\n  src=\"https://codesandbox.io/embed/context-with-and-without-usememo-with-memo-xsi8r?fontsize=14&hidenavigation=1&theme=dark\"\n  style={{\n    width: \"100%\",\n    height: \"500px\",\n    border: \"0\",\n    borderRadius: \"4px\",\n    overflow: \"hidden\",\n  }}\n  title=\"context with and without useMemo - with Memo\"\n  loading=\"lazy\"\n  allow=\"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking\"\n  sandbox=\"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts\"\n>\u003C/iframe>\n\nNow, if we pop open the console, we can see that `Child` with `useMemo` does not rerender when the parent component is updated.\n\n### What if there is an extra parent in between?\n\n\u003Ciframe\n  src=\"https://codesandbox.io/embed/context-with-and-without-usememo-extra-parent-lgisf?fontsize=14&hidenavigation=1&theme=dark\"\n  style={{\n    width: \"100%\",\n    height: \"500px\",\n    border: \"0\",\n    borderRadius: \"4px\",\n    overflow: \"hidden\",\n  }}\n  title=\"context with and without useMemo - extra Parent\"\n  loading=\"lazy\"\n  allow=\"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking\"\n  sandbox=\"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts\"\n>\u003C/iframe>\n\n- The parent re-renders on `App` updates. But the child in memoized context does not (the Child itself is a memoized component).\n- The parent does not re-render if the context is changed. `Parent` is part of `children` prop in `ContextProvider` but it is not the component's child nor is it subscribed to the context.\n\n---\n\nOpinion: I just leave `useMemo` into most of the context values created. Other developers (or myself) might add `memo` to give the app a performance boost finding something is slow later on. At that point, it's difficult to find all context states and memoize values as changing context value change might not even happen during testing phase. They seem like very unrelated concerns.\n\nBut as they say, [Premature optimization is the root of all evil](https://m.xkcd.com/1691/) so please do measure before you optimise. Adding `memo` to all components in the application would just add development time and not help with the performance boost.\n\nThere are other ways to optimise your React contexts:\n\n- [How to optimize context value - Kent C Dodds](https://kentcdodds.com/blog/how-to-optimize-your-context-value/) - Kent provides a solution by splitting context setter and state into two different contexts.\n- If you like to optimise how the child rerenders when context value changes, [Dan Abramov has suggestions with examples](https://github.com/facebook/react/issues/15156#issuecomment-474590693).","src/content/blog/useMemo-inside-context.mdx","ae963502bb013699","value-vs-reference",{"id":654,"data":656,"body":663,"filePath":664,"digest":665,"deferredRender":20},{"title":657,"date":658,"tags":659,"published":20},"Value vs Reference - Javascript Concepts 3","2019-01-30T22:12:03.284Z",[660,661,44,662],"value vs reference","pass by reference in javascript","object change property","This is part of a series where I try to explain through each of [33 JS Concepts](https://github.com/leonardomso/33-js-concepts).\n\nThis part corresponds to the Pass by Value vs Pass by Reference.\n\nBefore we go into JavaScript of things, let's look at what _Pass by Value_ and _Pass by Reference_ actually means.\n\nQuoting [this](https://stackoverflow.com/a/430958/4374566) answer on stackoverflow,\n\n- When a parameter is passed by reference, the caller and the callee use the same variable for the parameter. If the callee modifies the parameter variable, the effect is visible to the caller's variable.\n\n- When a parameter is passed by value, the caller and callee have two independent variables with the same value. If the callee modifies the parameter variable, the effect is not visible to the caller.\n\nIn essence, when you are passing a variable by reference, you are allowing a function to change the variable and hence bear the weight of side effects whatever that function did to your variable.\n\nWhen passing by value, you give the function much lesser control. You will take into account only what is returned by the function. They can change the variables you pass in but that will not affect your variables.\n\nBut this concept is mostly outdated today. It is taught in colleges and for introductory classes but most modern languages choose to implement this way differently. Talking about modern languages, so does JavaScript.\n\nJavaScript implements this concept with two types of data types: Primitives and Objects.\n\nInstead of introducing two ways of passing variables to functions, we have two types of variables. The type of variable defines whether it is passed by value or by reference.\n\n## Primitives\n\nThere are 6 primitive data types in JavaScript:\n\n1. string\n2. number\n3. boolean\n4. null\n5. undefined\n6. symbol\n\nThese data types are represented at the lowest level and are immutable.\n\n> Immutability means that their properties cannot be altered at run time. Like,\n\n```js\nlet stringVar = \"this is one long string\";\nstringVar[4] = \"v\"; // This is not possible\nstringVar = \"this is another string\"; // This is not barred by the datatype\n```\n\n### But I thought JavaScript did not have types\n\nYes, JavaScript is a loosely typed language. This still means that JavaScript has data types. But these data types are not bound to any variable.\n\n```js\nlet variable = \"one\";\nvariable = 1;\nvariable = true; // Totally fine executions\n```\n\n### How does this relate to Value vs Reference?\n\nPrimitives are always passed by value in the truest form.\n\n```js\nfunction crazy(data) {\n  data = \"_*.!@!!@(U!())\"; // let this function do what it ever it wants, it wouldn't hurt out primitive\n}\n\nconst impData = \"this is data as a string\";\ncrazy(impData); // rest assured, impData (primitive) is safe from manipulation by crazy()\n```\n\n## Objects\n\nObjects are the second kind of data type available in JavaScript.\n\n> If you are wondering where are Arrays, Maps and all those wonderful things, they are all just objects with special methods underneath.\n\nLet's define an object named `Person`:\n\n```js\nconst person = {\n  name: \"John\",\n};\n```\n\nThis is how the structure would look in the memory.\n\n\u003Csvg\n  height=\"20rem\"\n  style={{ width: \"100%\", margin: \"4rem auto\", display: \"block\" }}\n  viewBox=\"0 0 451 175\"\n  fill=\"none\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  \u003Crect\n    x=\"1\"\n    y=\"1\"\n    width=\"119\"\n    height=\"44\"\n    fill=\"#FFFEFE\"\n    stroke=\"#0E5AEF\"\n    stroke-width=\"2\"\n  />\n  \u003Ctext x=\"35\" y=\"26\" fill=\"#000000\">\n    person\n  \u003C/text>\n  \u003Crect x=\"193\" y=\"129\" width=\"129\" height=\"46\" fill=\"#0E5AEF\" />\n  \u003Crect\n    x=\"322.5\"\n    y=\"129.5\"\n    width=\"128\"\n    height=\"45\"\n    fill=\"white\"\n    stroke=\"#0E5AEF\"\n  />\n  \u003Ctext x=\"238\" y=\"157\" fill=\"white\">\n    name\n  \u003C/text>\n  \u003Ctext x=\"368\" y=\"157\" fill=\"black\">\n    John\n  \u003C/text>\n  \u003Cpath\n    d=\"M125.871 49.6985C125.512 49.2785 124.881 49.2287 124.461 49.5873C124.041 49.946 123.991 50.5772 124.35 50.9972L125.871 49.6985ZM189.933 127.808C190.291 128.228 190.922 128.278 191.342 127.919C191.762 127.561 191.812 126.93 191.454 126.509L189.933 127.808ZM124.35 50.9972L189.933 127.808L191.454 126.509L125.871 49.6985L124.35 50.9972Z\"\n    fill=\"#FF008A\"\n  />\n  \u003Ccircle\n    cx=\"123.812\"\n    cy=\"48.8268\"\n    r=\"2.25\"\n    transform=\"rotate(49.5087 123.812 48.8268)\"\n    stroke=\"#FF008A\"\n    stroke-width=\"1.5\"\n  />\n  \u003Cpath\n    d=\"M186.245 125.771C185.905 125.818 185.832 126.286 186.15 126.386L191.119 128.337C191.492 128.484 191.876 128.155 191.79 127.765L190.647 122.564C190.607 122.232 190.135 122.217 190.025 122.544C189.432 124.309 188.088 125.515 186.245 125.771Z\"\n    fill=\"#FF008A\"\n  />\n\u003C/svg>\n\nAs you can see, `{ name: 'John' }` is allocated a place in the memory and variable person is pointing to it.\n\nNow, John has taken a role in life and is being reassigned.\n\n```js\nconst person = {\n  name: \"john\",\n};\nconst developer = person; // John has become a developer.\n```\n\nLet us look at the memory representaion for this change:\n\n![TwoVariables](/blog/value-vs-reference/two-variables.svg)\n\nNow, we have a second variable `developer` pointing at the same memory that `person` did.\n\nSo, let's say `developer` learns a new skill, he adds it to his skill array. And magically `person` variable would have learned this skill too. Because both these variables share the same object in memory.\n\n```js\nconst person = {\n  name: \"john\",\n  skills: [\"hiking\"],\n};\nconst developer = person;\ndeveloper.skills.push(\"coding\");\n/* == comparison operator for objects just compares references */\nconsole.log(person === developer); // true\n```\n\nWhat if a new person now joins the company and is also named 'John'?\n\n```js\nconst person = {\n  name: 'john',\n  skills: ['hiking'],\n}\nconst person2 = {\n  name: 'john2',\n  skills: ['hiking'],\n}\nperson.skills.push('coding');\n/* Should person2 learn coding just because he has the same portfolio as the other John? */\nconsole.log(person === person2) \\/\\/ false, even though they share the same reference, they point at different memory instances and are obviously two different objects.\n\n```\n\nSo, it is not the properties that matter, it is the memory it points to.\n\nEverything that is an object (objects, arrays, functions, maps) are passed by reference in JavaScript. Going back to our earlier crazy example,\n\n```js\nfunction crazy(impData) {\n  impData.data = \"_*.!@!!@(U!())\"; // your important data just got crazified\n}\n\nconst impData = {\n  data: \"suppper secret\",\n};\ncrazy(impData);\nconsole.log(impData); // gone. changed to gibberish by crazy.\n```\n\n## How would I protect my objects from crazy functions?\n\n### 1. Write lesser crazy functions. More Pure functions.\n\nPure functions are those that do not produce side effects. They interact only with their arguments and do not change them in anyway.\n\nThese functions produce result only as their return value.\n\n```js\nfunction sum(a, b) {  \\/\\/ Pure function\n  return a+b;\n}\nfunction addValue(obj) {  \\/\\/ Impure function\n  obj.value = 100;\n}\n```\n\nBut what if it is not your function? What if you are passing the object to a third party?\n\n### 2. Spread it.\n\nThere is a ECMAScript Stage 4 proposal for using [spread operator](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax) for objects available [here](https://github.com/tc39/proposal-object-rest-spread). You can use it now with a [Babel Plugin](https://babeljs.io/docs/en/babel-plugin-proposal-object-rest-spread)\n\n```js\nfunction addValue(obj) {  \\/\\/ Impure function\n  obj.value = 100;\n}\n\nconst impObj = {\n  value: 10,\n}\naddValue({...impObj});\n```\n\nWhat you have essentially done here is to create a _shallow_ copy of your `impObj`. Now the `addValue` can no longer hurt it by altering it's properties. You can think of it like deploying a replica.\n\nThere is also a less fancy way of doing this with [Object.assign](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)\n\nBut as you might have figured from the word _shallow_ there are issues with cloning like this.\n\n```js\nfunction doCrazy(obj) {  \\/\\/ Impure function\n  obj.name = \"Hehe\";  \\/\\/No effect\n  obj.skills.push(\"another\");   \\/\\/ That seems to be breaking the illusion\n}\n\nconst person = {\n  name: 'John',\n  skills: ['hiking']\n}\ndoCrazy({...person});\nconsole.log(person);\n```\n\n![person and personClone are still pointing to the same reference internally](/blog/value-vs-reference/points.png)\n\nBy building a shallow clone we have only eliminated the possibility of crazy people meddling with the first level of your object. The levels below it are still references and can be manipulated/changed by other functions/entities.\n\n### 3. Deepclone it.\n\nThe next solution is to take the object clone it and go deeper and deeper into the object, find them clone them too.\n\n> I don't know who you are, but if you are reference, I would clone you.\n\nLuckily, there is a function to do that, [cloneDeep](https://lodash.com/docs/4.17.11#cloneDeep).\n\n## Does this change the way I write code?\n\nWell, it should. It should tell you why pure functions are so important in functional programming. It should tell you there are primitives and objects. and it should tell you how JavaScript implements Value vs Reference.\n\nIs there something I missed? Something wrong? Something good? Ping me on [Twitter](https://twitter.com/agneymenon)","src/content/blog/value-vs-reference.mdx","f6beff60a9dda8d2","why-is-my-state-not-getting-updated",{"id":666,"data":668,"body":673,"filePath":674,"digest":675,"deferredRender":20},{"title":669,"date":670,"tags":671,"published":20},"Why is my state not getting updated - Class version","2018-04-14T22:12:03.284Z",[96,31,216,217,672],"one step back","Probably because you are using it wrong.\n\nIf you browse Stackoverflow for React questions, this is one of the most common questions that you will find. Well, it is this or other versions of the same question. All this after Stackoverflow marks questions as duplicates.\n\n```js\nfunction handleChange(value) {\n  this.setState({\n    value: newValue,\n  });\n  console.log(this.state.value); //Why is my state not updated?\n}\n```\n\nWhy is your state not getting updated?\n\nStraight out of [React docs](https://reactjs.org/docs/state-and-lifecycle.html#state-updates-may-be-asynchronous), `setState` may be asynchronous. What does that mean?\n\nLetâ€™s find out.\n\n```js\nsetTimeout(() => console.log(\"foo\"), 0);\nconsole.log(\"bar\");\n```\n\nWhat is the output?\n\nFirst the second `console.log` fires and then the first one inside the `setTimeout` function. This happens because `setTimeout` is asynchronous and is moved to the browser thread. So the code that runs after `setTimeout` gets executed however small the timeout is.\n\nSame is the case with `setState` Because of itâ€™s asynchronous state, the statement after is being called before the actual `setState` function.\n\n---\n\n### How do we fixÂ this?\n\n```js\nfunction handleChange(value) {\n  this.setState(\n    {\n      value: newValue,\n    },\n    () => {\n      console.log(this.state.value);\n    },\n  );\n}\n```\n\n`setState` actually comes with a callback version. All you have to do is provide the function to be run after the `setState` is executed. Here, you can give whatever action you wanted to perform once the setState is done.\n\nSince you might already have the result you are going to `setState` with, it might be better to utilise that result for regular operations rather than using the callback.\n\nPS: You could also just use `console.log(this.state.value)` in `render()` function or `componentDidUpdate()` but Iâ€™m guessing you already knew that.\n\n### Why is it asynchronous?\n\nNow that you know how to fix it, you can leave.\n\nOr you can stay and figure out why is it made asynchronous. _Doesnâ€™t it make React slower?_\n\nFrom the docs:\n\n> React may batch multiple `setState()` calls into a single update for performance.\n\n> Because `this.props` and `this.state` may be updated asynchronously, you should not rely on their values for calculating the next state.\n\nYes, that is just it. React it doing this for performance. You might not feel the need for it in a small application. But in a larger application where a lot of state updates may be taking place simultaneously, batching state updates comes as a boon.\n\nThe `setState` comes with several other neat tricks as well, with `prevState` which you should definitely check out if you are new to React or may be just havenâ€™t heard of it.","src/content/blog/why-is-my-state-not-getting-updated.mdx","54be6899e4c8b52e","when-to-skip-alt",{"id":676,"data":678,"body":684,"filePath":685,"digest":686,"deferredRender":20},{"title":679,"date":680,"tags":681,"published":20},"When can we skip the alt tag? - Accessibility","2019-05-05T22:12:03.284Z",[682,615,506,683],"image alt tag","images","Images have `alt` attributes that describe the said image for screen readers. The `alt` tags are also shown by browsers when the image does not load. The question we are looking at today is, When is it okay to skip the alt tag?\n\n## Never.\n\nThat was a trick question, you should never skip the alt tag.\n\nBut there are times when you can leave it empty and those are the cases I plan to explore in this post.\n\n## How do we leave it empty?\n\n```html\n\u003Cimg src=\"{source}\" alt=\"\" />\n```\n\nThat was simple.\n\n## What are the consequences of leaving it empty?\n\n1. Screen readers will not detect your image.\n2. If it is broken, there will not be an alternative text to determine the context provided by the image.\n\n## When do we use the alt tag?\n\nThis depends on the picture and the context it is presented in.\n\nIf a user is able to understand the use of the picture in the context it is used in without using any caption, this would be the case for you to use an alt tag to explain it to a non visual user.\n\nFor example, consider this image:\n\n![A Boy and his imaginary friend dancing](/blog/when-to-skip-alt/calvin-and-hobbes.gif)\n\nWithout any companion text, a person who uses the visual stimulus can tell that this is a boy and a tiger (probably an imaginary friend of the small boy) dancing in joy. This is the context you need to provide to the non visual user using the `alt` tag.\n\n## Decorative Images\n\nThese cover the cases when the image is merely used for decoration purposes. For example, the images that could be used to seperate sections in articles.\n\nThese can already be indicated in HTML using `section` tags and do not require the presence of these decorative images. Providing an alt text to these images just confuse the non visual user further to their usage. Furthermore, these tend to be repeated across the page in most cases and would be irritating when repeated by reader several times.\n\nIt is okay to leave the `alt` tag empty in this case.\n\n## When do we use the caption?\n\nSometimes just the image is not enough. Even for the visual user,it requires some kind off textual information to make sense of the data.\n\nFor example, consider the same image that we used in the earlier example with a different title:\n\n\u003Cdiv style={{ backgroundColor: \"#fcfbeb\", padding: \"1.2rem 1rem\" }}>\n  \u003Ch3 style={{ margin: 0 }}>Golden Age of Cartoons\u003C/h3>\n  \u003Cfigure>\n    \u003Cimg src=\"/blog/when-to-skip-alt/calvin-and-hobbes.gif\" alt=\"\" />\n    \u003Cfigcaption>\n      Characters from Calvin and Hobbes Cartoon by Bill Watterson\n    \u003C/figcaption>\n  \u003C/figure>\n\u003C/div>\n\nNow, the image is used in a different context from before. Even if the article is about Cartoons in general, there might be audience to your article who are not aware of [Calvin and Hobbes](https://en.wikipedia.org/wiki/Calvin_and_Hobbes) (shame on you!).\n\nFor them we introduce the concept of a caption for the image:\n\n```html\n\u003Cfigure>\n  \u003Cimg src=\"source\" alt=\"\" />\n  \u003Cfigcaption>\n    Characters from Calvin and Hobbes Cartoon by Bill Watterson\n  \u003C/figcaption>\n\u003C/figure>\n```\n\nWe associate the caption with the image with help of [`figure`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/figure) tag.\n\nNow, notice that both visual and non visual audience are treated to the same information. Providing the `alt` tag on the image would lead to no more information for the non visual information. Hence, in this situation we leave the `alt` tag as empty.\n\n## When images serve a functionality within the page.\n\nImages/Icons often serve as placeholders inside buttons or links that can be clicked. These are often cases when the `alt` tag should never be missed.\n\nSeveral examples for this are perhaps Zoom, Print, Search, Download buttons that are present on several webpages. These actions are characterised by distinctive icons rather than text and very often they contain only icons. In this case, it is very important that the `alt` tag spell out the functionality which will be carried out when clicking on the image.\n\nThere may also be cases, where image is a decoration.\n\n![Example download button with icon and text](https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSPvRbTTNPUnqQsWvtYHySO7iYRymAgGz_G8dbInXwzhmh_p6pN)\n\nIn this case, even though there is an icon representing download, it is accompanied by text. Hence, providing an alt text does not bring anything new to the table that the text has not announced. This is a case where `alt` can be skipped.\n\n## External Resources on the topic:\n\n1. [https://www.w3.org/WAI/tutorials/images](https://www.w3.org/WAI/tutorials/images)\n2. [https://accessibility.psu.edu/images/imageshtml/](https://accessibility.psu.edu/images/imageshtml/)\n\nIs there something I missed? Something wrong? Something good? Ping me on [Twitter](https://twitter.com/agneymenon)","src/content/blog/when-to-skip-alt.mdx","982dc1e3f6be2bc5","when-to-use-usecallback",{"id":687,"data":689,"body":694,"filePath":695,"digest":696,"deferredRender":20},{"title":690,"date":691,"tags":692,"published":20},"When to use useCallback","2019-10-23T22:12:03.284Z",[180,693,31],"useCallback","> This post does not have a Yes/No answer, but tries to explain from a begineer standpoint why this hook is part of the official roster.\n\nLet us start the story with two components:\n\n1. Parent\n2. Child\n\n\u003Ciframe\n  src=\"https://stackblitz.com/edit/usecallback-starter?ctl=1&embed=1&file=index.js\"\n  width=\"100%\"\n  height=\"500\"\n  scrolling=\"no\"\n  frameborder=\"no\"\n  allowfullscreen=\"\"\n  allowtransparency=\"true\"\n>\u003C/iframe>\n\nThe parent component has a button that increments the count state in the same component while Child component will have nothing to do with it.\n\nNote the console logs as you click re-render. Both child and parent will re-render with logs:\n\n```\nre-render parent component\nre-render child component.\n```\n\neven though the child component has nothing to do with the state at all.\n\nNow, we have to prevent the Child component from rerendering. Keeping the functional component we can use [React.memo](https://reactjs.org/docs/react-api.html#reactmemo) to achieve this. The child component will become:\n\n```jsx\nconst Child = memo(({ reset }) => {\n  // same content as earlier\n});\n```\n\nWithout the second argument, `memo` will do a shallow comparison of props:\n\n```js\nif (prevProps !== props) {\n  rerender();\n} else {\n  // don't\n}\n```\n\nYou can check the logs now and see that it does not update the child component on parent rerender. It only updates the parent component with the log:\n\n```\nre-render parent component\n```\n\nNow, the requirements have progressed and we have to house a Reset button for count inside the `Child` component.\n\nThis would refractor child to:\n\n```jsx\nconst Child = memo(({ reset }) => {\n  console.log(\"re-render child component.\");\n  return (\n    \u003Cdiv>\n      \u003Cp>child component which resets count\u003C/p>\n      \u003Cbutton onClick={reset}>Reset Count\u003C/button>\n    \u003C/div>\n  );\n});\n\nexport default Child;\n```\n\nFor the reset function we have to refractor the parent to:\n\n```jsx\nconst Parent () => {\n  const [count, setCount] = useState(0);\n  console.log(\"re-render parent component\");\n\n  const resetCount = () => {\n    setCount(0);\n  };\n  return (\n    \u003Cmain>\n      \u003Cp>Count: {count}\u003C/p>\n      \u003Cbutton onClick={() => setCount(count=>(count+1))}>Increment\u003C/button>\n      \u003CChild reset={resetCount} />\n    \u003C/main>\n  )\n}\n```\n\nNow you can click on the reset button to reset the count to 0. But you will notice that the `memo` magic that we applied earlier is not working anymore. The logs suggest that both child and parent are being rerendered.\nWhy is this happening?\n\nAs we mentioned earlier, `memo` depends on the referential equality of `prevProps` and `props` to work. But the `resetCount` function is being created on every render of `Parent` and hence `prevProps` and `props` is not the same anymore (even though they are).\n\nNow, to apply the `memo` magic again, we need to make sure that `resetCount` function is not unnecessarily recreated on every render of `Parent`. This is exactly what `useCallback` helps us to do.\n\n```js\nconst resetCount = useCallback(() => {\n  setCount(0);\n}, [setCount]);\n```\n\n`useCallback` will always return the same instance of the function on re-renders and would refresh only when dependencies change. Note the second argument of `useCallback`, this is very similar to the `useEffect` hook and refers to the dependecies that should trigger a reintialisation of the function inside `useCallback` hook.\n\nFinished Demo:\n\n\u003Ciframe\n  src=\"https://stackblitz.com/edit/usecallback-finished?ctl=1&embed=1&file=index.js\"\n  width=\"100%\"\n  height=\"500\"\n  scrolling=\"no\"\n  frameborder=\"no\"\n  allowfullscreen=\"\"\n  allowtransparency=\"true\"\n>\u003C/iframe>\n\nExtended Reading:\n\n1. [useCallback Docs](https://reactjs.org/docs/hooks-reference.html#usecallback)\n2. [When to use useMemo and useCallback - Kent C Dodds](https://kentcdodds.com/blog/usememo-and-usecallback)\n3. [How to read an often-changing value from useCallback?](https://reactjs.org/docs/hooks-faq.html#how-to-read-an-often-changing-value-from-usecallback)\n4. [Are Hooks slow because of creating functions in render?](https://reactjs.org/docs/hooks-faq.html#are-hooks-slow-because-of-creating-functions-in-render)","src/content/blog/when-to-use-usecallback.mdx","7435f17f999da65e","writing-advent-blogs-with-gatsby",{"id":697,"data":699,"body":704,"filePath":705,"digest":706,"deferredRender":20},{"title":700,"date":701,"tags":702,"published":20},"A GatsbyJS Advent Blog Posts Theme","2019-12-01T22:12:03.284Z",[96,31,357,703],"devadvent","The Advent has officially began and it's time for some advent blog posts.\n\nI made a [GatsbyJS theme](https://www.gatsbyjs.org/docs/themes/what-are-gatsby-themes/) to help you get started on the #Trend.\n\nSource: https://github.com/agneym/gatsby-theme-advent\n\n# Installation\n\n```bash\nnpm i @agney/gatsby-theme-advent\n\n# OR #\n\nyarn add @agney/gatsby-theme-advent\n```\n\nYou can start using it by adding it to the `gatsby-config.js` file:\n\n```javascript\nmodule.exports = {\n  plugins: [\n    {\n      resolve: `@agney/gatsby-theme-advent`,\n      options: {\n        contentPath: \"src/content\",\n        assetPath: \"src/assets\",\n        basePath: \"/december\", // Tell the theme which URL to render the theme at.\n      },\n    },\n  ],\n};\n```\n\nThe `contentPath` defines where your markdown files are hosted, there has to be at least a markdown file when you get started.\n\nMarkdown files with following `frontmatter` are supported:\n\n```\n---\ntitle: \"This is the first advent gift\"\ndate: \"2019-12-01T22:12:03.284Z\"\npublished: true\n---\n```\n\nThe `assetPath` refers to the path to directory where the theme can pick up the cover image from. Currently, you can add an image named `cover.jpg` at this directory and it will be passed through `gatsby-plugin-sharp` and appear as your cover image.\n\nThe `basePath` is the path to render the advent page on. You can use \"\" or leave it out to have it render on the main page.\n\n### Have Fun ðŸŽ„\n\nFeel free to raise an [issue](https://github.com/agneym/gatsby-theme-advent/issues) or [contribute](https://github.com/agneym/gatsby-theme-advent#contributing).\n\nDo add a comment if you are participating in the #DevAdvent Blogging ðŸ’–","src/content/blog/writing-advent-blogs-with-gatsby.mdx","0d26e66c1784a491"]